import{a as ie}from"./chunk-EJYMO6F6.js";import{a as ee,b as te}from"./chunk-DSRBGV4S.js";import{a as W}from"./chunk-ZR6IMNZZ.js";import{b as q,g as G,h as K,j as Q,k as Y,l as Z,m as $}from"./chunk-H76ILWBK.js";import{B as H,D as X,u as z,z as U}from"./chunk-7LBEGBWT.js";import{K as A,h as J}from"./chunk-ER7JBIM7.js";import{d as F}from"./chunk-Q5W36VOG.js";import{Fd as N,Gb as r,Hb as u,Ib as C,Jb as g,Jd as R,Kb as P,La as o,Lb as k,Ld as B,Mb as w,Md as L,Pa as x,Pb as y,Qb as V,Wa as M,_a as c,fb as p,hb as b,kb as s,mb as D,mc as j,nb as E,ob as I,pa as h,pb as i,qa as S,qb as t,rb as v,tb as O,tc as T,vb as _,wb as d}from"./chunk-IH3C3RBC.js";var re=(n,a)=>({valid:n,invalid:a}),ae=n=>["/identity",n];function oe(n,a){n&1&&(i(0,"mat-icon"),r(1,"check_circle"),t(),i(2,"h2"),r(3,"Credential Valid"),t())}function le(n,a){n&1&&(i(0,"mat-icon"),r(1,"error"),t(),i(2,"h2"),r(3,"Verification Failed"),t())}function de(n,a){if(n&1&&(i(0,"a",20),r(1),t()),n&2){let e=d(3);p("routerLink",y(3,ae,e.issuerIdentity.id)),o(),g(" ",e.issuerIdentity.name," (",e.issuerIdentity.id,") ")}}function ce(n,a){if(n&1&&r(0),n&2){let e=d(3);C(" ",typeof e.credentialData.issuer=="string"?e.credentialData.issuer:e.credentialData.issuer.id||"Unknown"," ")}}function se(n,a){if(n&1&&(i(0,"a",20),r(1),t()),n&2){let e=d(3);p("routerLink",y(3,ae,e.subjectIdentity.id)),o(),g(" ",e.subjectIdentity.name," (",e.subjectIdentity.id,") ")}}function me(n,a){if(n&1&&r(0),n&2){let e=d(3);C(" ",(e.credentialData.credentialSubject==null?null:e.credentialData.credentialSubject.id)||"Not specified"," ")}}function pe(n,a){n&1&&(i(0,"span",21),r(1,"EXPIRED"),t())}function ue(n,a){if(n&1&&(i(0,"div",26)(1,"div",27),r(2),t(),i(3,"div",28),r(4),t()()),n&2){let e=d().$implicit,l=d(4);o(2),C("",e,":"),o(2),u(l.credentialData.credentialSubject[e])}}function fe(n,a){if(n&1&&c(0,ue,5,2,"div",26),n&2){let e=a.$implicit;s(e!=="id"?0:-1)}}function _e(n,a){n&1&&(i(0,"p",25),r(1,"No claims found in this credential."),t())}function Ce(n,a){if(n&1&&(v(0,"mat-divider"),i(1,"div",23)(2,"h3"),r(3,"Claims"),t(),i(4,"div",24),E(5,fe,1,1,null,null,D),c(7,_e,2,0,"p",25),t()()),n&2){let e=d(3);o(5),I(e.Object.keys(e.credentialData.credentialSubject)),o(2),s(e.Object.keys(e.credentialData.credentialSubject).length<=1?7:-1)}}function xe(n,a){if(n&1){let e=O();v(0,"mat-divider"),i(1,"div",16)(2,"h3"),r(3,"Credential Details"),t(),i(4,"div",17)(5,"div",18),r(6,"ID:"),t(),i(7,"div",19),r(8),t()(),i(9,"div",17)(10,"div",18),r(11,"Type:"),t(),i(12,"div",19),r(13),t()(),i(14,"div",17)(15,"div",18),r(16,"Issuer:"),t(),i(17,"div",19),c(18,de,2,5,"a",20)(19,ce,1,1),t()(),i(20,"div",17)(21,"div",18),r(22,"Subject:"),t(),i(23,"div",19),c(24,se,2,5,"a",20)(25,me,1,1),t()(),i(26,"div",17)(27,"div",18),r(28,"Issued:"),t(),i(29,"div",19),r(30),t()(),i(31,"div",17)(32,"div",18),r(33,"Expires:"),t(),i(34,"div",19),r(35),c(36,pe,2,0,"span",21),t()()(),c(37,Ce,8,1),i(38,"div",11)(39,"button",22),_("click",function(){h(e);let m=d(2);return S(m.importCredential())}),i(40,"mat-icon"),r(41,"add"),t(),r(42," Save to Wallet "),t()()}if(n&2){let e=d(2);o(8),u(e.credentialData.id||"Not specified"),o(5),u(e.getCredentialType()),o(5),s(e.issuerIdentity?18:19),o(6),s(e.subjectIdentity?24:25),o(6),u(e.getIssuanceDate()),o(4),b("expired",e.isCredentialExpired()),o(),C(" ",e.getExpiryDate()," "),o(),s(e.isCredentialExpired()?36:-1),o(),s(e.credentialData.credentialSubject?37:-1)}}function ve(n,a){if(n&1&&(i(0,"div",14)(1,"div",15),c(2,oe,4,0)(3,le,4,0),i(4,"p"),r(5),t()(),c(6,xe,43,10),t()),n&2){let e=d();o(),p("ngClass",V(4,re,e.verificationResult.valid,!e.verificationResult.valid)),o(),s(e.verificationResult.valid?2:3),o(3),u(e.verificationResult.message),o(),s(e.credentialData?6:-1)}}var ne=class n{constructor(a,e,l){this.credentialService=a;this.identityService=e;this.snackBar=l}credentialJson="";verificationResult=null;credentialData=null;issuerIdentity;subjectIdentity;Object=Object;onFileSelected(a){let e=a.target.files?.[0];if(!e)return;let l=new FileReader;l.onload=m=>{this.credentialJson=m.target?.result},l.readAsText(e)}verifyCredential(){if(!this.credentialJson){this.showError("Please enter a credential to verify");return}try{let a=JSON.parse(this.credentialJson);if(this.credentialData=a,this.verificationResult=this.credentialService.verifyCredential(a),a.issuer){let e=typeof a.issuer=="string"?a.issuer:a.issuer.id;this.issuerIdentity=this.identityService.getIdentityById(e)}a.credentialSubject&&a.credentialSubject.id&&(this.subjectIdentity=this.identityService.getIdentityById(a.credentialSubject.id))}catch{this.verificationResult={valid:!1,message:"Invalid JSON format"},this.credentialData=null}}importCredential(){if(!this.credentialData){this.showError("No valid credential to import");return}this.credentialService.importCredential(this.credentialData)?this.showSuccess("Credential imported successfully"):this.showError("Failed to import credential")}clearForm(){this.credentialJson="",this.verificationResult=null,this.credentialData=null,this.issuerIdentity=void 0,this.subjectIdentity=void 0}getCredentialType(){return!this.credentialData||!this.credentialData.type?"Unknown":Array.isArray(this.credentialData.type)?this.credentialData.type.length>1?this.credentialData.type[1]:this.credentialData.type[0]:this.credentialData.type}getIssuanceDate(){if(!this.credentialData||!this.credentialData.issuanceDate)return"Not specified";try{return new Date(this.credentialData.issuanceDate).toLocaleString()}catch{return this.credentialData.issuanceDate}}getExpiryDate(){if(!this.credentialData||!this.credentialData.expirationDate)return"Not specified";try{return new Date(this.credentialData.expirationDate).toLocaleString()}catch{return this.credentialData.expirationDate}}isCredentialExpired(){if(!this.credentialData||!this.credentialData.expirationDate)return!1;try{return new Date(this.credentialData.expirationDate)<new Date}catch{return!1}}formatJson(a){return JSON.stringify(a,null,2)}showSuccess(a){this.snackBar.open(a,"Close",{duration:3e3,panelClass:"success-snackbar"})}showError(a){this.snackBar.open(a,"Close",{duration:5e3,panelClass:"error-snackbar"})}static \u0275fac=function(e){return new(e||n)(x(W),x(A),x(Z))};static \u0275cmp=M({type:n,selectors:[["app-verify-credential"]],decls:33,vars:4,consts:[[1,"page-container"],[1,"page-header"],[1,"title-section"],[1,"verify-container"],[1,"input-section","neon-card"],[1,"section-description"],[1,"file-input-wrapper"],["mat-stroked-button","","color","primary",1,"upload-btn"],["type","file","accept",".json",3,"change"],["appearance","outline",1,"full-width"],["matInput","","rows","10","placeholder","Paste verifiable credential JSON here...",3,"ngModelChange","ngModel"],[1,"action-buttons"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"result-section","neon-card"],[1,"verification-result",3,"ngClass"],[1,"credential-details"],[1,"detail-item"],[1,"detail-label"],[1,"detail-value"],[1,"identity-link",3,"routerLink"],[1,"expired-tag"],["mat-raised-button","","color","accent",3,"click"],[1,"subject-claims"],[1,"claims-container"],[1,"no-claims"],[1,"claim-item"],[1,"claim-key"],[1,"claim-value"]],template:function(e,l){e&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),r(4,"Verify Credential"),t(),i(5,"p"),r(6,"Validate a verifiable credential"),t()()(),i(7,"div",3)(8,"div",4)(9,"h2"),r(10,"Enter Credential"),t(),i(11,"p",5),r(12," Paste a verifiable credential JSON or upload a file to verify "),t(),i(13,"div",6)(14,"button",7)(15,"mat-icon"),r(16,"upload_file"),t(),r(17," Select Credential File "),t(),i(18,"input",8),_("change",function(f){return l.onFileSelected(f)}),t()(),i(19,"mat-form-field",9)(20,"mat-label"),r(21,"Credential JSON"),t(),i(22,"textarea",10),w("ngModelChange",function(f){return k(l.credentialJson,f)||(l.credentialJson=f),f}),t()(),i(23,"div",11)(24,"button",12),_("click",function(){return l.clearForm()}),i(25,"mat-icon"),r(26,"clear"),t(),r(27," Clear "),t(),i(28,"button",13),_("click",function(){return l.verifyCredential()}),i(29,"mat-icon"),r(30,"verified_user"),t(),r(31," Verify "),t()()(),c(32,ve,7,7,"div",14),t()()),e&2&&(o(22),P("ngModel",l.credentialJson),o(2),p("disabled",!l.credentialJson&&!l.verificationResult),o(4),p("disabled",!l.credentialJson),o(4),s(l.verificationResult?32:-1))},dependencies:[T,j,X,z,U,H,F,R,N,J,te,ee,K,G,q,L,B,Y,Q,$,ie],styles:[".title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:5px}.title-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.verify-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.input-section[_ngcontent-%COMP%], .result-section[_ngcontent-%COMP%]{padding:30px;margin-bottom:30px}.section-description[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:25px}.file-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-bottom:20px;overflow:hidden}.file-input-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.upload-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;padding:10px;border:1px dashed var(--primary-color)}.full-width[_ngcontent-%COMP%]{width:100%}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.verification-result[_ngcontent-%COMP%]{text-align:center;padding:20px 0}.verification-result[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;height:3rem;width:3rem;margin-bottom:10px}.verification-result[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}.verification-result[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:80%;margin:0 auto;color:var(--text-secondary)}.verification-result.valid[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--success-color)}.verification-result.invalid[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--error-color)}mat-divider[_ngcontent-%COMP%]{margin:25px 0}.credential-details[_ngcontent-%COMP%], .subject-claims[_ngcontent-%COMP%]{margin-top:20px}.detail-item[_ngcontent-%COMP%], .claim-item[_ngcontent-%COMP%]{display:flex;margin-bottom:15px}.detail-label[_ngcontent-%COMP%], .claim-key[_ngcontent-%COMP%]{width:80px;font-weight:500;color:var(--text-secondary);flex-shrink:0}.detail-value[_ngcontent-%COMP%], .claim-value[_ngcontent-%COMP%]{flex:1;word-break:break-all}.identity-link[_ngcontent-%COMP%]{color:var(--primary-color);text-decoration:none;transition:all .2s ease}.identity-link[_ngcontent-%COMP%]:hover{text-shadow:0 0 8px rgba(0,195,255,.8)}.claims-container[_ngcontent-%COMP%]{background-color:#0000001a;border-radius:4px;padding:15px}.no-claims[_ngcontent-%COMP%]{text-align:center;color:var(--text-secondary);font-style:italic;margin:10px 0}.expired[_ngcontent-%COMP%]{color:var(--warning-color)}.expired-tag[_ngcontent-%COMP%]{display:inline-block;margin-left:10px;padding:2px 6px;background-color:#ffb30033;border-radius:10px;font-size:.7rem;color:var(--warning-color)}@media (max-width: 768px){.detail-item[_ngcontent-%COMP%], .claim-item[_ngcontent-%COMP%]{flex-direction:column;margin-bottom:20px}.detail-label[_ngcontent-%COMP%], .claim-key[_ngcontent-%COMP%]{margin-bottom:5px}}"]})};export{ne as VerifyCredentialComponent};

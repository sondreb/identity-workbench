import{a as N,b as j}from"./chunk-SLUFEPBK.js";import{a as K,b as z}from"./chunk-KYZVKG4K.js";import{b as R}from"./chunk-ISFHSFQK.js";import{A as L,p as W,u as T,v as A,x as B,y as F,z as V}from"./chunk-MQR7L55N.js";import{h as k,m as O,o as D,q as I}from"./chunk-CDN4SK7S.js";import{h as C,i as P}from"./chunk-D6JINR2S.js";import{Ad as E,Bd as w,Fb as n,Gb as u,Hb as y,Jb as d,Ka as l,Kb as c,Lb as m,Oa as f,Va as v,a as h,nc as M,ob as e,pb as t,qd as _,ub as p,vd as x,yd as b}from"./chunk-OXWMXC6C.js";var U=class S{constructor(r,s){this.storageService=r;this.snackBar=s}settings={appearance:{theme:"dark",accentColor:"#00c3ff"},privacy:{storePrivateKeys:!0,autoVerify:!0},advanced:{resolverEndpoint:"https://resolver.identity.foundation/",enableDebugMode:!1}};appVersion="0.1.0";statCount={identities:0,credentials:0,totalStorage:"0 KB"};ngOnInit(){this.loadSettings(),this.calculateStats()}loadSettings(){let r=this.storageService.get("app-settings");r&&(this.settings=h(h({},this.settings),r))}saveSettings(){this.storageService.set("app-settings",this.settings),this.showSuccess("Settings saved successfully")}resetSettings(){confirm("Are you sure you want to reset all settings to default?")&&(this.settings={appearance:{theme:"dark",accentColor:"#00c3ff"},privacy:{storePrivateKeys:!0,autoVerify:!0},advanced:{resolverEndpoint:"https://resolver.identity.foundation/",enableDebugMode:!1}},this.saveSettings())}clearAllData(){confirm("WARNING: This will delete all your identities and credentials. This action cannot be undone. Continue?")&&(this.storageService.clear(),this.showSuccess("All data has been cleared"),this.calculateStats())}exportAllData(){try{let r=this.storageService.get("identity-workbench-identities")||[],s=this.storageService.get("identity-workbench-credentials")||[],a=this.storageService.get("app-settings")||this.settings,o={version:this.appVersion,exportDate:new Date().toISOString(),data:{identities:r,credentials:s,settings:a}},i=JSON.stringify(o,null,2),J="data:application/json;charset=utf-8,"+encodeURIComponent(i),G=`identity-workbench-export-${new Date().toISOString().slice(0,10)}.json`,g=document.createElement("a");g.setAttribute("href",J),g.setAttribute("download",G),g.style.display="none",document.body.appendChild(g),g.click(),document.body.removeChild(g),this.showSuccess("Data exported successfully")}catch{this.showError("Failed to export data")}}importData(r){let s=r.target?.files?.[0];if(!s)return;let a=new FileReader;a.onload=o=>{try{let i=JSON.parse(o.target?.result);if(!i.data||!i.version)throw new Error("Invalid import file format");confirm(`This will import ${i.data.identities?.length||0} identities and ${i.data.credentials?.length||0} credentials. Continue?`)&&(i.data.identities?.length&&this.storageService.set("identity-workbench-identities",i.data.identities),i.data.credentials?.length&&this.storageService.set("identity-workbench-credentials",i.data.credentials),i.data.settings&&(this.storageService.set("app-settings",i.data.settings),this.loadSettings()),this.calculateStats(),this.showSuccess("Data imported successfully"))}catch{this.showError("Failed to import data: Invalid format")}},a.readAsText(s)}calculateStats(){let r=this.storageService.get("identity-workbench-identities")||[],s=this.storageService.get("identity-workbench-credentials")||[];this.statCount.identities=r.length,this.statCount.credentials=s.length;try{let a=0;for(let o of Object.keys(localStorage))if(o.startsWith("identity-workbench")){let i=localStorage.getItem(o)||"";a+=i.length*2}a<1024?this.statCount.totalStorage=`${a} B`:a<1024*1024?this.statCount.totalStorage=`${(a/1024).toFixed(1)} KB`:this.statCount.totalStorage=`${(a/(1024*1024)).toFixed(1)} MB`}catch{this.statCount.totalStorage="Unknown"}}showSuccess(r){this.snackBar.open(r,"Close",{duration:3e3,panelClass:"success-snackbar"})}showError(r){this.snackBar.open(r,"Close",{duration:5e3,panelClass:"error-snackbar"})}static \u0275fac=function(s){return new(s||S)(f(P),f(V))};static \u0275cmp=v({type:S,selectors:[["app-settings"]],decls:141,vars:10,consts:[[1,"page-container"],[1,"page-header"],[1,"neon-text"],[1,"settings-container"],[1,"settings-section","neon-card"],[1,"section-header"],[1,"setting-item"],[1,"setting-label"],["appearance","outline"],[3,"ngModelChange","ngModel"],["value","dark"],["value","light","disabled",""],["value","system","disabled",""],["type","color",1,"color-picker",3,"ngModelChange","ngModel"],[1,"setting-item","toggle"],[1,"setting-info"],[1,"setting-description"],["color","primary",3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"data-actions"],[1,"import-wrapper"],["mat-stroked-button","","color","primary",1,"import-btn"],["type","file","accept",".json",3,"change"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn",3,"click"],[1,"about-content"],[1,"app-info"],[1,"app-links"],["href","https://github.com/sondreb/identity-workbench","target","_blank",1,"app-link"],["href","#","target","_blank",1,"app-link"],[1,"settings-actions"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(s,a){s&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Settings"),t(),e(4,"p"),n(5,"Configure your Identity Workbench application"),t()(),e(6,"div",3)(7,"div",4)(8,"div",5)(9,"mat-icon"),n(10,"palette"),t(),e(11,"h2"),n(12,"Appearance"),t()(),e(13,"div",6)(14,"span",7),n(15,"Theme"),t(),e(16,"mat-form-field",8)(17,"mat-label"),n(18,"Select Theme"),t(),e(19,"mat-select",9),m("ngModelChange",function(i){return c(a.settings.appearance.theme,i)||(a.settings.appearance.theme=i),i}),e(20,"mat-option",10),n(21,"Dark (Neon)"),t(),e(22,"mat-option",11),n(23,"Light (Coming Soon)"),t(),e(24,"mat-option",12),n(25,"System Default (Coming Soon)"),t()()()(),e(26,"div",6)(27,"span",7),n(28,"Accent Color"),t(),e(29,"input",13),m("ngModelChange",function(i){return c(a.settings.appearance.accentColor,i)||(a.settings.appearance.accentColor=i),i}),t()()(),e(30,"div",4)(31,"div",5)(32,"mat-icon"),n(33,"shield"),t(),e(34,"h2"),n(35,"Privacy & Security"),t()(),e(36,"div",14)(37,"div",15)(38,"span",7),n(39,"Store Private Keys"),t(),e(40,"span",16),n(41,"Allow storage of private keys for signing operations"),t()(),e(42,"mat-slide-toggle",17),m("ngModelChange",function(i){return c(a.settings.privacy.storePrivateKeys,i)||(a.settings.privacy.storePrivateKeys=i),i}),t()(),e(43,"div",14)(44,"div",15)(45,"span",7),n(46,"Auto Verify"),t(),e(47,"span",16),n(48,"Automatically verify credentials when imported"),t()(),e(49,"mat-slide-toggle",17),m("ngModelChange",function(i){return c(a.settings.privacy.autoVerify,i)||(a.settings.privacy.autoVerify=i),i}),t()()(),e(50,"div",4)(51,"div",5)(52,"mat-icon"),n(53,"build"),t(),e(54,"h2"),n(55,"Advanced"),t()(),e(56,"div",6)(57,"span",7),n(58,"DID Resolver Endpoint"),t(),e(59,"mat-form-field",8)(60,"mat-label"),n(61,"Resolver URL"),t(),e(62,"input",18),m("ngModelChange",function(i){return c(a.settings.advanced.resolverEndpoint,i)||(a.settings.advanced.resolverEndpoint=i),i}),t()()(),e(63,"div",14)(64,"div",15)(65,"span",7),n(66,"Debug Mode"),t(),e(67,"span",16),n(68,"Enable additional diagnostic information"),t()(),e(69,"mat-slide-toggle",17),m("ngModelChange",function(i){return c(a.settings.advanced.enableDebugMode,i)||(a.settings.advanced.enableDebugMode=i),i}),t()()(),e(70,"div",4)(71,"div",5)(72,"mat-icon"),n(73,"storage"),t(),e(74,"h2"),n(75,"Data Management"),t()(),e(76,"div",19)(77,"div",20)(78,"span",21),n(79),t(),e(80,"span",22),n(81,"Identities"),t()(),e(82,"div",20)(83,"span",21),n(84),t(),e(85,"span",22),n(86,"Credentials"),t()(),e(87,"div",20)(88,"span",21),n(89),t(),e(90,"span",22),n(91,"Storage Used"),t()()(),e(92,"div",23)(93,"div",24)(94,"button",25)(95,"mat-icon"),n(96,"file_upload"),t(),n(97," Import Data "),t(),e(98,"input",26),p("change",function(i){return a.importData(i)}),t()(),e(99,"button",27),p("click",function(){return a.exportAllData()}),e(100,"mat-icon"),n(101,"file_download"),t(),n(102," Export Data "),t(),e(103,"button",28),p("click",function(){return a.clearAllData()}),e(104,"mat-icon"),n(105,"delete_forever"),t(),n(106," Clear All Data "),t()()(),e(107,"div",4)(108,"div",5)(109,"mat-icon"),n(110,"info"),t(),e(111,"h2"),n(112,"About"),t()(),e(113,"div",29)(114,"div",30)(115,"h3"),n(116,"Identity Workbench"),t(),e(117,"p"),n(118),t(),e(119,"p"),n(120,"A modern tool for managing DIDs and Verifiable Credentials"),t()(),e(121,"div",31)(122,"a",32)(123,"mat-icon"),n(124,"code"),t(),n(125," Source Code "),t(),e(126,"a",33)(127,"mat-icon"),n(128,"help_outline"),t(),n(129," Documentation "),t(),e(130,"a",33)(131,"mat-icon"),n(132,"bug_report"),t(),n(133," Report Issue "),t()()()(),e(134,"div",34)(135,"button",35),p("click",function(){return a.resetSettings()}),n(136," Reset to Default "),t(),e(137,"button",36),p("click",function(){return a.saveSettings()}),e(138,"mat-icon"),n(139,"save"),t(),n(140," Save Settings "),t()()()()),s&2&&(l(19),d("ngModel",a.settings.appearance.theme),l(10),d("ngModel",a.settings.appearance.accentColor),l(13),d("ngModel",a.settings.privacy.storePrivateKeys),l(7),d("ngModel",a.settings.privacy.autoVerify),l(13),d("ngModel",a.settings.advanced.resolverEndpoint),l(7),d("ngModel",a.settings.advanced.enableDebugMode),l(10),u(a.statCount.identities),l(5),u(a.statCount.credentials),l(5),u(a.statCount.totalStorage),l(29),y("Version ",a.appVersion,""))},dependencies:[M,I,k,O,D,b,x,C,R,A,T,W,w,E,F,B,z,K,_,j,N,L],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:30px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:5px}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.settings-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.settings-section[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.section-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px;color:var(--primary-color);margin-right:10px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:400}.setting-item[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;align-items:center}.setting-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.setting-item.toggle[_ngcontent-%COMP%]{justify-content:space-between}.setting-info[_ngcontent-%COMP%]{flex:1}.setting-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500}.setting-description[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.color-picker[_ngcontent-%COMP%]{width:50px;height:40px;border:none;border-radius:4px;background:none;cursor:pointer}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin-bottom:20px}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:15px;background-color:#0003;border-radius:8px}.stat-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:300;color:var(--primary-color);margin-bottom:5px}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.data-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.import-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.import-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.about-content[_ngcontent-%COMP%]{text-align:center}.app-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1.3rem;color:var(--primary-color)}.app-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:var(--text-secondary)}.app-links[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;gap:20px;flex-wrap:wrap}.app-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.settings-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin:20px 0}@media (max-width: 768px){.setting-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.setting-item.toggle[_ngcontent-%COMP%]{flex-direction:row}.setting-label[_ngcontent-%COMP%]{margin-bottom:10px}mat-form-field[_ngcontent-%COMP%]{width:100%}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.data-actions[_ngcontent-%COMP%]{flex-direction:column}.data-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .import-wrapper[_ngcontent-%COMP%]{width:100%}.app-links[_ngcontent-%COMP%]{flex-direction:column;gap:15px}}"]})};export{U as SettingsComponent};

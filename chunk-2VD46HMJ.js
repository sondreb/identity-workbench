import{a as K,b as V}from"./chunk-S6QMT6QB.js";import{a as U,b as Y}from"./chunk-5KCKAK7J.js";import{b as z}from"./chunk-WAGZ2O6D.js";import{A as N,p as A,u as W,v as L,x as j,y as F,z as R}from"./chunk-MO7XJKAY.js";import{h as D,m as I,o as B,q as T}from"./chunk-7F52WLAM.js";import{h as b}from"./chunk-Y2AFIGU6.js";import{Dd as E,Gb as n,Gd as k,Hb as S,Ib as M,Id as w,Jd as P,Kb as d,Kd as O,La as s,Lb as c,Mb as g,Pa as f,Wa as C,pb as e,qb as t,tc as y,vb as m,yd as x}from"./chunk-WSUMPKXI.js";var J=class h{constructor(r,l){this.storageService=r;this.snackBar=l}settings;appVersion="1.0.0";statCount={identities:0,credentials:0,totalStorage:"0 KB"};ngOnInit(){this.loadSettings(),this.calculateStats()}loadSettings(){this.settings=this.storageService.getSettings()}saveSettings(){this.storageService.saveSettings(this.settings),this.snackBar.open("Settings saved successfully","Close",{duration:3e3,panelClass:"success-snackbar"})}resetSettings(){confirm("Are you sure you want to reset all settings to default?")&&(this.settings=this.storageService.resetSettings(),this.snackBar.open("Settings reset to default","Close",{duration:3e3}))}calculateStats(){let r="identity-workbench-identities",l="identity-workbench-credentials",a=this.storageService.get(r)||[],o=this.storageService.get(l)||[],i=0,p=localStorage.getItem(this.storageService.SETTINGS_KEY);p&&(i+=p.length*2);let _=localStorage.getItem(r);_&&(i+=_.length*2);let v=localStorage.getItem(l);v&&(i+=v.length*2);let u;i<1024?u=`${i} B`:i<1024*1024?u=`${(i/1024).toFixed(1)} KB`:u=`${(i/(1024*1024)).toFixed(1)} MB`,this.statCount={identities:a.length,credentials:o.length,totalStorage:u}}importData(r){let l=r.target.files[0];if(!l)return;let a=new FileReader;a.onload=o=>{try{let i=JSON.parse(o.target?.result);if(!i||typeof i!="object")throw new Error("Invalid data format");this.storageService.importData(i),this.loadSettings(),this.calculateStats(),this.snackBar.open("Data imported successfully","Close",{duration:3e3,panelClass:"success-snackbar"})}catch(i){console.error("Import error:",i),this.snackBar.open("Failed to import data. Invalid format.","Close",{duration:3e3,panelClass:"error-snackbar"})}r.target.value=""},a.onerror=()=>{this.snackBar.open("Error reading file","Close",{duration:3e3,panelClass:"error-snackbar"})},a.readAsText(l)}exportAllData(){try{let r=this.storageService.getAllData(),l=JSON.stringify(r,null,2),a=new Blob([l],{type:"application/json"}),o=window.URL.createObjectURL(a),i=document.createElement("a"),p=new Date().toISOString().replace(/[:.]/g,"-");i.download=`identity-workbench-export-${p}.json`,i.href=o,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(o),document.body.removeChild(i),this.snackBar.open("Data exported successfully","Close",{duration:3e3,panelClass:"success-snackbar"})}catch(r){console.error("Export error:",r),this.snackBar.open("Failed to export data","Close",{duration:3e3,panelClass:"error-snackbar"})}}clearAllData(){confirm("Are you sure you want to clear all data? This action cannot be undone.")&&(this.storageService.clear(),this.calculateStats(),this.snackBar.open("All data has been cleared","Close",{duration:3e3,panelClass:"success-snackbar"}))}applyTheme(r){this.settings.appearance.theme=r,this.saveSettings()}static \u0275fac=function(l){return new(l||h)(f(O),f(R))};static \u0275cmp=C({type:h,selectors:[["app-settings"]],decls:137,vars:9,consts:[[1,"page-container"],[1,"page-header"],[1,"primary-text"],[1,"settings-container"],[1,"settings-section","card"],[1,"section-header"],[1,"setting-item"],[1,"setting-label"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value","dark"],["value","light"],["value","system","disabled",""],[1,"setting-item","toggle"],[1,"setting-info"],[1,"setting-description"],["color","primary",3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"data-actions"],[1,"import-wrapper"],["mat-stroked-button","","color","primary",1,"import-btn"],["type","file","accept",".json",3,"change"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn",3,"click"],[1,"about-content"],[1,"app-info"],[1,"app-links"],["href","https://github.com/sondreb/identity-workbench","target","_blank",1,"app-link"],["href","#","target","_blank",1,"app-link"],[1,"settings-actions"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(l,a){l&1&&(e(0,"div",0)(1,"div",1)(2,"h1",2),n(3,"Settings"),t(),e(4,"p"),n(5,"Configure your Identity Workbench application"),t()(),e(6,"div",3)(7,"div",4)(8,"div",5)(9,"mat-icon"),n(10,"palette"),t(),e(11,"h2"),n(12,"Appearance"),t()(),e(13,"div",6)(14,"span",7),n(15,"Theme"),t(),e(16,"mat-form-field",8)(17,"mat-label"),n(18,"Select Theme"),t(),e(19,"mat-select",9),g("ngModelChange",function(i){return c(a.settings.appearance.theme,i)||(a.settings.appearance.theme=i),i}),m("selectionChange",function(){return a.applyTheme(a.settings.appearance.theme)}),e(20,"mat-option",10),n(21,"Dark (Neon)"),t(),e(22,"mat-option",11),n(23,"Light"),t(),e(24,"mat-option",12),n(25,"System Default (Coming Soon)"),t()()()()(),e(26,"div",4)(27,"div",5)(28,"mat-icon"),n(29,"shield"),t(),e(30,"h2"),n(31,"Privacy & Security"),t()(),e(32,"div",13)(33,"div",14)(34,"span",7),n(35,"Store Private Keys"),t(),e(36,"span",15),n(37,"Allow storage of private keys for signing operations"),t()(),e(38,"mat-slide-toggle",16),g("ngModelChange",function(i){return c(a.settings.privacy.storePrivateKeys,i)||(a.settings.privacy.storePrivateKeys=i),i}),t()(),e(39,"div",13)(40,"div",14)(41,"span",7),n(42,"Auto Verify"),t(),e(43,"span",15),n(44,"Automatically verify credentials when imported"),t()(),e(45,"mat-slide-toggle",16),g("ngModelChange",function(i){return c(a.settings.privacy.autoVerify,i)||(a.settings.privacy.autoVerify=i),i}),t()()(),e(46,"div",4)(47,"div",5)(48,"mat-icon"),n(49,"build"),t(),e(50,"h2"),n(51,"Advanced"),t()(),e(52,"div",6)(53,"span",7),n(54,"DID Resolver Endpoint"),t(),e(55,"mat-form-field",8)(56,"mat-label"),n(57,"Resolver URL"),t(),e(58,"input",17),g("ngModelChange",function(i){return c(a.settings.advanced.resolverEndpoint,i)||(a.settings.advanced.resolverEndpoint=i),i}),t()()(),e(59,"div",13)(60,"div",14)(61,"span",7),n(62,"Debug Mode"),t(),e(63,"span",15),n(64,"Enable additional diagnostic information"),t()(),e(65,"mat-slide-toggle",16),g("ngModelChange",function(i){return c(a.settings.advanced.enableDebugMode,i)||(a.settings.advanced.enableDebugMode=i),i}),t()()(),e(66,"div",4)(67,"div",5)(68,"mat-icon"),n(69,"storage"),t(),e(70,"h2"),n(71,"Data Management"),t()(),e(72,"div",18)(73,"div",19)(74,"span",20),n(75),t(),e(76,"span",21),n(77,"Identities"),t()(),e(78,"div",19)(79,"span",20),n(80),t(),e(81,"span",21),n(82,"Credentials"),t()(),e(83,"div",19)(84,"span",20),n(85),t(),e(86,"span",21),n(87,"Storage Used"),t()()(),e(88,"div",22)(89,"div",23)(90,"button",24)(91,"mat-icon"),n(92,"file_upload"),t(),n(93," Import Data "),t(),e(94,"input",25),m("change",function(i){return a.importData(i)}),t()(),e(95,"button",26),m("click",function(){return a.exportAllData()}),e(96,"mat-icon"),n(97,"file_download"),t(),n(98," Export Data "),t(),e(99,"button",27),m("click",function(){return a.clearAllData()}),e(100,"mat-icon"),n(101,"delete_forever"),t(),n(102," Clear All Data "),t()()(),e(103,"div",4)(104,"div",5)(105,"mat-icon"),n(106,"info"),t(),e(107,"h2"),n(108,"About"),t()(),e(109,"div",28)(110,"div",29)(111,"h3"),n(112,"Identity Workbench"),t(),e(113,"p"),n(114),t(),e(115,"p"),n(116,"A modern tool for managing DIDs and Verifiable Credentials"),t()(),e(117,"div",30)(118,"a",31)(119,"mat-icon"),n(120,"code"),t(),n(121," Source Code "),t(),e(122,"a",32)(123,"mat-icon"),n(124,"help_outline"),t(),n(125," Documentation "),t(),e(126,"a",32)(127,"mat-icon"),n(128,"bug_report"),t(),n(129," Report Issue "),t()()()(),e(130,"div",33)(131,"button",34),m("click",function(){return a.resetSettings()}),n(132," Reset to Default "),t(),e(133,"button",35),m("click",function(){return a.saveSettings()}),e(134,"mat-icon"),n(135,"save"),t(),n(136," Save Settings "),t()()()()),l&2&&(s(19),d("ngModel",a.settings.appearance.theme),s(19),d("ngModel",a.settings.privacy.storePrivateKeys),s(7),d("ngModel",a.settings.privacy.autoVerify),s(13),d("ngModel",a.settings.advanced.resolverEndpoint),s(7),d("ngModel",a.settings.advanced.enableDebugMode),s(10),S(a.statCount.identities),s(5),S(a.statCount.credentials),s(5),S(a.statCount.totalStorage),s(29),M("Version ",a.appVersion,""))},dependencies:[y,T,D,I,B,k,E,b,z,L,W,A,P,w,F,j,Y,U,x,V,K,N],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:30px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:5px;color:var(--primary-color)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.settings-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.settings-section[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;background-color:var(--card-bg);border-radius:4px;box-shadow:0 2px 4px #00000024}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.section-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px;color:var(--primary-color);margin-right:10px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:400}.setting-item[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;align-items:center}.setting-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.setting-item.toggle[_ngcontent-%COMP%]{justify-content:space-between}.setting-info[_ngcontent-%COMP%]{flex:1}.setting-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500}.setting-description[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin-bottom:20px}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:15px;background-color:#0003;border-radius:8px}.stat-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:300;color:var(--primary-color);margin-bottom:5px}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.data-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.import-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.import-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.about-content[_ngcontent-%COMP%]{text-align:center}.app-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1.3rem;color:var(--primary-color)}.app-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:var(--text-secondary)}.app-links[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;gap:20px;flex-wrap:wrap}.app-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.settings-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin:20px 0}@media (max-width: 768px){.setting-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.setting-item.toggle[_ngcontent-%COMP%]{flex-direction:row}.setting-label[_ngcontent-%COMP%]{margin-bottom:10px}mat-form-field[_ngcontent-%COMP%]{width:100%}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.data-actions[_ngcontent-%COMP%]{flex-direction:column}.data-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .import-wrapper[_ngcontent-%COMP%]{width:100%}.app-links[_ngcontent-%COMP%]{flex-direction:column;gap:15px}}"]})};export{J as SettingsComponent};

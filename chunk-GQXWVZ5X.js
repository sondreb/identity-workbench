import{a as Y,b as J}from"./chunk-7AOHD2UD.js";import{a as q,b as H}from"./chunk-ZQ646CWT.js";import{b as G}from"./chunk-CIH4AVPR.js";import{b as j,g as F,h as R,j as K,k as N,l as z,m as U}from"./chunk-IMAXPIZZ.js";import{B as W,D as L,u as T,z as A}from"./chunk-YHCOEZBY.js";import{h as P}from"./chunk-RG545CFP.js";import{Ad as k,Fb as b,Fd as O,Gb as n,Hb as _,Ib as w,Id as D,Kb as p,Kd as I,La as d,Lb as u,Ld as V,Mb as S,Md as B,Pa as h,Wa as y,pa as m,pb as t,qa as c,qb as e,tb as x,tc as E,vb as g}from"./chunk-GFOZWZLX.js";var Q=class v{constructor(s,l){this.storageService=s;this.snackBar=l}settings;appVersion="1.0.0";statCount={identities:0,credentials:0,totalStorage:"0 KB"};ngOnInit(){this.loadSettings(),this.calculateStats()}loadSettings(){this.settings=this.storageService.getSettings()}saveSettings(){this.storageService.saveSettings(this.settings),this.snackBar.open("Settings saved successfully","Close",{duration:3e3,panelClass:"success-snackbar"})}resetSettings(){confirm("Are you sure you want to reset all settings to default?")&&(this.settings=this.storageService.resetSettings(),this.snackBar.open("Settings reset to default","Close",{duration:3e3}))}calculateStats(){let s="identity-workbench-identities",l="identity-workbench-credentials",i=this.storageService.get(s)||[],r=this.storageService.get(l)||[],a=0,o=localStorage.getItem(this.storageService.SETTINGS_KEY);o&&(a+=o.length*2);let C=localStorage.getItem(s);C&&(a+=C.length*2);let M=localStorage.getItem(l);M&&(a+=M.length*2);let f;a<1024?f=`${a} B`:a<1024*1024?f=`${(a/1024).toFixed(1)} KB`:f=`${(a/(1024*1024)).toFixed(1)} MB`,this.statCount={identities:i.length,credentials:r.length,totalStorage:f}}importData(s){let l=s.target.files[0];if(!l)return;let i=new FileReader;i.onload=r=>{try{let a=JSON.parse(r.target?.result);if(!a||typeof a!="object")throw new Error("Invalid data format");this.storageService.importData(a),this.loadSettings(),this.calculateStats(),this.snackBar.open("Data imported successfully","Close",{duration:3e3,panelClass:"success-snackbar"})}catch(a){console.error("Import error:",a),this.snackBar.open("Failed to import data. Invalid format.","Close",{duration:3e3,panelClass:"error-snackbar"})}s.target.value=""},i.onerror=()=>{this.snackBar.open("Error reading file","Close",{duration:3e3,panelClass:"error-snackbar"})},i.readAsText(l)}exportAllData(){try{let s=this.storageService.getAllData(),l=JSON.stringify(s,null,2),i=new Blob([l],{type:"application/json"}),r=window.URL.createObjectURL(i),a=document.createElement("a"),o=new Date().toISOString().replace(/[:.]/g,"-");a.download=`identity-workbench-export-${o}.json`,a.href=r,document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a),this.snackBar.open("Data exported successfully","Close",{duration:3e3,panelClass:"success-snackbar"})}catch(s){console.error("Export error:",s),this.snackBar.open("Failed to export data","Close",{duration:3e3,panelClass:"error-snackbar"})}}clearAllData(){confirm("Are you sure you want to clear all data? This action cannot be undone.")&&(this.storageService.clear(),this.calculateStats(),this.snackBar.open("All data has been cleared","Close",{duration:3e3,panelClass:"success-snackbar"}))}applyTheme(s){this.settings.appearance.theme=s,this.saveSettings()}static \u0275fac=function(l){return new(l||v)(h(B),h(z))};static \u0275cmp=y({type:v,selectors:[["app-settings"]],decls:136,vars:9,consts:[["fileInput",""],[1,"page-container"],[1,"page-header"],[1,"primary-text"],[1,"settings-container"],[1,"settings-section","card"],[1,"section-header"],[1,"setting-item"],["appearance","outline"],[3,"ngModelChange","selectionChange","ngModel"],["value","dark"],["value","light"],["value","system"],[1,"setting-item","toggle"],[1,"setting-info"],[1,"setting-label"],[1,"setting-description"],["color","primary",3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],[1,"stats-grid"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"data-actions"],[1,"import-wrapper"],["mat-stroked-button","","color","primary",1,"import-btn",3,"click"],["type","file","accept",".json",2,"display","none",3,"change"],["mat-stroked-button","","color","primary",3,"click"],["mat-stroked-button","","color","warn",3,"click"],[1,"about-content"],[1,"app-info"],[1,"app-links"],["href","https://github.com/sondreb/identity-workbench","target","_blank",1,"app-link"],["href","#","target","_blank",1,"app-link"],[1,"settings-actions"],["mat-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(l,i){if(l&1){let r=x();t(0,"div",1)(1,"div",2)(2,"h1",3),n(3,"Settings"),e(),t(4,"p"),n(5,"Configure your Identity Workbench application"),e()(),t(6,"div",4)(7,"div",5)(8,"div",6)(9,"mat-icon"),n(10,"palette"),e(),t(11,"h2"),n(12,"Appearance"),e()(),t(13,"div",7)(14,"mat-form-field",8)(15,"mat-label"),n(16,"Select Theme"),e(),t(17,"mat-select",9),S("ngModelChange",function(o){return m(r),u(i.settings.appearance.theme,o)||(i.settings.appearance.theme=o),c(o)}),g("selectionChange",function(){return m(r),c(i.applyTheme(i.settings.appearance.theme))}),t(18,"mat-option",10),n(19,"Dark"),e(),t(20,"mat-option",11),n(21,"Light"),e(),t(22,"mat-option",12),n(23,"System Default"),e()()()()(),t(24,"div",5)(25,"div",6)(26,"mat-icon"),n(27,"shield"),e(),t(28,"h2"),n(29,"Privacy & Security"),e()(),t(30,"div",13)(31,"div",14)(32,"span",15),n(33,"Store Private Keys"),e(),t(34,"span",16),n(35,"Allow storage of private keys for signing operations"),e()(),t(36,"mat-slide-toggle",17),S("ngModelChange",function(o){return m(r),u(i.settings.privacy.storePrivateKeys,o)||(i.settings.privacy.storePrivateKeys=o),c(o)}),e()(),t(37,"div",13)(38,"div",14)(39,"span",15),n(40,"Auto Verify"),e(),t(41,"span",16),n(42,"Automatically verify credentials when imported"),e()(),t(43,"mat-slide-toggle",17),S("ngModelChange",function(o){return m(r),u(i.settings.privacy.autoVerify,o)||(i.settings.privacy.autoVerify=o),c(o)}),e()()(),t(44,"div",5)(45,"div",6)(46,"mat-icon"),n(47,"build"),e(),t(48,"h2"),n(49,"Advanced"),e()(),t(50,"div",7)(51,"span",15),n(52,"DID Resolver Endpoint"),e(),t(53,"mat-form-field",8)(54,"mat-label"),n(55,"Resolver URL"),e(),t(56,"input",18),S("ngModelChange",function(o){return m(r),u(i.settings.advanced.resolverEndpoint,o)||(i.settings.advanced.resolverEndpoint=o),c(o)}),e()()(),t(57,"div",13)(58,"div",14)(59,"span",15),n(60,"Debug Mode"),e(),t(61,"span",16),n(62,"Enable additional diagnostic information"),e()(),t(63,"mat-slide-toggle",17),S("ngModelChange",function(o){return m(r),u(i.settings.advanced.enableDebugMode,o)||(i.settings.advanced.enableDebugMode=o),c(o)}),e()()(),t(64,"div",5)(65,"div",6)(66,"mat-icon"),n(67,"storage"),e(),t(68,"h2"),n(69,"Data Management"),e()(),t(70,"div",19)(71,"div",20)(72,"span",21),n(73),e(),t(74,"span",22),n(75,"Identities"),e()(),t(76,"div",20)(77,"span",21),n(78),e(),t(79,"span",22),n(80,"Credentials"),e()(),t(81,"div",20)(82,"span",21),n(83),e(),t(84,"span",22),n(85,"Storage Used"),e()()(),t(86,"div",23)(87,"div",24)(88,"button",25),g("click",function(){m(r);let o=b(93);return c(o.click())}),t(89,"mat-icon"),n(90,"file_upload"),e(),n(91," Import Data "),e(),t(92,"input",26,0),g("change",function(o){return m(r),c(i.importData(o))}),e()(),t(94,"button",27),g("click",function(){return m(r),c(i.exportAllData())}),t(95,"mat-icon"),n(96,"file_download"),e(),n(97," Export Data "),e(),t(98,"button",28),g("click",function(){return m(r),c(i.clearAllData())}),t(99,"mat-icon"),n(100,"delete_forever"),e(),n(101," Clear All Data "),e()()(),t(102,"div",5)(103,"div",6)(104,"mat-icon"),n(105,"info"),e(),t(106,"h2"),n(107,"About"),e()(),t(108,"div",29)(109,"div",30)(110,"h3"),n(111,"Identity Workbench"),e(),t(112,"p"),n(113),e(),t(114,"p"),n(115,"A modern tool for managing DIDs and Verifiable Credentials"),e()(),t(116,"div",31)(117,"a",32)(118,"mat-icon"),n(119,"code"),e(),n(120," Source Code "),e(),t(121,"a",33)(122,"mat-icon"),n(123,"help_outline"),e(),n(124," Documentation "),e(),t(125,"a",33)(126,"mat-icon"),n(127,"bug_report"),e(),n(128," Report Issue "),e()()()(),t(129,"div",34)(130,"button",35),g("click",function(){return m(r),c(i.resetSettings())}),n(131," Reset to Default "),e(),t(132,"button",36),g("click",function(){return m(r),c(i.saveSettings())}),t(133,"mat-icon"),n(134,"save"),e(),n(135," Save Settings "),e()()()()}l&2&&(d(17),p("ngModel",i.settings.appearance.theme),d(19),p("ngModel",i.settings.privacy.storePrivateKeys),d(7),p("ngModel",i.settings.privacy.autoVerify),d(13),p("ngModel",i.settings.advanced.resolverEndpoint),d(7),p("ngModel",i.settings.advanced.enableDebugMode),d(10),_(i.statCount.identities),d(5),_(i.statCount.credentials),d(5),_(i.statCount.totalStorage),d(30),w("Version ",i.appVersion,""))},dependencies:[E,L,T,A,W,D,O,P,G,R,F,j,V,I,N,K,H,q,k,J,Y,U],styles:[".page-header[_ngcontent-%COMP%]{margin-bottom:30px}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:5px;color:var(--primary-color)}.page-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.settings-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.settings-section[_ngcontent-%COMP%]{margin-bottom:30px;padding:20px;background-color:var(--card-bg);border-radius:4px;box-shadow:0 2px 4px #00000024}.section-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:20px}.section-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px;color:var(--primary-color);margin-right:10px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:400}.setting-item[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;align-items:center}.setting-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.setting-item.toggle[_ngcontent-%COMP%]{justify-content:space-between}.setting-info[_ngcontent-%COMP%]{flex:1}.setting-label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500}.setting-description[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin-bottom:20px}.stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:15px;background-color:#0003;border-radius:8px}.stat-value[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:300;color:var(--primary-color);margin-bottom:5px}.stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary)}.data-actions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px}.import-wrapper[_ngcontent-%COMP%]{position:relative;overflow:hidden}.import-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.about-content[_ngcontent-%COMP%]{text-align:center}.app-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;font-size:1.3rem;color:var(--primary-color)}.app-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0;color:var(--text-secondary)}.app-links[_ngcontent-%COMP%]{margin-top:20px;display:flex;justify-content:center;gap:20px;flex-wrap:wrap}.app-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.settings-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin:20px 0}@media (max-width: 768px){.setting-item[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.setting-item.toggle[_ngcontent-%COMP%]{flex-direction:row}.setting-label[_ngcontent-%COMP%]{margin-bottom:10px}mat-form-field[_ngcontent-%COMP%]{width:100%}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.data-actions[_ngcontent-%COMP%]{flex-direction:column}.data-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .import-wrapper[_ngcontent-%COMP%]{width:100%}.app-links[_ngcontent-%COMP%]{flex-direction:column;gap:15px}}"]})};export{Q as SettingsComponent};

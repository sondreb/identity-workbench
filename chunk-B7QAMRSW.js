import{a as G,b as H,c as Q}from"./chunk-NGBCD6AJ.js";import{a as de}from"./chunk-N3LVYCQG.js";import{a as ce,b as se}from"./chunk-UDMAKDSC.js";import{a as q}from"./chunk-IFD266P3.js";import{A as le,p as te,u as ie,v as ne,x as oe,y as ae,z as re}from"./chunk-R3OSE4SY.js";import{h as X,m as Y,o as Z,q as ee}from"./chunk-UHRTGXCF.js";import{b as $}from"./chunk-XS3ALSKJ.js";import{h as z}from"./chunk-ITVYJ2AF.js";import{a as F,c as L,d as R}from"./chunk-X5YHJFSD.js";import{Ad as K,Bd as U,Fb as o,Gb as p,Hb as x,Jb as y,Ka as r,Kb as S,Lb as w,Nb as M,Oa as f,Qb as b,Rb as k,Sb as E,Va as O,Za as m,eb as v,gc as I,jb as s,kc as T,lc as V,mb as P,mc as B,nb as D,nc as N,oa as C,ob as n,pa as u,pb as i,qb as j,sb as h,ub as g,vb as d,vd as A,xd as W,yd as J}from"./chunk-AE43V2TS.js";var pe=t=>["/identity",t],Ce=t=>({"expired-date":t}),ue=(t,a)=>a.key;function _e(t,a){if(t&1){let e=h();n(0,"button",6),g("click",function(){C(e);let l=d(2);return u(l.revokeCredential())}),n(1,"mat-icon"),o(2,"cancel"),i(),o(3," Revoke "),i()}}function xe(t,a){if(t&1&&(n(0,"h1",12),o(1),i()),t&2){let e=d(2);r(),p(e.credential.name)}}function ge(t,a){if(t&1){let e=h();n(0,"mat-form-field",13)(1,"mat-label"),o(2,"Name"),i(),n(3,"input",34),w("ngModelChange",function(l){C(e);let _=d(2);return S(_.editedName,l)||(_.editedName=l),u(l)}),i()()}if(t&2){let e=d(2);r(3),y("ngModel",e.editedName)}}function fe(t,a){if(t&1&&(n(0,"p",22),o(1),i()),t&2){let e=d(2);r(),x(" ",e.credential.description||"No description provided"," ")}}function ve(t,a){if(t&1){let e=h();n(0,"mat-form-field",23)(1,"mat-label"),o(2,"Description"),i(),n(3,"textarea",35),w("ngModelChange",function(l){C(e);let _=d(2);return S(_.editedDescription,l)||(_.editedDescription=l),u(l)}),i()()}if(t&2){let e=d(2);r(3),y("ngModel",e.editedDescription)}}function he(t,a){if(t&1&&(n(0,"div",24)(1,"mat-icon"),o(2,"account_circle"),i(),n(3,"span"),o(4),i()()),t&2){let e=d(2);v("routerLink",M(2,pe,e.credential.issuer)),r(4),p(e.issuer.name)}}function be(t,a){if(t&1&&(n(0,"p",25),o(1),i()),t&2){let e=d(2);r(),x(" ",e.credential.issuer," ")}}function Me(t,a){if(t&1&&(n(0,"div",24)(1,"mat-icon"),o(2,"person"),i(),n(3,"span"),o(4),i()()),t&2){let e=d(3);v("routerLink",M(2,pe,e.credential.subject)),r(4),p(e.subject.name)}}function ye(t,a){if(t&1&&(n(0,"p",25),o(1),i()),t&2){let e=d(3);r(),x(" ",e.credential.subject," ")}}function Se(t,a){if(t&1&&(n(0,"div",21)(1,"h3"),o(2,"Subject"),i(),m(3,Me,5,4,"div",24)(4,ye,2,1,"p",25),i()),t&2){let e=d(2);r(3),s(e.subject?3:4)}}function we(t,a){if(t&1&&(n(0,"div",21)(1,"h3"),o(2,"Expiration Date"),i(),n(3,"p",36),o(4),b(5,"date"),i()()),t&2){let e=d(2);r(3),v("ngClass",M(5,Ce,e.getCredentialStatus()==="expired")),r(),x(" ",E(5,2,e.credential.expirationDate,"medium")," ")}}function ke(t,a){if(t&1){let e=h();n(0,"div",26)(1,"button",37),g("click",function(){C(e);let l=d(2);return u(l.saveChanges())}),n(2,"mat-icon"),o(3,"save"),i(),o(4," Save Changes "),i()()}}function Ee(t,a){if(t&1&&(n(0,"div",40)(1,"div",41),o(2),i(),n(3,"div",42),o(4),i()()),t&2){let e=d().$implicit;r(2),p(e.key),r(2),p(e.value)}}function Oe(t,a){if(t&1&&m(0,Ee,5,2,"div",40),t&2){let e=a.$implicit;s(e.key!=="id"?0:-1)}}function Pe(t,a){t&1&&(n(0,"div",39),o(1," No additional credential data available "),i())}function De(t,a){if(t&1&&(n(0,"div",28)(1,"h3"),o(2,"Credential Subject Data"),i(),n(3,"div",38),P(4,Oe,1,1,null,null,ue),b(6,"keyvalue"),i(),m(7,Pe,2,0,"div",39),i()),t&2){let e=d(2);r(4),D(k(6,1,e.credential.credentialSubject)),r(3),s(e.objectKeys(e.credential.credentialSubject).length<=1?7:-1)}}function je(t,a){if(t&1){let e=h();n(0,"div",0)(1,"div",2)(2,"a",3)(3,"mat-icon"),o(4,"arrow_back"),i(),o(5," Back to Credentials "),i(),n(6,"div",4)(7,"button",5),g("click",function(){C(e);let l=d();return u(l.downloadCredential())}),n(8,"mat-icon"),o(9,"download"),i(),o(10," Download "),i(),n(11,"button",5),g("click",function(){C(e);let l=d();return u(l.toggleEditMode())}),n(12,"mat-icon"),o(13),i(),o(14),i(),n(15,"button",6),g("click",function(){C(e);let l=d();return u(l.deleteCredential())}),n(16,"mat-icon"),o(17,"delete"),i(),o(18," Delete "),i(),m(19,_e,4,0,"button",7),i()(),n(20,"div",8)(21,"div",9)(22,"div",10)(23,"mat-icon"),o(24),i()(),n(25,"div",11),m(26,xe,2,1,"h1",12)(27,ge,4,1,"mat-form-field",13),n(28,"div",14),o(29),i(),n(30,"div",15),o(31),b(32,"titlecase"),i()()(),j(33,"mat-divider",16),n(34,"div",17)(35,"mat-tab-group",18)(36,"mat-tab",19)(37,"div",20)(38,"div",21)(39,"h3"),o(40,"Description"),i(),m(41,fe,2,1,"p",22)(42,ve,4,1,"mat-form-field",23),i(),n(43,"div",21)(44,"h3"),o(45,"Issuer"),i(),m(46,he,5,4,"div",24)(47,be,2,1,"p",25),i(),m(48,Se,5,1,"div",21),n(49,"div",21)(50,"h3"),o(51,"Issuance Date"),i(),n(52,"p"),o(53),b(54,"date"),i()(),m(55,we,6,7,"div",21)(56,ke,5,0,"div",26),i()(),n(57,"mat-tab",27)(58,"div",20),m(59,De,8,3,"div",28),i()(),n(60,"mat-tab",29)(61,"div",20)(62,"div",30)(63,"div",31)(64,"h3"),o(65,"Credential JSON"),i(),n(66,"button",32),g("click",function(){C(e);let l=d();return u(l.copyToClipboard(l.jsonView))}),n(67,"mat-icon"),o(68,"content_copy"),i()()(),n(69,"pre",33),o(70),i()()()()()()()()}if(t&2){let e=d();r(13),p(e.isEditMode?"close":"edit"),r(),x(" ",e.isEditMode?"Cancel":"Edit"," "),r(5),s(e.getCredentialStatus()==="valid"&&e.credential.issuer&&(e.issuer!=null&&e.issuer.privateKey)?19:-1),r(3),v("ngClass",e.getCredentialStatus()),r(2),x(" ",e.getCredentialStatus()==="valid"?"verified_user":e.getCredentialStatus()==="expired"?"schedule":"cancel"," "),r(2),s(e.isEditMode?27:26),r(3),p(e.credential.type),r(),v("ngClass",e.getCredentialStatus()),r(),x(" ",k(32,17,e.getCredentialStatus())," "),r(10),s(e.isEditMode?42:41),r(5),s(e.issuer?46:47),r(2),s(e.credential.subject?48:-1),r(5),p(E(54,19,e.credential.issuanceDate,"medium")),r(2),s(e.credential.expirationDate?55:-1),r(),s(e.isEditMode?56:-1),r(3),s(e.credential.credentialSubject?59:-1),r(11),p(e.jsonView)}}function Ie(t,a){t&1&&(n(0,"div",1)(1,"mat-icon"),o(2,"error_outline"),i(),n(3,"h2"),o(4,"Credential Not Found"),i(),n(5,"p"),o(6,"The requested credential could not be found."),i(),n(7,"button",43),o(8," Back to Credentials "),i()())}var me=class t{constructor(a,e,c,l,_){this.route=a;this.router=e;this.credentialService=c;this.identityService=l;this.snackBar=_}credential;issuer;subject;isEditMode=!1;editedName="";editedDescription="";jsonView="";ngOnInit(){this.route.params.subscribe(a=>{let e=a.id;this.loadCredential(e)})}loadCredential(a){if(this.credential=this.credentialService.getCredentialById(a),!this.credential){this.showError("Credential not found"),this.router.navigate(["/credentials"]);return}this.editedName=this.credential.name||"",this.editedDescription=this.credential.description||"",this.jsonView=JSON.stringify(this.credential.rawCredential,null,2),this.credential.issuer&&(this.issuer=this.identityService.getIdentityById(this.credential.issuer)),this.credential.subject&&(this.subject=this.identityService.getIdentityById(this.credential.subject))}toggleEditMode(){this.isEditMode=!this.isEditMode,!this.isEditMode&&this.credential&&(this.editedName=this.credential.name||"",this.editedDescription=this.credential.description||"")}saveChanges(){if(this.credential)try{this.credentialService.updateCredential(this.credential.id,{name:this.editedName,description:this.editedDescription}),this.isEditMode=!1,this.credential=this.credentialService.getCredentialById(this.credential.id),this.showSuccess("Credential information updated")}catch{this.showError("Failed to update credential")}}deleteCredential(){this.credential&&confirm(`Are you sure you want to delete the credential "${this.credential.name}"?`)&&(this.credentialService.deleteCredential(this.credential.id),this.router.navigate(["/credentials"]),this.showSuccess("Credential deleted"))}revokeCredential(){this.credential&&confirm(`Are you sure you want to revoke the credential "${this.credential.name}"?`)&&(this.credentialService.revokeCredential(this.credential.id),this.credential=this.credentialService.getCredentialById(this.credential.id),this.showSuccess("Credential revoked"))}getCredentialStatus(){return this.credential?this.credential.revoked?"revoked":this.credential.expirationDate&&new Date(this.credential.expirationDate)<new Date?"expired":"valid":""}copyToClipboard(a){navigator.clipboard.writeText(a).then(()=>this.showSuccess("Copied to clipboard"),()=>this.showError("Failed to copy"))}objectKeys(a){return Object.keys(a)}downloadCredential(){if(this.credential)try{let a=JSON.stringify(this.credential.rawCredential,null,2),e=new Blob([a],{type:"application/json"}),c=URL.createObjectURL(e),l=document.createElement("a");l.href=c;let _=`${this.credential.name||"credential"}-${this.credential.id}.json`;l.download=_,document.body.appendChild(l),l.click(),window.setTimeout(()=>{document.body.removeChild(l),URL.revokeObjectURL(c)},0),this.showSuccess("Credential download started")}catch(a){this.showError("Failed to download credential"),console.error("Download error:",a)}}showSuccess(a){this.snackBar.open(a,"Close",{duration:3e3,panelClass:"success-snackbar"})}showError(a){this.snackBar.open(a,"Close",{duration:5e3,panelClass:"error-snackbar"})}static \u0275fac=function(e){return new(e||t)(f(F),f(L),f(q),f($),f(re))};static \u0275cmp=O({type:t,selectors:[["app-credential-detail"]],decls:2,vars:1,consts:[[1,"page-container"],[1,"not-found"],[1,"page-header"],["routerLink","/credentials",1,"back-link"],[1,"header-actions"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"click"],["mat-button","","color","warn"],[1,"credential-container"],[1,"credential-header"],[1,"credential-icon",3,"ngClass"],[1,"credential-title"],[1,"neon-text"],["appearance","outline"],[1,"credential-type"],[1,"credential-status",3,"ngClass"],[1,"divider"],[1,"credential-content"],["dynamicHeight","","animationDuration","300ms"],["label","Details"],[1,"tab-content"],[1,"detail-section"],[1,"description"],["appearance","outline",1,"full-width"],[1,"identity-link",3,"routerLink"],[1,"identity-id"],[1,"action-buttons"],["label","Credential Data"],[1,"credential-subject"],["label","JSON"],[1,"json-container","neon-card"],[1,"json-header"],["mat-icon-button","",3,"click"],[1,"json-content"],["matInput","",3,"ngModelChange","ngModel"],["matInput","","rows","3",3,"ngModelChange","ngModel"],[3,"ngClass"],["mat-raised-button","","color","primary",3,"click"],[1,"subject-properties"],[1,"empty-subject"],[1,"subject-property"],[1,"property-key"],[1,"property-value"],["mat-raised-button","","color","primary","routerLink","/credentials"]],template:function(e,c){e&1&&m(0,je,71,22,"div",0)(1,Ie,9,0,"div",1),e&2&&s(c.credential?0:1)},dependencies:[N,I,T,V,B,R,ee,X,Y,Z,z,J,A,W,U,K,Q,G,H,ne,ie,te,ae,oe,le,se,ce,de],styles:[".page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.back-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:5px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:10px}.credential-container[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:8px;box-shadow:0 4px 8px #0003,0 0 15px #00c3ff33;border:1px solid rgba(0,195,255,.2);overflow:hidden}.credential-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px}.credential-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:60px;height:60px;border-radius:50%;margin-right:20px;background-color:#00c3ff1a}.credential-icon.valid[_ngcontent-%COMP%]{background-color:#00e6761a}.credential-icon.expired[_ngcontent-%COMP%]{background-color:#ffb3001a}.credential-icon.revoked[_ngcontent-%COMP%]{background-color:#ff40811a}.credential-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:30px;height:30px;width:30px;color:var(--primary-color)}.credential-icon.valid[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--success-color)}.credential-icon.expired[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--warning-color)}.credential-icon.revoked[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--error-color)}.credential-title[_ngcontent-%COMP%]{flex:1}.credential-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 5px}.credential-type[_ngcontent-%COMP%]{font-size:1rem;color:var(--text-secondary);margin-bottom:8px}.credential-status[_ngcontent-%COMP%]{display:inline-block;padding:4px 10px;border-radius:16px;font-size:.8rem;text-transform:uppercase;letter-spacing:.5px}.credential-status.valid[_ngcontent-%COMP%]{background-color:#00e6761a;color:var(--success-color)}.credential-status.expired[_ngcontent-%COMP%]{background-color:#ffb3001a;color:var(--warning-color)}.credential-status.revoked[_ngcontent-%COMP%]{background-color:#ff40811a;color:var(--error-color)}.divider[_ngcontent-%COMP%]{margin:0;border-top-color:#00c3ff1a}.credential-content[_ngcontent-%COMP%]{padding:0}.tab-content[_ngcontent-%COMP%]{padding:20px}.detail-section[_ngcontent-%COMP%]{margin-bottom:25px}.detail-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:8px;color:var(--text-secondary);font-size:1rem;font-weight:500}.detail-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.expired-date[_ngcontent-%COMP%]{color:var(--warning-color)}.identity-link[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px;border-radius:4px;background-color:#00c3ff0d;cursor:pointer;transition:all .2s ease;max-width:fit-content}.identity-link[_ngcontent-%COMP%]:hover{background-color:#00c3ff1a}.identity-link[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color);font-size:20px;height:20px;width:20px}.identity-id[_ngcontent-%COMP%]{font-family:monospace;word-break:break-all;background-color:#0003;padding:8px;border-radius:4px}.description[_ngcontent-%COMP%]{color:var(--text-color);line-height:1.5}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.full-width[_ngcontent-%COMP%]{width:100%}.credential-subject[_ngcontent-%COMP%]{margin-top:10px}.subject-properties[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:10px;margin-top:15px}.subject-property[_ngcontent-%COMP%]{background-color:#00c3ff0d;border-radius:4px;padding:10px}.property-key[_ngcontent-%COMP%]{font-weight:500;font-size:.9rem;margin-bottom:5px;color:var(--primary-color)}.property-value[_ngcontent-%COMP%]{word-break:break-all}.empty-subject[_ngcontent-%COMP%]{margin-top:20px;color:var(--text-secondary);font-style:italic;text-align:center}.json-container[_ngcontent-%COMP%]{background-color:#0003;border-radius:4px;padding:0;overflow:hidden}.json-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#00c3ff0d;border-bottom:1px solid rgba(0,195,255,.1)}.json-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0}.json-content[_ngcontent-%COMP%]{padding:15px;margin:0;white-space:pre-wrap;font-family:monospace;font-size:.9rem;color:var(--text-color);overflow-x:auto}.not-found[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;padding:100px 0}.not-found[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:5rem;height:5rem;width:5rem;margin-bottom:20px;color:var(--error-color)}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.header-actions[_ngcontent-%COMP%]{margin-top:15px}.credential-header[_ngcontent-%COMP%]{flex-direction:column;text-align:center}.credential-icon[_ngcontent-%COMP%]{margin-right:0;margin-bottom:15px}}"]})};export{me as CredentialDetailComponent};

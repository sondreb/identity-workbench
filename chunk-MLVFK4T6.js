import{a as ts,b as ns}from"./chunk-CDZOBJWS.js";import{a as Zo}from"./chunk-X2FLUBUD.js";import{a as rs}from"./chunk-RB7ORFQ3.js";import{a as Qo,b as es}from"./chunk-SWAWC44T.js";import{a as Oo}from"./chunk-LFRT5SUB.js";import{b as jo,c as Ko,d as Ho,f as or,g as Wo,h as zo,i as qo,j as $o,k as Jo,l as Xo,m as Go}from"./chunk-QKM7KKRN.js";import{B as Fo,D as Uo,E as Yo,d as To,e as nr,f as Qr,g as ei,j as ti,k as Po,l as rr,o as Ro,p as lt,s as ir,t as ar,u as Bo,v as Vo,w as No,z as Lo}from"./chunk-2N6EGSYQ.js";import{A as er,B as wo,C as Co,D as tr,E as xo,F as Eo,G as Ao,H as So,I as ko,J as Io,K as Mo,h as fo,i as _o,j as go,k as ll,l as Jr,m as Gn,n as yo,o as Wt,p as bo,q as vo,r as je,s as Dn,t as Xr,u as Gr,v as Zn,w as Zr,x as Qn,y as zt,z as Do}from"./chunk-2YHW6EC6.js";import{c as $a,d as Ja}from"./chunk-7BHHVVNY.js";import{$ as Ta,$a as me,$b as Ee,Aa as ln,Ab as _n,Ad as lo,Bb as Pe,Bd as Jn,Ca as wt,Cb as ye,Cc as zn,Cd as uo,D as st,Db as be,Dd as ho,Ea as Fa,Ed as $r,F as on,Ga as Yn,Gb as zr,Gd as bn,Hb as x,Ib as ke,Ic as Xa,Id as vn,Ja as dn,Jb as jt,Jc as Ga,Kb as xt,Kd as Xn,L as Nn,Lb as Ie,Lc as ct,Ma as A,Mb as Me,Mc as gn,Md as po,N as Oa,Na as Hr,Nb as Oe,Nc as qn,Nd as mo,Ob as Et,Oc as Ye,Pa as un,Qa as hn,Ra as Ua,Sa as jn,Tb as Ka,Uc as Za,Vb as Ha,X as Ut,Xa as Ce,Xc as Qa,Y as Ln,Ya as Kn,Yc as eo,Za as Ct,Zc as qr,_a as Wr,_b as Re,_c as $n,a as N,ad as to,b as pe,ba as sn,ca as Fn,d as cl,da as Un,e as De,ed as no,f as Sa,fa as Yt,fb as _e,g as ka,gb as $,h as we,ha as Pa,hb as Hn,hc as Wn,hd as ro,ia as D,ib as ue,id as io,j as Yr,ja as Ra,jb as fn,jd as Kt,ka as Ba,kd as At,lb as xe,m as ze,ma as Va,mb as Ya,md as yn,nc as Wa,oa as Ge,ob as Ze,od as Be,pa as W,pb as Qe,pd as Ht,q as Ft,qa as z,qb as u,qd as ao,ra as cn,rb as h,sa as jr,sb as ge,sc as za,sd as oo,ta as Na,u as Ia,ub as Ue,uc as qa,va as Kr,vb as ja,wa as La,wb as Z,xb as U,yb as pn,yd as so,z as Ma,za as K,zb as mn,zd as co}from"./chunk-ONE5RFGK.js";var Cc=cl((V_,wc)=>{"use strict";wc.exports=function t(n){if(typeof n=="number"&&isNaN(n))throw new Error("NaN is not allowed");if(typeof n=="number"&&!isFinite(n))throw new Error("Infinity is not allowed");return n===null||typeof n!="object"?JSON.stringify(n):n.toJSON instanceof Function?t(n.toJSON()):Array.isArray(n)?`[${n.reduce((i,a,o)=>`${i}${o===0?"":","}${t(a===void 0||typeof a=="symbol"?null:a)}`,"")}]`:`{${Object.keys(n).sort().reduce((r,i)=>{if(n[i]===void 0||typeof n[i]=="symbol")return r;let a=r.length===0?"":",";return`${r}${a}${t(i)}:${t(n[i])}`},"")}}`}});var ul=["mat-calendar-body",""];function hl(t,n){return this._trackRow(n)}var us=(t,n)=>n.id;function fl(t,n){if(t&1&&(u(0,"tr",0)(1,"td",3),x(2),h()()),t&2){let e=U();A(),Hn("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),_e("colspan",e.numCols),A(),jt(" ",e.label," ")}}function pl(t,n){if(t&1&&(u(0,"td",3),x(1),h()),t&2){let e=U(2);Hn("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),_e("colspan",e._firstRowOffset),A(),jt(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function ml(t,n){if(t&1){let e=Ue();u(0,"td",6)(1,"button",7),Z("click",function(i){let a=W(e).$implicit,o=U(2);return z(o._cellClicked(a,i))})("focus",function(i){let a=W(e).$implicit,o=U(2);return z(o._emitActiveDateChange(a,i))}),u(2,"span",8),x(3),h(),ge(4,"span",9),h()()}if(t&2){let e=n.$implicit,r=n.$index,i=U().$index,a=U();Hn("width",a._cellWidth)("padding-top",a._cellPadding)("padding-bottom",a._cellPadding),_e("data-mat-row",i)("data-mat-col",r),A(),ue("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",a._isActiveCell(i,r))("mat-calendar-body-range-start",a._isRangeStart(e.compareValue))("mat-calendar-body-range-end",a._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",a._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",a._isComparisonBridgeStart(e.compareValue,i,r))("mat-calendar-body-comparison-bridge-end",a._isComparisonBridgeEnd(e.compareValue,i,r))("mat-calendar-body-comparison-start",a._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",a._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",a._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",a._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",a._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",a._isInPreview(e.compareValue)),$("ngClass",e.cssClasses)("tabindex",a._isActiveCell(i,r)?0:-1),_e("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",a._isSelected(e.compareValue))("aria-current",a.todayValue===e.compareValue?"date":null)("aria-describedby",a._getDescribedby(e.compareValue)),A(),ue("mat-calendar-body-selected",a._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",a._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",a.todayValue===e.compareValue),A(),jt(" ",e.displayValue," ")}}function _l(t,n){if(t&1&&(u(0,"tr",1),me(1,pl,2,6,"td",4),Ze(2,ml,5,48,"td",5,us),h()),t&2){let e=n.$implicit,r=n.$index,i=U();A(),xe(r===0&&i._firstRowOffset?1:-1),A(),Qe(e)}}function gl(t,n){if(t&1&&(u(0,"th",2)(1,"span",6),x(2),h(),u(3,"span",3),x(4),h()()),t&2){let e=n.$implicit;A(2),ke(e.long),A(2),ke(e.narrow)}}var yl=["*"];function bl(t,n){}function vl(t,n){if(t&1){let e=Ue();u(0,"mat-month-view",4),Oe("activeDateChange",function(i){W(e);let a=U();return Me(a.activeDate,i)||(a.activeDate=i),z(i)}),Z("_userSelection",function(i){W(e);let a=U();return z(a._dateSelected(i))})("dragStarted",function(i){W(e);let a=U();return z(a._dragStarted(i))})("dragEnded",function(i){W(e);let a=U();return z(a._dragEnded(i))}),h()}if(t&2){let e=U();Ie("activeDate",e.activeDate),$("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function Dl(t,n){if(t&1){let e=Ue();u(0,"mat-year-view",5),Oe("activeDateChange",function(i){W(e);let a=U();return Me(a.activeDate,i)||(a.activeDate=i),z(i)}),Z("monthSelected",function(i){W(e);let a=U();return z(a._monthSelectedInYearView(i))})("selectedChange",function(i){W(e);let a=U();return z(a._goToDateInView(i,"month"))}),h()}if(t&2){let e=U();Ie("activeDate",e.activeDate),$("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function wl(t,n){if(t&1){let e=Ue();u(0,"mat-multi-year-view",6),Oe("activeDateChange",function(i){W(e);let a=U();return Me(a.activeDate,i)||(a.activeDate=i),z(i)}),Z("yearSelected",function(i){W(e);let a=U();return z(a._yearSelectedInMultiYearView(i))})("selectedChange",function(i){W(e);let a=U();return z(a._goToDateInView(i,"year"))}),h()}if(t&2){let e=U();Ie("activeDate",e.activeDate),$("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function Cl(t,n){}var xl=["button"],El=[[["","matDatepickerToggleIcon",""]]],Al=["[matDatepickerToggleIcon]"];function Sl(t,n){t&1&&(cn(),u(0,"svg",2),ge(1,"path",3),h())}var Xt=(()=>{class t{changes=new ze;calendarLabel="Calendar";openCalendarLabel="Open calendar";closeCalendarLabel="Close calendar";prevMonthLabel="Previous month";nextMonthLabel="Next month";prevYearLabel="Previous year";nextYearLabel="Next year";prevMultiYearLabel="Previous 24 years";nextMultiYearLabel="Next 24 years";switchToMonthViewLabel="Choose date";switchToMultiYearViewLabel="Choose month and year";startDateLabel="Start date";endDateLabel="End date";comparisonDateLabel="Comparison range";formatYearRange(e,r){return`${e} \u2013 ${r}`}formatYearRangeLabel(e,r){return`${e} to ${r}`}static \u0275fac=function(r){return new(r||t)};static \u0275prov=Fn({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kl=0,Cn=class{value;displayValue;ariaLabel;enabled;cssClasses;compareValue;rawValue;id=kl++;constructor(n,e,r,i,a={},o=n,s){this.value=n,this.displayValue=e,this.ariaLabel=r,this.enabled=i,this.cssClasses=a,this.compareValue=o,this.rawValue=s}},Il={passive:!1,capture:!0},sr={passive:!0,capture:!0},is={passive:!0},Jt=(()=>{class t{_elementRef=D(wt);_ngZone=D(ln);_platform=D(zn);_intl=D(Xt);_eventCleanups;_skipNextFocus;_focusActiveCellAfterViewChecked=!1;label;rows;todayValue;startValue;endValue;labelMinRequiredCells;numCols=7;activeCell=0;ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}isRange=!1;cellAspectRatio=1;comparisonStart;comparisonEnd;previewStart=null;previewEnd=null;startDateAccessibleName;endDateAccessibleName;selectedValueChange=new K;previewChange=new K;activeDateChange=new K;dragStarted=new K;dragEnded=new K;_firstRowOffset;_cellPadding;_cellWidth;_startDateLabelId;_endDateLabelId;_comparisonStartDateLabelId;_comparisonEndDateLabelId;_didDragSinceMouseDown=!1;_injector=D(Kr);comparisonDateAccessibleName=this._intl.comparisonDateLabel;_trackRow=e=>e;constructor(){let e=D(un),r=D(Kt);this._startDateLabelId=r.getId("mat-calendar-body-start-"),this._endDateLabelId=r.getId("mat-calendar-body-end-"),this._comparisonStartDateLabelId=r.getId("mat-calendar-body-comparison-start-"),this._comparisonEndDateLabelId=r.getId("mat-calendar-body-comparison-end-"),D(gn).load(oo),this._ngZone.runOutsideAngular(()=>{let i=this._elementRef.nativeElement,a=[ct(e,i,"touchmove",this._touchmoveHandler,Il),ct(e,i,"mouseenter",this._enterHandler,sr),ct(e,i,"focus",this._enterHandler,sr),ct(e,i,"mouseleave",this._leaveHandler,sr),ct(e,i,"blur",this._leaveHandler,sr),ct(e,i,"mousedown",this._mousedownHandler,is),ct(e,i,"touchstart",this._mousedownHandler,is)];this._platform.isBrowser&&a.push(e.listen("window","mouseup",this._mouseupHandler),e.listen("window","touchend",this._touchendHandler)),this._eventCleanups=a})}_cellClicked(e,r){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:r})}_emitActiveDateChange(e,r){e.enabled&&this.activeDateChange.emit({value:e.value,event:r})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){let r=e.numCols,{rows:i,numCols:a}=this;(e.rows||r)&&(this._firstRowOffset=i&&i.length&&i[0].length?a-i[0].length:0),(e.cellAspectRatio||r||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/a}%`),(r||!this._cellWidth)&&(this._cellWidth=`${100/a}%`)}ngOnDestroy(){this._eventCleanups.forEach(e=>e())}_isActiveCell(e,r){let i=e*this.numCols+r;return e&&(i-=this._firstRowOffset),i==this.activeCell}_focusActiveCell(e=!0){dn(()=>{setTimeout(()=>{let r=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");r&&(e||(this._skipNextFocus=!0),r.focus())})},{injector:this._injector})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return ii(e,this.startValue,this.endValue)}_isRangeEnd(e){return ai(e,this.startValue,this.endValue)}_isInRange(e){return oi(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return ii(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,r,i){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let a=this.rows[r][i-1];if(!a){let o=this.rows[r-1];a=o&&o[o.length-1]}return a&&!this._isRangeEnd(a.compareValue)}_isComparisonBridgeEnd(e,r,i){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let a=this.rows[r][i+1];if(!a){let o=this.rows[r+1];a=o&&o[0]}return a&&!this._isRangeStart(a.compareValue)}_isComparisonEnd(e){return ai(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return oi(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return ii(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return ai(e,this.previewStart,this.previewEnd)}_isInPreview(e){return oi(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){if(!this.isRange)return null;if(this.startValue===e&&this.endValue===e)return`${this._startDateLabelId} ${this._endDateLabelId}`;if(this.startValue===e)return this._startDateLabelId;if(this.endValue===e)return this._endDateLabelId;if(this.comparisonStart!==null&&this.comparisonEnd!==null){if(e===this.comparisonStart&&e===this.comparisonEnd)return`${this._comparisonStartDateLabelId} ${this._comparisonEndDateLabelId}`;if(e===this.comparisonStart)return this._comparisonStartDateLabelId;if(e===this.comparisonEnd)return this._comparisonEndDateLabelId}return null}_enterHandler=e=>{if(this._skipNextFocus&&e.type==="focus"){this._skipNextFocus=!1;return}if(e.target&&this.isRange){let r=this._getCellFromElement(e.target);r&&this._ngZone.run(()=>this.previewChange.emit({value:r.enabled?r:null,event:e}))}};_touchmoveHandler=e=>{if(!this.isRange)return;let r=as(e),i=r?this._getCellFromElement(r):null;r!==e.target&&(this._didDragSinceMouseDown=!0),ri(e.target)&&e.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:i?.enabled?i:null,event:e}))};_leaveHandler=e=>{this.previewEnd!==null&&this.isRange&&(e.type!=="blur"&&(this._didDragSinceMouseDown=!0),e.target&&this._getCellFromElement(e.target)&&!(e.relatedTarget&&this._getCellFromElement(e.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:e})))};_mousedownHandler=e=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let r=e.target&&this._getCellFromElement(e.target);!r||!this._isInRange(r.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:r.rawValue,event:e})})};_mouseupHandler=e=>{if(!this.isRange)return;let r=ri(e.target);if(!r){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:e})});return}r.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let i=this._getCellFromElement(r);this.dragEnded.emit({value:i?.rawValue??null,event:e})})};_touchendHandler=e=>{let r=as(e);r&&this._mouseupHandler({target:r})};_getCellFromElement(e){let r=ri(e);if(r){let i=r.getAttribute("data-mat-row"),a=r.getAttribute("data-mat-col");if(i&&a)return this.rows[parseInt(i)][parseInt(a)]}return null}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ce({type:t,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],features:[Ge],attrs:ul,decls:11,vars:11,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(r,i){r&1&&(me(0,fl,3,6,"tr",0),Ze(1,_l,4,1,"tr",1,hl,!0),u(3,"span",2),x(4),h(),u(5,"span",2),x(6),h(),u(7,"span",2),x(8),h(),u(9,"span",2),x(10),h()),r&2&&(xe(i._firstRowOffset<i.labelMinRequiredCells?0:-1),A(),Qe(i.rows),A(2),$("id",i._startDateLabelId),A(),jt(" ",i.startDateAccessibleName,`
`),A(),$("id",i._endDateLabelId),A(),jt(" ",i.endDateAccessibleName,`
`),A(),$("id",i._comparisonStartDateLabelId),A(),xt(" ",i.comparisonDateAccessibleName," ",i.startDateAccessibleName,`
`),A(),$("id",i._comparisonEndDateLabelId),A(),xt(" ",i.comparisonDateAccessibleName," ",i.endDateAccessibleName,`
`))},dependencies:[Wa],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color, var(--mat-sys-primary))}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-body-label-text-weight, var(--mat-sys-title-small-weight));color:var(--mat-datepicker-calendar-body-label-text-color, var(--mat-sys-on-surface))}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size));-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-calendar-body-disabled{opacity:.5}}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color, var(--mat-sys-on-surface));border-color:var(--mat-datepicker-calendar-date-outline-color, transparent)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}@media(forced-colors: active){.mat-calendar-body-cell-content{border:none}}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color, var(--mat-sys-primary));color:var(--mat-datepicker-calendar-date-selected-state-text-color, var(--mat-sys-on-primary))}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color, var(--mat-sys-primary))}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container))}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color, var(--mat-sys-primary-container)) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color, var(--mat-sys-tertiary-container)) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color, var(--mat-sys-secondary-container))}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color, var(--mat-sys-secondary))}@media(forced-colors: active){.mat-datepicker-popup:not(:empty),.mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.mat-calendar-body-today{outline:dotted 1px}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-selected{background:none}.mat-calendar-body-in-range::before,.mat-calendar-body-comparison-bridge-start::before,.mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}}'],encapsulation:2,changeDetection:0})}return t})();function ni(t){return t?.nodeName==="TD"}function ri(t){let n;return ni(t)?n=t:ni(t.parentNode)?n=t.parentNode:ni(t.parentNode?.parentNode)&&(n=t.parentNode.parentNode),n?.getAttribute("data-mat-row")!=null?n:null}function ii(t,n,e){return e!==null&&n!==e&&t<e&&t===n}function ai(t,n,e){return n!==null&&n!==e&&t>=n&&t===e}function oi(t,n,e,r){return r&&n!==null&&e!==null&&n!==e&&t>=n&&t<=e}function as(t){let n=t.changedTouches[0];return document.elementFromPoint(n.clientX,n.clientY)}var Ve=class{start;end;_disableStructuralEquivalency;constructor(n,e){this.start=n,this.end=e}},xn=(()=>{class t{selection;_adapter;_selectionChanged=new ze;selectionChanged=this._selectionChanged;constructor(e,r){this.selection=e,this._adapter=r,this.selection=e}updateSelection(e,r){let i=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:r,oldValue:i})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static \u0275fac=function(r){Ua()};static \u0275prov=Fn({token:t,factory:t.\u0275fac})}return t})(),Ml=(()=>{class t extends xn{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new t(this._adapter);return e.updateSelection(this.selection,this),e}static \u0275fac=function(r){return new(r||t)(Pa(Be))};static \u0275prov=Fn({token:t,factory:t.\u0275fac})}return t})();function Ol(t,n){return t||new Ml(n)}var hs={provide:xn,deps:[[new Ra,new Ba,xn],Be],useFactory:Ol};var fs=new Yt("MAT_DATE_RANGE_SELECTION_STRATEGY");var si=7,Tl=0,os=(()=>{class t{_changeDetectorRef=D(Re);_dateFormats=D(Ht,{optional:!0});_dateAdapter=D(Be,{optional:!0});_dir=D(At,{optional:!0});_rangeStrategy=D(fs,{optional:!0});_rerenderSubscription=we.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let r=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),this._hasSameMonthAndYear(r,this._activeDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof Ve?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;activeDrag=null;selectedChange=new K;_userSelection=new K;dragStarted=new K;dragEnded=new K;activeDateChange=new K;_matCalendarBody;_monthLabel;_weeks;_firstWeekOffset;_rangeStart;_rangeEnd;_comparisonRangeStart;_comparisonRangeEnd;_previewStart;_previewEnd;_isRange;_todayDate;_weekdays;constructor(){D(gn).load(qn),this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Ut(null)).subscribe(()=>this._init())}ngOnChanges(e){let r=e.comparisonStart||e.comparisonEnd;r&&!r.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){let r=e.value,i=this._getDateFromDayOfMonth(r),a,o;this._selected instanceof Ve?(a=this._getDateInCurrentMonth(this._selected.start),o=this._getDateInCurrentMonth(this._selected.end)):a=o=this._getDateInCurrentMonth(this._selected),(a!==r||o!==r)&&this.selectedChange.emit(i),this._userSelection.emit({value:i,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){let r=e.value,i=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(r),this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){let r=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&e.preventDefault();return;case 27:this._previewEnd!=null&&!Ye(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation());return;default:return}this._dateAdapter.compareDate(r,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(si+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%si,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:r}){if(this._rangeStrategy){let i=r?r.rawValue:null,a=this._rangeStrategy.createPreview(i,this.selected,e);if(this._previewStart=this._getCellCompareValue(a.start),this._previewEnd=this._getCellCompareValue(a.end),this.activeDrag&&i){let o=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,i,e);o&&(this._previewStart=this._getCellCompareValue(o.start),this._previewEnd=this._getCellCompareValue(o.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){let r=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:r??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){let e=this._dateAdapter.getFirstDayOfWeek(),r=this._dateAdapter.getDayOfWeekNames("narrow"),a=this._dateAdapter.getDayOfWeekNames("long").map((o,s)=>({long:o,narrow:r[s],id:Tl++}));this._weekdays=a.slice(e).concat(a.slice(0,e))}_createWeekCells(){let e=this._dateAdapter.getNumDaysInMonth(this.activeDate),r=this._dateAdapter.getDateNames();this._weeks=[[]];for(let i=0,a=this._firstWeekOffset;i<e;i++,a++){a==si&&(this._weeks.push([]),a=0);let o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),i+1),s=this._shouldEnableDate(o),c=this._dateAdapter.format(o,this._dateFormats.display.dateA11yLabel),d=this.dateClass?this.dateClass(o,"month"):void 0;this._weeks[this._weeks.length-1].push(new Cn(i+1,r[i],c,s,d,this._getCellCompareValue(o),o))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,r){return!!(e&&r&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(r)&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(r))}_getCellCompareValue(e){if(e){let r=this._dateAdapter.getYear(e),i=this._dateAdapter.getMonth(e),a=this._dateAdapter.getDate(e);return new Date(r,i,a).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(e){e instanceof Ve?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ce({type:t,selectors:[["mat-month-view"]],viewQuery:function(r,i){if(r&1&&Pe(Jt,5),r&2){let a;ye(a=be())&&(i._matCalendarBody=a.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],features:[Ge],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(r,i){r&1&&(u(0,"table",0)(1,"thead",1)(2,"tr"),Ze(3,gl,5,2,"th",2,us),h(),u(5,"tr",3),ge(6,"th",4),h()(),u(7,"tbody",5),Z("selectedValueChange",function(o){return i._dateSelected(o)})("activeDateChange",function(o){return i._updateActiveDate(o)})("previewChange",function(o){return i._previewChanged(o)})("dragStarted",function(o){return i.dragStarted.emit(o)})("dragEnded",function(o){return i._dragEnded(o)})("keyup",function(o){return i._handleCalendarBodyKeyup(o)})("keydown",function(o){return i._handleCalendarBodyKeydown(o)}),h()()),r&2&&(A(3),Qe(i._weekdays),A(4),$("label",i._monthLabel)("rows",i._weeks)("todayValue",i._todayDate)("startValue",i._rangeStart)("endValue",i._rangeEnd)("comparisonStart",i._comparisonRangeStart)("comparisonEnd",i._comparisonRangeEnd)("previewStart",i._previewStart)("previewEnd",i._previewEnd)("isRange",i._isRange)("labelMinRequiredCells",3)("activeCell",i._dateAdapter.getDate(i.activeDate)-1)("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName))},dependencies:[Jt],encapsulation:2,changeDetection:0})}return t})(),Te=24,ci=4,ss=(()=>{class t{_changeDetectorRef=D(Re);_dateAdapter=D(Be,{optional:!0});_dir=D(At,{optional:!0});_rerenderSubscription=we.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let r=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),ps(this._dateAdapter,r,this._activeDate,this.minDate,this.maxDate)||this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof Ve?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new K;yearSelected=new K;activeDateChange=new K;_matCalendarBody;_years;_todayYear;_selectedYear;constructor(){this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Ut(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());let r=this._dateAdapter.getYear(this._activeDate)-wn(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let i=0,a=[];i<Te;i++)a.push(r+i),a.length==ci&&(this._years.push(a.map(o=>this._createCellForYear(o))),a=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){let r=e.value,i=this._dateAdapter.createDate(r,0,1),a=this._getDateFromYear(r);this.yearSelected.emit(i),this.selectedChange.emit(a)}_updateActiveDate(e){let r=e.value,i=this._activeDate;this.activeDate=this._getDateFromYear(r),this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let r=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-ci);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,ci);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-wn(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,Te-wn(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-Te*10:-Te);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?Te*10:Te);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return wn(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){let r=this._dateAdapter.getMonth(this.activeDate),i=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,r,1));return this._dateAdapter.createDate(e,r,Math.min(this._dateAdapter.getDate(this.activeDate),i))}_createCellForYear(e){let r=this._dateAdapter.createDate(e,0,1),i=this._dateAdapter.getYearName(r),a=this.dateClass?this.dateClass(r,"multi-year"):void 0;return new Cn(e,i,i,this._shouldEnableYear(e),a)}_shouldEnableYear(e){if(e==null||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let r=this._dateAdapter.createDate(e,0,1);for(let i=r;this._dateAdapter.getYear(i)==e;i=this._dateAdapter.addCalendarDays(i,1))if(this.dateFilter(i))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(e){if(this._selectedYear=null,e instanceof Ve){let r=e.start||e.end;r&&(this._selectedYear=this._dateAdapter.getYear(r))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ce({type:t,selectors:[["mat-multi-year-view"]],viewQuery:function(r,i){if(r&1&&Pe(Jt,5),r&2){let a;ye(a=be())&&(i._matCalendarBody=a.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(r,i){r&1&&(u(0,"table",0)(1,"thead",1)(2,"tr"),ge(3,"th",2),h()(),u(4,"tbody",3),Z("selectedValueChange",function(o){return i._yearSelected(o)})("activeDateChange",function(o){return i._updateActiveDate(o)})("keyup",function(o){return i._handleCalendarBodyKeyup(o)})("keydown",function(o){return i._handleCalendarBodyKeydown(o)}),h()()),r&2&&(A(4),$("rows",i._years)("todayValue",i._todayYear)("startValue",i._selectedYear)("endValue",i._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._getActiveCell()))},dependencies:[Jt],encapsulation:2,changeDetection:0})}return t})();function ps(t,n,e,r,i){let a=t.getYear(n),o=t.getYear(e),s=ms(t,r,i);return Math.floor((a-s)/Te)===Math.floor((o-s)/Te)}function wn(t,n,e,r){let i=t.getYear(n);return Pl(i-ms(t,e,r),Te)}function ms(t,n,e){let r=0;return e?r=t.getYear(e)-Te+1:n&&(r=t.getYear(n)),r}function Pl(t,n){return(t%n+n)%n}var cs=(()=>{class t{_changeDetectorRef=D(Re);_dateFormats=D(Ht,{optional:!0});_dateAdapter=D(Be,{optional:!0});_dir=D(At,{optional:!0});_rerenderSubscription=we.EMPTY;_selectionKeyPressed;get activeDate(){return this._activeDate}set activeDate(e){let r=this._activeDate,i=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(i,this.minDate,this.maxDate),this._dateAdapter.getYear(r)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}_activeDate;get selected(){return this._selected}set selected(e){e instanceof Ve?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;selectedChange=new K;monthSelected=new K;activeDateChange=new K;_matCalendarBody;_months;_yearLabel;_todayMonth;_selectedMonth;constructor(){this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Ut(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){let r=e.value,i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),r,1);this.monthSelected.emit(i);let a=this._getDateFromMonth(r);this.selectedChange.emit(a)}_updateActiveDate(e){let r=e.value,i=this._activeDate;this.activeDate=this._getDateFromMonth(r),this._dateAdapter.compareDate(i,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let r=this._activeDate,i=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,i?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,i?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(r,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(r=>r.map(i=>this._createCellForMonth(i,e[i]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){let r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),i=this._dateAdapter.getNumDaysInMonth(r);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),i))}_createCellForMonth(e,r){let i=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),a=this._dateAdapter.format(i,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(i,"year"):void 0;return new Cn(e,r.toLocaleUpperCase(),a,this._shouldEnableMonth(e),o)}_shouldEnableMonth(e){let r=this._dateAdapter.getYear(this.activeDate);if(e==null||this._isYearAndMonthAfterMaxDate(r,e)||this._isYearAndMonthBeforeMinDate(r,e))return!1;if(!this.dateFilter)return!0;let i=this._dateAdapter.createDate(r,e,1);for(let a=i;this._dateAdapter.getMonth(a)==e;a=this._dateAdapter.addCalendarDays(a,1))if(this.dateFilter(a))return!0;return!1}_isYearAndMonthAfterMaxDate(e,r){if(this.maxDate){let i=this._dateAdapter.getYear(this.maxDate),a=this._dateAdapter.getMonth(this.maxDate);return e>i||e===i&&r>a}return!1}_isYearAndMonthBeforeMinDate(e,r){if(this.minDate){let i=this._dateAdapter.getYear(this.minDate),a=this._dateAdapter.getMonth(this.minDate);return e<i||e===i&&r<a}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(e){e instanceof Ve?this._selectedMonth=this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._selectedMonth=this._getMonthInCurrentYear(e)}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ce({type:t,selectors:[["mat-year-view"]],viewQuery:function(r,i){if(r&1&&Pe(Jt,5),r&2){let a;ye(a=be())&&(i._matCalendarBody=a.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(r,i){r&1&&(u(0,"table",0)(1,"thead",1)(2,"tr"),ge(3,"th",2),h()(),u(4,"tbody",3),Z("selectedValueChange",function(o){return i._monthSelected(o)})("activeDateChange",function(o){return i._updateActiveDate(o)})("keyup",function(o){return i._handleCalendarBodyKeyup(o)})("keydown",function(o){return i._handleCalendarBodyKeydown(o)}),h()()),r&2&&(A(4),$("label",i._yearLabel)("rows",i._months)("todayValue",i._todayMonth)("startValue",i._selectedMonth)("endValue",i._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",i._dateAdapter.getMonth(i.activeDate)))},dependencies:[Jt],encapsulation:2,changeDetection:0})}return t})(),_s=(()=>{class t{_intl=D(Xt);calendar=D(li);_dateAdapter=D(Be,{optional:!0});_dateFormats=D(Ht,{optional:!0});constructor(){D(gn).load(qn);let e=D(Re);this.calendar.stateChanges.subscribe(()=>e.markForCheck())}get periodButtonText(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return this.calendar.currentView=="month"?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-Te)}nextClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:Te)}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,r){return this.calendar.currentView=="month"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(r)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(r):this.calendar.currentView=="year"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(r):ps(this._dateAdapter,e,r,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let r=this._dateAdapter.getYear(this.calendar.activeDate)-wn(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),i=r+Te-1,a=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1)),o=this._dateAdapter.getYearName(this._dateAdapter.createDate(i,0,1));return[a,o]}_periodButtonLabelId=D(Kt).getId("mat-calendar-period-label-");static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ce({type:t,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],ngContentSelectors:yl,decls:17,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],["aria-live","polite",1,"cdk-visually-hidden",3,"id"],["mat-button","","type","button",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"click","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"click","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"]],template:function(r,i){r&1&&(pn(),u(0,"div",0)(1,"div",1)(2,"span",2),x(3),h(),u(4,"button",3),Z("click",function(){return i.currentPeriodClicked()}),u(5,"span",4),x(6),h(),cn(),u(7,"svg",5),ge(8,"polygon",6),h()(),jr(),ge(9,"div",7),mn(10),u(11,"button",8),Z("click",function(){return i.previousClicked()}),cn(),u(12,"svg",9),ge(13,"path",10),h()(),jr(),u(14,"button",11),Z("click",function(){return i.nextClicked()}),cn(),u(15,"svg",9),ge(16,"path",12),h()()()()),r&2&&(A(2),$("id",i._periodButtonLabelId),A(),ke(i.periodButtonDescription),A(),_e("aria-label",i.periodButtonLabel)("aria-describedby",i._periodButtonLabelId),A(2),ke(i.periodButtonText),A(),ue("mat-calendar-invert",i.calendar.currentView!=="month"),A(4),$("disabled",!i.previousEnabled()),_e("aria-label",i.prevButtonLabel),A(3),$("disabled",!i.nextEnabled()),_e("aria-label",i.nextButtonLabel))},dependencies:[bn,vn],encapsulation:2,changeDetection:0})}return t})(),li=(()=>{class t{_dateAdapter=D(Be,{optional:!0});_dateFormats=D(Ht,{optional:!0});_changeDetectorRef=D(Re);headerComponent;_calendarHeaderPortal;_intlChanges;_moveFocusOnNextTick=!1;get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt;startView="month";get selected(){return this._selected}set selected(e){e instanceof Ve?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_selected;get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_minDate;get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_maxDate;dateFilter;dateClass;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;selectedChange=new K;yearSelected=new K;monthSelected=new K;viewChanged=new K(!0);_userSelection=new K;_userDragDrop=new K;monthView;yearView;multiYearView;get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}_clampedActiveDate;get currentView(){return this._currentView}set currentView(e){let r=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),r&&this.viewChanged.emit(r)}_currentView;_activeDrag=null;stateChanges=new ze;constructor(){this._intlChanges=D(Xt).changes.subscribe(()=>{this._changeDetectorRef.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new Qr(this.headerComponent||_s),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){let r=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,i=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,a=r||i||e.dateFilter;if(a&&!a.firstChange){let o=this._getCurrentViewComponent();o&&(this._moveFocusOnNextTick=!0,this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){let r=e.value;(this.selected instanceof Ve||r&&!this._dateAdapter.sameDate(r,this.selected))&&this.selectedChange.emit(r),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,r){this.activeDate=e,this.currentView=r}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ce({type:t,selectors:[["mat-calendar"]],viewQuery:function(r,i){if(r&1&&(Pe(os,5),Pe(cs,5),Pe(ss,5)),r&2){let a;ye(a=be())&&(i.monthView=a.first),ye(a=be())&&(i.yearView=a.first),ye(a=be())&&(i.multiYearView=a.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],features:[Et([hs]),Ge],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(r,i){if(r&1&&(me(0,bl,0,0,"ng-template",0),u(1,"div",1),me(2,vl,1,11,"mat-month-view",2)(3,Dl,1,6,"mat-year-view",3)(4,wl,1,6,"mat-multi-year-view",3),h()),r&2){let a;$("cdkPortalOutlet",i._calendarHeaderPortal),A(2),xe((a=i.currentView)==="month"?2:a==="year"?3:a==="multi-year"?4:-1)}},dependencies:[ti,ro,os,cs,ss],styles:['.mat-calendar{display:block;line-height:normal;font-family:var(--mat-datepicker-calendar-text-font, var(--mat-sys-body-medium-font));font-size:var(--mat-datepicker-calendar-text-size, var(--mat-sys-body-medium-size))}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-period-button-text-weight, var(--mat-sys-title-small-weight));--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color, var(--mat-sys-on-surface-variant))}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}@media(forced-colors: active){.mat-calendar-arrow{fill:CanvasText}}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color, var(--mat-sys-on-surface-variant))}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color, var(--mat-sys-on-surface-variant));font-size:var(--mat-datepicker-calendar-header-text-size, var(--mat-sys-title-small-size));font-weight:var(--mat-datepicker-calendar-header-text-weight, var(--mat-sys-title-small-weight))}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color, transparent)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}return t})(),gs=new Yt("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let t=D(lt);return()=>t.scrollStrategies.reposition()}});function Rl(t){return()=>t.scrollStrategies.reposition()}var Bl={provide:gs,deps:[lt],useFactory:Rl},ys=(()=>{class t{_elementRef=D(wt);_animationsDisabled=D(Yn,{optional:!0})==="NoopAnimations";_changeDetectorRef=D(Re);_globalModel=D(xn);_dateAdapter=D(Be);_ngZone=D(ln);_rangeSelectionStrategy=D(fs,{optional:!0});_stateChanges;_model;_eventCleanups;_animationFallback;_calendar;color;datepicker;comparisonStart;comparisonEnd;startDateAccessibleName;endDateAccessibleName;_isAbove;_animationDone=new ze;_isAnimating=!1;_closeButtonText;_closeButtonFocused;_actionsPortal=null;_dialogLabelId;constructor(){if(D(gn).load(qn),this._closeButtonText=D(Xt).closeCalendarLabel,!this._animationsDisabled){let e=this._elementRef.nativeElement,r=D(un);this._eventCleanups=this._ngZone.runOutsideAngular(()=>[r.listen(e,"animationstart",this._handleAnimationEvent),r.listen(e,"animationend",this._handleAnimationEvent),r.listen(e,"animationcancel",this._handleAnimationEvent)])}}ngAfterViewInit(){this._stateChanges=this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()}),this._calendar.focusActiveCell()}ngOnDestroy(){clearTimeout(this._animationFallback),this._eventCleanups?.forEach(e=>e()),this._stateChanges?.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){let r=this._model.selection,i=e.value,a=r instanceof Ve;if(a&&this._rangeSelectionStrategy){let o=this._rangeSelectionStrategy.selectionFinished(i,r,e.event);this._model.updateSelection(o,this)}else i&&(a||!this._dateAdapter.sameDate(i,r))&&this._model.add(i);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._elementRef.nativeElement.classList.add("mat-datepicker-content-exit"),this._animationsDisabled?this._animationDone.next():(clearTimeout(this._animationFallback),this._animationFallback=setTimeout(()=>{this._isAnimating||this._animationDone.next()},200))}_handleAnimationEvent=e=>{let r=this._elementRef.nativeElement;e.target!==r||!e.animationName.startsWith("_mat-datepicker-content")||(clearTimeout(this._animationFallback),this._isAnimating=e.type==="animationstart",r.classList.toggle("mat-datepicker-content-animating",this._isAnimating),this._isAnimating||this._animationDone.next())};_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,r){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,r&&this._changeDetectorRef.detectChanges()}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ce({type:t,selectors:[["mat-datepicker-content"]],viewQuery:function(r,i){if(r&1&&Pe(li,5),r&2){let a;ye(a=be())&&(i._calendar=a.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:6,hostBindings:function(r,i){r&2&&(fn(i.color?"mat-"+i.color:""),ue("mat-datepicker-content-touch",i.datepicker.touchUi)("mat-datepicker-content-animations-enabled",!i._animationsDisabled))},inputs:{color:"color"},exportAs:["matDatepickerContent"],decls:5,vars:26,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(r,i){if(r&1&&(u(0,"div",0)(1,"mat-calendar",1),Z("yearSelected",function(o){return i.datepicker._selectYear(o)})("monthSelected",function(o){return i.datepicker._selectMonth(o)})("viewChanged",function(o){return i.datepicker._viewChanged(o)})("_userSelection",function(o){return i._handleUserSelection(o)})("_userDragDrop",function(o){return i._handleUserDragDrop(o)}),h(),me(2,Cl,0,0,"ng-template",2),u(3,"button",3),Z("focus",function(){return i._closeButtonFocused=!0})("blur",function(){return i._closeButtonFocused=!1})("click",function(){return i.datepicker.close()}),x(4),h()()),r&2){let a;ue("mat-datepicker-content-container-with-custom-header",i.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",i._actionsPortal),_e("aria-modal",!0)("aria-labelledby",(a=i._dialogLabelId)!==null&&a!==void 0?a:void 0),A(),fn(i.datepicker.panelClass),$("id",i.datepicker.id)("startAt",i.datepicker.startAt)("startView",i.datepicker.startView)("minDate",i.datepicker._getMinDate())("maxDate",i.datepicker._getMaxDate())("dateFilter",i.datepicker._getDateFilter())("headerComponent",i.datepicker.calendarHeaderComponent)("selected",i._getSelected())("dateClass",i.datepicker.dateClass)("comparisonStart",i.comparisonStart)("comparisonEnd",i.comparisonEnd)("startDateAccessibleName",i.startDateAccessibleName)("endDateAccessibleName",i.endDateAccessibleName),A(),$("cdkPortalOutlet",i._actionsPortal),A(),ue("cdk-visually-hidden",!i._closeButtonFocused),$("color",i.color||"primary"),A(),ke(i._closeButtonText)}},dependencies:[no,li,ti,bn],styles:["@keyframes _mat-datepicker-content-dropdown-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-dialog-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-datepicker-content-exit{from{opacity:1}to{opacity:0}}.mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color, var(--mat-sys-surface-container-high));color:var(--mat-datepicker-calendar-container-text-color, var(--mat-sys-on-surface));box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-shape, var(--mat-sys-corner-large))}.mat-datepicker-content.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dropdown-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.mat-datepicker-content-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12));border-radius:var(--mat-datepicker-calendar-container-touch-shape, var(--mat-sys-corner-extra-large));position:relative;overflow:visible}.mat-datepicker-content-touch.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-dialog-enter 150ms cubic-bezier(0, 0, 0.2, 1)}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}.mat-datepicker-content-exit.mat-datepicker-content-animations-enabled{animation:_mat-datepicker-content-exit 100ms linear}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,changeDetection:0})}return t})(),ls=(()=>{class t{_overlay=D(lt);_viewContainerRef=D(jn);_dateAdapter=D(Be,{optional:!0});_dir=D(At,{optional:!0});_model=D(xn);_scrollStrategy=D(gs);_inputStateChanges=we.EMPTY;_document=D(Wn);calendarHeaderComponent;get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}_startAt;startView="month";get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}_color;touchUi=!1;get disabled(){return this._disabled===void 0&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e,this.stateChanges.next(void 0))}_disabled;xPosition="start";yPosition="below";restoreFocus=!0;yearSelected=new K;monthSelected=new K;viewChanged=new K(!0);dateClass;openedStream=new K;closedStream=new K;get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=Za(e)}_panelClass;get opened(){return this._opened}set opened(e){e?this.open():this.close()}_opened=!1;id=D(Kt).getId("mat-datepicker-");_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}_overlayRef;_componentRef;_focusedElementBeforeOpen=null;_backdropHarnessClass=`${this.id}-backdrop`;_actionsPortal;datepickerInput;stateChanges=new ze;_injector=D(Kr);_changeDetectorRef=D(Re);constructor(){this._dateAdapter,this._model.selectionChanged.subscribe(()=>{this._changeDetectorRef.markForCheck()})}ngOnChanges(e){let r=e.xPosition||e.yPosition;if(r&&!r.firstChange&&this._overlayRef){let i=this._overlayRef.getConfig().positionStrategy;i instanceof Ro&&(this._setConnectedPositions(i),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this.datepickerInput,this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal,this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this.datepickerInput,this._focusedElementBeforeOpen=Xa(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;let e=this.restoreFocus&&this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function",r=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){let{instance:i,location:a}=this._componentRef;i._animationDone.pipe(Nn(1)).subscribe(()=>{let o=this._document.activeElement;e&&(!o||o===this._document.activeElement||a.nativeElement.contains(o))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()}),i._startExitAnimation()}e?setTimeout(r):r()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();let e=this.touchUi,r=new Qr(ys,this._viewContainerRef),i=this._overlayRef=this._overlay.create(new rr({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir||"ltr",scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:`mat-datepicker-${e?"dialog":"popup"}`}));this._getCloseStream(i).subscribe(a=>{a&&a.preventDefault(),this.close()}),i.keydownEvents().subscribe(a=>{let o=a.keyCode;(o===38||o===40||o===37||o===39||o===33||o===34)&&a.preventDefault()}),this._componentRef=i.attach(r),this._forwardContentValues(this._componentRef.instance),e||dn(()=>{i.updatePosition()},{injector:this._injector})}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){let e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){let r=this.xPosition==="end"?"end":"start",i=r==="start"?"end":"start",a=this.yPosition==="above"?"bottom":"top",o=a==="top"?"bottom":"top";return e.withPositions([{originX:r,originY:o,overlayX:r,overlayY:a},{originX:r,originY:a,overlayX:r,overlayY:o},{originX:i,originY:o,overlayX:i,overlayY:a},{originX:i,originY:a,overlayX:i,overlayY:o}])}_getCloseStream(e){let r=["ctrlKey","shiftKey","metaKey"];return st(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(on(i=>i.keyCode===27&&!Ye(i)||this.datepickerInput&&Ye(i,"altKey")&&i.keyCode===38&&r.every(a=>!Ye(i,a)))))}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ct({type:t,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:[2,"touchUi","touchUi",Ee],disabled:[2,"disabled","disabled",Ee],xPosition:"xPosition",yPosition:"yPosition",restoreFocus:[2,"restoreFocus","restoreFocus",Ee],dateClass:"dateClass",panelClass:"panelClass",opened:[2,"opened","opened",Ee]},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[Ge]})}return t})(),bs=(()=>{class t extends ls{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Na(t)))(i||t)}})();static \u0275cmp=Ce({type:t,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],features:[Et([hs,{provide:ls,useExisting:t}]),Wr],decls:0,vars:0,template:function(r,i){},encapsulation:2,changeDetection:0})}return t})(),qt=class{target;targetElement;value;constructor(n,e){this.target=n,this.targetElement=e,this.value=this.target.value}},Vl=(()=>{class t{_elementRef=D(wt);_dateAdapter=D(Be,{optional:!0});_dateFormats=D(Ht,{optional:!0});_isInitialized;get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}_model;get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){let r=e,i=this._elementRef.nativeElement;this._disabled!==r&&(this._disabled=r,this.stateChanges.next(void 0)),r&&this._isInitialized&&i.blur&&i.blur()}_disabled;dateChange=new K;dateInput=new K;stateChanges=new ze;_onTouched=()=>{};_validatorOnChange=()=>{};_cvaOnChange=()=>{};_valueChangesSubscription=we.EMPTY;_localeSubscription=we.EMPTY;_pendingValue;_parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}};_filterValidator=e=>{let r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value));return!r||this._matchesFilter(r)?null:{matDatepickerFilter:!0}};_minValidator=e=>{let r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this._getMinDate();return!i||!r||this._dateAdapter.compareDate(i,r)<=0?null:{matDatepickerMin:{min:i,actual:r}}};_maxValidator=e=>{let r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e.value)),i=this._getMaxDate();return!i||!r||this._dateAdapter.compareDate(i,r)>=0?null:{matDatepickerMax:{max:i,actual:r}}};_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(r=>{if(this._shouldHandleChangeEvent(r)){let i=this._getValueFromModel(r.selection);this._lastValueValid=this._isValidValue(i),this._cvaOnChange(i),this._onTouched(),this._formatValue(i),this.dateInput.emit(new qt(this,this._elementRef.nativeElement)),this.dateChange.emit(new qt(this,this._elementRef.nativeElement))}})}_lastValueValid=!1;constructor(){this._localeSubscription=this._dateAdapter.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){Nl(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){let r=["ctrlKey","shiftKey","metaKey"];Ye(e,"altKey")&&e.keyCode===40&&r.every(a=>!Ye(e,a))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){let r=this._lastValueValid,i=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(i),i=this._dateAdapter.getValidDateOrNull(i);let a=!this._dateAdapter.sameDate(i,this.value);!i||a?this._cvaOnChange(i):(e&&!this.value&&this._cvaOnChange(i),r!==this._lastValueValid&&this._validatorOnChange()),a&&(this._assignValue(i),this.dateInput.emit(new qt(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new qt(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e!=null?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){let r=this._getDateFilter();return!r||r(e)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ct({type:t,inputs:{value:"value",disabled:[2,"disabled","disabled",Ee]},outputs:{dateChange:"dateChange",dateInput:"dateInput"},features:[Ge]})}return t})();function Nl(t,n){let e=Object.keys(t);for(let r of e){let{previousValue:i,currentValue:a}=t[r];if(n.isDateInstance(i)&&n.isDateInstance(a)){if(!n.sameDate(i,a))return!0}else return!0}return!1}var Ll={provide:ar,useExisting:sn(()=>hr),multi:!0},Fl={provide:Vo,useExisting:sn(()=>hr),multi:!0},hr=(()=>{class t extends Vl{_formField=D(or,{optional:!0});_closedSubscription=we.EMPTY;_openedSubscription=we.EMPTY;set matDatepicker(e){e&&(this._datepicker=e,this._ariaOwns.set(e.opened?e.id:null),this._closedSubscription=e.closedStream.subscribe(()=>{this._onTouched(),this._ariaOwns.set(null)}),this._openedSubscription=e.openedStream.subscribe(()=>{this._ariaOwns.set(e.id)}),this._registerModel(e.registerInput(this)))}_datepicker;_ariaOwns=Fa(null);get min(){return this._min}set min(e){let r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(r,this._min)||(this._min=r,this._validatorOnChange())}_min;get max(){return this._max}set max(e){let r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(r,this._max)||(this._max=r,this._validatorOnChange())}_max;get dateFilter(){return this._dateFilter}set dateFilter(e){let r=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==r&&this._validatorOnChange()}_dateFilter;_validator;constructor(){super(),this._validator=No.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe(),this._openedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ct({type:t,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(r,i){r&1&&Z("input",function(o){return i._onInput(o.target.value)})("change",function(){return i._onChange()})("blur",function(){return i._onBlur()})("keydown",function(o){return i._onKeydown(o)}),r&2&&(ja("disabled",i.disabled),_e("aria-haspopup",i._datepicker?"dialog":null)("aria-owns",i._ariaOwns())("min",i.min?i._dateAdapter.toIso8601(i.min):null)("max",i.max?i._dateAdapter.toIso8601(i.max):null)("data-mat-calendar",i._datepicker?i._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:[0,"matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],features:[Et([Ll,Fl,{provide:qo,useExisting:t}]),Wr]})}return t})(),Ul=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ct({type:t,selectors:[["","matDatepickerToggleIcon",""]]})}return t})(),hi=(()=>{class t{_intl=D(Xt);_changeDetectorRef=D(Re);_stateChanges=we.EMPTY;datepicker;tabIndex;ariaLabel;get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}_disabled;disableRipple;_customIcon;_button;constructor(){let e=D(new La("tabindex"),{optional:!0}),r=Number(e);this.tabIndex=r||r===0?r:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){let e=this.datepicker?this.datepicker.stateChanges:Ft(),r=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:Ft(),i=this.datepicker?st(this.datepicker.openedStream,this.datepicker.closedStream):Ft();this._stateChanges.unsubscribe(),this._stateChanges=st(this._intl.changes,e,r,i).subscribe(()=>this._changeDetectorRef.markForCheck())}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ce({type:t,selectors:[["mat-datepicker-toggle"]],contentQueries:function(r,i,a){if(r&1&&_n(a,Ul,5),r&2){let o;ye(o=be())&&(i._customIcon=o.first)}},viewQuery:function(r,i){if(r&1&&Pe(xl,5),r&2){let a;ye(a=be())&&(i._button=a.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(r,i){r&1&&Z("click",function(o){return i._open(o)}),r&2&&(_e("tabindex",null)("data-mat-calendar",i.datepicker?i.datepicker.id:null),ue("mat-datepicker-toggle-active",i.datepicker&&i.datepicker.opened)("mat-accent",i.datepicker&&i.datepicker.color==="accent")("mat-warn",i.datepicker&&i.datepicker.color==="warn"))},inputs:{datepicker:[0,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[0,"aria-label","ariaLabel"],disabled:[2,"disabled","disabled",Ee],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],features:[Ge],ngContentSelectors:Al,decls:4,vars:7,consts:[["button",""],["mat-icon-button","","type","button",3,"disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(r,i){r&1&&(pn(El),u(0,"button",1,0),me(2,Sl,2,0,":svg:svg",2),mn(3),h()),r&2&&($("disabled",i.disabled)("disableRipple",i.disableRipple),_e("aria-haspopup",i.datepicker?"dialog":null)("aria-label",i.ariaLabel||i._intl.openCalendarLabel)("tabindex",i.disabled?-1:i.tabIndex)("aria-expanded",i.datepicker?i.datepicker.opened:null),A(2),xe(i._customIcon?-1:2))},dependencies:[vn],styles:[".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color, var(--mat-sys-on-surface-variant))}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color, var(--mat-sys-on-surface-variant))}@media(forced-colors: active){.mat-datepicker-toggle-default-icon{color:CanvasText}}"],encapsulation:2,changeDetection:0})}return t})();var vs=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Kn({type:t});static \u0275inj=Un({providers:[Xt,Bl],imports:[Xn,ir,io,Po,yn,ys,hi,_s,nr]})}return t})();var Kl=["panel"],Hl=["*"];function Wl(t,n){if(t&1&&(u(0,"div",1,0),mn(2),h()),t&2){let e=n.id,r=U();fn(r._classList),ue("mat-mdc-autocomplete-visible",r.showPanel)("mat-mdc-autocomplete-hidden",!r.showPanel)("mat-autocomplete-panel-animations-enabled",!r._animationsDisabled)("mat-primary",r._color==="primary")("mat-accent",r._color==="accent")("mat-warn",r._color==="warn"),$("id",r.id),_e("aria-label",r.ariaLabel||null)("aria-labelledby",r._getPanelAriaLabelledby(e))}}var fi=class{source;option;constructor(n,e){this.source=n,this.option=e}},Ds=new Yt("mat-autocomplete-default-options",{providedIn:"root",factory:zl});function zl(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}var ws=(()=>{class t{_changeDetectorRef=D(Re);_elementRef=D(wt);_defaults=D(Ds);_animationsDisabled=D(Yn,{optional:!0})==="NoopAnimations";_activeOptionChanges=we.EMPTY;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new K;opened=new K;closed=new K;optionActivated=new K;set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}id=D(Kt).getId("mat-autocomplete-");inertGroups;constructor(){let e=D(zn);this.inertGroups=e?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new to(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let r=new fi(this,e);this.optionSelected.emit(r)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let r=e?e+" ":"";return this.ariaLabelledby?r+this.ariaLabelledby:e}_skipPredicate(){return!1}static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Ce({type:t,selectors:[["mat-autocomplete"]],contentQueries:function(r,i,a){if(r&1&&(_n(a,Jn,5),_n(a,co,5)),r&2){let o;ye(o=be())&&(i.options=o),ye(o=be())&&(i.optionGroups=o)}},viewQuery:function(r,i){if(r&1&&(Pe(Hr,7),Pe(Kl,5)),r&2){let a;ye(a=be())&&(i.template=a.first),ye(a=be())&&(i.panel=a.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",Ee],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",Ee],requireSelection:[2,"requireSelection","requireSelection",Ee],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",Ee],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Ee]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[Et([{provide:so,useExisting:t}])],ngContentSelectors:Hl,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(r,i){r&1&&(pn(),me(0,Wl,3,17,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}@keyframes _mat-autocomplete-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}.mat-autocomplete-panel-animations-enabled{animation:_mat-autocomplete-enter 120ms cubic-bezier(0, 0, 0.2, 1)}mat-autocomplete{display:none}"],encapsulation:2,changeDetection:0})}return t})();var ql={provide:ar,useExisting:sn(()=>pi),multi:!0};var Cs=new Yt("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let t=D(lt);return()=>t.scrollStrategies.reposition()}});function $l(t){return()=>t.scrollStrategies.reposition()}var Jl={provide:Cs,deps:[lt],useFactory:$l},pi=(()=>{class t{_environmentInjector=D(Va);_element=D(wt);_overlay=D(lt);_viewContainerRef=D(jn);_zone=D(ln);_changeDetectorRef=D(Re);_dir=D(At,{optional:!0});_formField=D(or,{optional:!0,host:!0});_document=D(Wn);_viewportRuler=D(To);_scrollStrategy=D(Cs);_renderer=D(un);_defaults=D(Ds,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new ze;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=we.EMPTY;_breakpointObserver=D(Qa);_handsetLandscapeSubscription=we.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new ze;_windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&$n(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return st(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(on(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(on(()=>this._overlayAttached)):Ft()).pipe(Ia(e=>e instanceof lo?e:null))}optionSelections=Ma(()=>{let e=this.autocomplete?this.autocomplete.options:null;return e?e.changes.pipe(Ut(e),Ln(()=>st(...e.map(r=>r.onSelectionChange)))):this._initialized.pipe(Ln(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new Yr(e=>{let r=a=>{let o=Ga(a),s=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,c=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&o!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!s||!s.contains(o))&&(!c||!c.contains(o))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(o)&&e.next(a)},i=[this._renderer.listen("document","click",r),this._renderer.listen("document","auxclick",r),this._renderer.listen("document","touchend",r)];return()=>{i.forEach(a=>a())}})}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let r=e.keyCode,i=Ye(e);if(r===27&&!i&&e.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&r===13&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),e.preventDefault();else if(this.autocomplete){let a=this.autocomplete._keyManager.activeItem,o=r===38||r===40;r===9||o&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(e):o&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(o||this.autocomplete._keyManager.activeItem!==a)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let r=e.target,i=r.value;if(r.type==="number"&&(i=i==""?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),!i)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let a=this.autocomplete.options?.find(o=>o.selected);if(a){let o=this._getDisplayValue(a.value);i!==o&&a.deselect(!1)}}if(this._canOpen()&&this._document.activeElement===e.target){let a=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(a)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new Yr(i=>{dn(()=>{i.next()},{injector:this._environmentInjector})}),r=this.autocomplete.options.changes.pipe(Ta(()=>this._positionStrategy.reapplyLastPosition()),Oa(0));return st(e,r).pipe(Ln(()=>this._zone.run(()=>{let i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),Nn(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let r=this.autocomplete;return r&&r.displayWith?r.displayWith(e):e}_assignOptionValue(e){let r=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(r??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let r=this.autocomplete,i=e?e.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),r._emitSelectEvent(i),this._element.nativeElement.focus()):r.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,r){this.autocomplete?.options?.forEach(i=>{i!==e&&i.selected&&i.deselect(r)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let r=this.autocomplete.id;qr(this._trackedModal,"aria-owns",r)}}_attachOverlay(e){this.autocomplete;let r=this._overlayRef;r?(this._positionStrategy.setOrigin(this._getConnectedElement()),r.updateSize({width:this._getPanelWidth()})):(this._portal=new ei(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),r=this._overlay.create(this._getOverlayConfig()),this._overlayRef=r,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&r&&r.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(eo.HandsetLandscape).subscribe(a=>{a.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),r&&!r.hasAttached()&&(r.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=e=>{(e.keyCode===27&&!Ye(e)||e.keyCode===38&&Ye(e,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),e.stopPropagation(),e.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new rr({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){let e=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let r=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,a=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}],o;this.position==="above"?o=a:this.position==="below"?o=r:o=[...r,...a],e.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let r=-1;for(let i=0;i<e.options.length;i++)if(!e.options.get(i).disabled){r=i;break}e._keyManager.setActiveItem(r)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_scrollToOption(e){let r=this.autocomplete,i=uo(e,r.options,r.optionGroups);if(e===0&&i===1)r._setScrollTop(0);else if(r.panel){let a=r.options.toArray()[e];if(a){let o=a._getHostElement(),s=ho(o.offsetTop,o.offsetHeight,r._getScrollTop(),r.panel.nativeElement.offsetHeight);r._setScrollTop(s)}}}_trackedModal=null;_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let r=this.autocomplete.id;this._trackedModal&&$n(this._trackedModal,"aria-owns",r),qr(e,"aria-owns",r),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;$n(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Ct({type:t,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(r,i){r&1&&Z("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(o){return i._handleInput(o)})("keydown",function(o){return i._handleKeydown(o)})("click",function(){return i._handleClick()}),r&2&&_e("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||i.autocomplete==null?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",Ee]},exportAs:["matAutocompleteTrigger"],features:[Et([ql]),Ge]})}return t})(),xs=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=Kn({type:t});static \u0275inj=Un({providers:[Jl],imports:[ir,$r,yn,nr,$r,yn]})}return t})();var Es=[{id:"VerifiableCredential",name:"Verifiable Credential",description:"Base credential type"},{id:"IdentityCredential",name:"Identity",description:"A credential asserting identity information"},{id:"ProofOfAgeCredential",name:"Proof of Age",description:"A credential proving the holder is over a certain age"},{id:"AgreementCredential",name:"Agreement",description:"A credential asserting an agreement between parties"},{id:"DocumentCredential",name:"Document",description:"A credential containing or referencing a document"},{id:"ContractCredential",name:"Contract",description:"A credential representing a contract between parties"}];function kt(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function An(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?kt(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function mi(t,n){n||(n=t.reduce((i,a)=>i+a.length,0));let e=An(n),r=0;for(let i of t)e.set(i,r),r+=i.length;return kt(e)}var vi={};De(vi,{identity:()=>nd});function Gl(t,n){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),r=0;r<e.length;r++)e[r]=255;for(var i=0;i<t.length;i++){var a=t.charAt(i),o=a.charCodeAt(0);if(e[o]!==255)throw new TypeError(a+" is ambiguous");e[o]=i}var s=t.length,c=t.charAt(0),d=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function g(E){if(E instanceof Uint8Array||(ArrayBuffer.isView(E)?E=new Uint8Array(E.buffer,E.byteOffset,E.byteLength):Array.isArray(E)&&(E=Uint8Array.from(E))),!(E instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(E.length===0)return"";for(var v=0,f=0,w=0,I=E.length;w!==I&&E[w]===0;)w++,v++;for(var b=(I-w)*l+1>>>0,T=new Uint8Array(b);w!==I;){for(var R=E[w],P=0,M=b-1;(R!==0||P<f)&&M!==-1;M--,P++)R+=256*T[M]>>>0,T[M]=R%s>>>0,R=R/s>>>0;if(R!==0)throw new Error("Non-zero carry");f=P,w++}for(var V=b-f;V!==b&&T[V]===0;)V++;for(var B=c.repeat(v);V<b;++V)B+=t.charAt(T[V]);return B}function m(E){if(typeof E!="string")throw new TypeError("Expected String");if(E.length===0)return new Uint8Array;var v=0;if(E[v]!==" "){for(var f=0,w=0;E[v]===c;)f++,v++;for(var I=(E.length-v)*d+1>>>0,b=new Uint8Array(I);E[v];){var T=e[E.charCodeAt(v)];if(T===255)return;for(var R=0,P=I-1;(T!==0||R<w)&&P!==-1;P--,R++)T+=s*b[P]>>>0,b[P]=T%256>>>0,T=T/256>>>0;if(T!==0)throw new Error("Non-zero carry");w=R,v++}if(E[v]!==" "){for(var M=I-w;M!==I&&b[M]===0;)M++;for(var V=new Uint8Array(f+(I-M)),B=f;M!==I;)V[B++]=b[M++];return V}}}function y(E){var v=m(E);if(v)return v;throw new Error(`Non-${n} character`)}return{encode:g,decodeUnsafe:m,decode:y}}var Zl=Gl,Ql=Zl,As=Ql;var wp=new Uint8Array(0);var Ss=(t,n)=>{if(t===n)return!0;if(t.byteLength!==n.byteLength)return!1;for(let e=0;e<t.byteLength;e++)if(t[e]!==n[e])return!1;return!0},et=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};var ks=t=>new TextEncoder().encode(t),Is=t=>new TextDecoder().decode(t);var _i=class{constructor(n,e,r){this.name=n,this.prefix=e,this.baseEncode=r}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}},gi=class{constructor(n,e,r){if(this.name=n,this.prefix=e,e.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=r}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return Os(this,n)}},yi=class{constructor(n){this.decoders=n}or(n){return Os(this,n)}decode(n){let e=n[0],r=this.decoders[e];if(r)return r.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}},Os=(t,n)=>new yi(N(N({},t.decoders||{[t.prefix]:t}),n.decoders||{[n.prefix]:n})),bi=class{constructor(n,e,r,i){this.name=n,this.prefix=e,this.baseEncode=r,this.baseDecode=i,this.encoder=new _i(n,e,r),this.decoder=new gi(n,e,i)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}},Gt=({name:t,prefix:n,encode:e,decode:r})=>new bi(t,n,e,r),ht=({prefix:t,name:n,alphabet:e})=>{let{encode:r,decode:i}=As(e,n);return Gt({prefix:t,name:n,encode:r,decode:a=>et(i(a))})},ed=(t,n,e,r)=>{let i={};for(let l=0;l<n.length;++l)i[n[l]]=l;let a=t.length;for(;t[a-1]==="=";)--a;let o=new Uint8Array(a*e/8|0),s=0,c=0,d=0;for(let l=0;l<a;++l){let g=i[t[l]];if(g===void 0)throw new SyntaxError(`Non-${r} character`);c=c<<e|g,s+=e,s>=8&&(s-=8,o[d++]=255&c>>s)}if(s>=e||255&c<<8-s)throw new SyntaxError("Unexpected end of data");return o},td=(t,n,e)=>{let r=n[n.length-1]==="=",i=(1<<e)-1,a="",o=0,s=0;for(let c=0;c<t.length;++c)for(s=s<<8|t[c],o+=8;o>e;)o-=e,a+=n[i&s>>o];if(o&&(a+=n[i&s<<e-o]),r)for(;a.length*e&7;)a+="=";return a},re=({name:t,prefix:n,bitsPerChar:e,alphabet:r})=>Gt({prefix:n,name:t,encode(i){return td(i,r,e)},decode(i){return ed(i,r,e,t)}});var nd=Gt({prefix:"\0",name:"identity",encode:t=>Is(t),decode:t=>ks(t)});var Di={};De(Di,{base2:()=>rd});var rd=re({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var wi={};De(wi,{base8:()=>id});var id=re({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Ci={};De(Ci,{base10:()=>ad});var ad=ht({prefix:"9",name:"base10",alphabet:"0123456789"});var xi={};De(xi,{base16:()=>od,base16upper:()=>sd});var od=re({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sd=re({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Ei={};De(Ei,{base32:()=>Zt,base32hex:()=>ud,base32hexpad:()=>fd,base32hexpadupper:()=>pd,base32hexupper:()=>hd,base32pad:()=>ld,base32padupper:()=>dd,base32upper:()=>cd,base32z:()=>md});var Zt=re({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),cd=re({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ld=re({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),dd=re({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),ud=re({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hd=re({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),fd=re({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),pd=re({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),md=re({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Ai={};De(Ai,{base36:()=>_d,base36upper:()=>gd});var _d=ht({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),gd=ht({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var Si={};De(Si,{base58btc:()=>qe,base58flickr:()=>yd});var qe=ht({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),yd=ht({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ki={};De(ki,{base64:()=>bd,base64pad:()=>vd,base64url:()=>Dd,base64urlpad:()=>wd});var bd=re({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),vd=re({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Dd=re({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),wd=re({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Ii={};De(Ii,{base256emoji:()=>Sd});var Ts=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Cd=Ts.reduce((t,n,e)=>(t[e]=n,t),[]),xd=Ts.reduce((t,n,e)=>(t[n.codePointAt(0)]=e,t),[]);function Ed(t){return t.reduce((n,e)=>(n+=Cd[e],n),"")}function Ad(t){let n=[];for(let e of t){let r=xd[e.codePointAt(0)];if(r===void 0)throw new Error(`Non-base256emoji character: ${e}`);n.push(r)}return new Uint8Array(n)}var Sd=Gt({prefix:"\u{1F680}",name:"base256emoji",encode:Ed,decode:Ad});var Pi={};De(Pi,{sha256:()=>zd,sha512:()=>qd});var Ot={};De(Ot,{decode:()=>Qt,encodeTo:()=>It,encodingLength:()=>Mt});var kd=Bs,Ps=128,Id=127,Md=~Id,Od=Math.pow(2,31);function Bs(t,n,e){n=n||[],e=e||0;for(var r=e;t>=Od;)n[e++]=t&255|Ps,t/=128;for(;t&Md;)n[e++]=t&255|Ps,t>>>=7;return n[e]=t|0,Bs.bytes=e-r+1,n}var Td=Mi,Pd=128,Rs=127;function Mi(t,r){var e=0,r=r||0,i=0,a=r,o,s=t.length;do{if(a>=s)throw Mi.bytes=0,new RangeError("Could not decode varint");o=t[a++],e+=i<28?(o&Rs)<<i:(o&Rs)*Math.pow(2,i),i+=7}while(o>=Pd);return Mi.bytes=a-r,e}var Rd=Math.pow(2,7),Bd=Math.pow(2,14),Vd=Math.pow(2,21),Nd=Math.pow(2,28),Ld=Math.pow(2,35),Fd=Math.pow(2,42),Ud=Math.pow(2,49),Yd=Math.pow(2,56),jd=Math.pow(2,63),Kd=function(t){return t<Rd?1:t<Bd?2:t<Vd?3:t<Nd?4:t<Ld?5:t<Fd?6:t<Ud?7:t<Yd?8:t<jd?9:10},Hd={encode:kd,decode:Td,encodingLength:Kd},Wd=Hd,Sn=Wd;var Qt=(t,n=0)=>[Sn.decode(t,n),Sn.decode.bytes],It=(t,n,e=0)=>(Sn.encode(t,n,e),n),Mt=t=>Sn.encodingLength(t);var Tt=(t,n)=>{let e=n.byteLength,r=Mt(t),i=r+Mt(e),a=new Uint8Array(i+e);return It(t,a,0),It(e,a,r),a.set(n,i),new en(t,e,n,a)},Vs=t=>{let n=et(t),[e,r]=Qt(n),[i,a]=Qt(n.subarray(r)),o=n.subarray(r+a);if(o.byteLength!==i)throw new Error("Incorrect length");return new en(e,i,o,n)},Ns=(t,n)=>t===n?!0:t.code===n.code&&t.size===n.size&&Ss(t.bytes,n.bytes),en=class{constructor(n,e,r,i){this.code=n,this.size=e,this.digest=r,this.bytes=i}};var Ti=({name:t,code:n,encode:e})=>new Oi(t,n,e),Oi=class{constructor(n,e,r){this.name=n,this.code=e,this.encode=r}digest(n){if(n instanceof Uint8Array){let e=this.encode(n);return e instanceof Uint8Array?Tt(this.code,e):e.then(r=>Tt(this.code,r))}else throw Error("Unknown type, must be binary type")}};var Fs=t=>n=>ka(void 0,null,function*(){return new Uint8Array(yield crypto.subtle.digest(t,n))}),zd=Ti({name:"sha2-256",code:18,encode:Fs("SHA-256")}),qd=Ti({name:"sha2-512",code:19,encode:Fs("SHA-512")});var Ri={};De(Ri,{identity:()=>Xd});var Us=0,$d="identity",Ys=et,Jd=t=>Tt(Us,Ys(t)),Xd={code:Us,name:$d,encode:Ys,digest:Jd};var Wp=new TextEncoder,zp=new TextDecoder;var mr=class t{constructor(n,e,r,i){this.code=e,this.version=n,this.multihash=r,this.bytes=i,this.byteOffset=i.byteOffset,this.byteLength=i.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:pr,byteLength:pr,code:fr,version:fr,multihash:fr,bytes:fr,_baseCache:pr,asCID:pr})}toV0(){switch(this.version){case 0:return this;default:{let{code:n,multihash:e}=this;if(n!==In)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(e.code!==nu)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return t.createV0(e)}}}toV1(){switch(this.version){case 0:{let{code:n,digest:e}=this.multihash,r=Tt(n,e);return t.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(n){return n&&this.code===n.code&&this.version===n.version&&Ns(this.multihash,n.multihash)}toString(n){let{bytes:e,version:r,_baseCache:i}=this;switch(r){case 0:return eu(e,i,n||qe.encoder);default:return tu(e,i,n||Zt.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(n){return iu(/^0\.0/,au),!!(n&&(n[Ks]||n.asCID===n))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(n){if(n instanceof t)return n;if(n!=null&&n.asCID===n){let{version:e,code:r,multihash:i,bytes:a}=n;return new t(e,r,i,a||js(e,r,i.bytes))}else if(n!=null&&n[Ks]===!0){let{version:e,multihash:r,code:i}=n,a=Vs(r);return t.create(e,i,a)}else return null}static create(n,e,r){if(typeof e!="number")throw new Error("String codecs are no longer supported");switch(n){case 0:{if(e!==In)throw new Error(`Version 0 CID must use dag-pb (code: ${In}) block encoding`);return new t(n,e,r,r.bytes)}case 1:{let i=js(n,e,r.bytes);return new t(n,e,r,i)}default:throw new Error("Invalid version")}}static createV0(n){return t.create(0,In,n)}static createV1(n,e){return t.create(1,n,e)}static decode(n){let[e,r]=t.decodeFirst(n);if(r.length)throw new Error("Incorrect length");return e}static decodeFirst(n){let e=t.inspectBytes(n),r=e.size-e.multihashSize,i=et(n.subarray(r,r+e.multihashSize));if(i.byteLength!==e.multihashSize)throw new Error("Incorrect length");let a=i.subarray(e.multihashSize-e.digestSize),o=new en(e.multihashCode,e.digestSize,a,i);return[e.version===0?t.createV0(o):t.createV1(e.codec,o),n.subarray(e.size)]}static inspectBytes(n){let e=0,r=()=>{let[g,m]=Qt(n.subarray(e));return e+=m,g},i=r(),a=In;if(i===18?(i=0,e=0):i===1&&(a=r()),i!==0&&i!==1)throw new RangeError(`Invalid CID version ${i}`);let o=e,s=r(),c=r(),d=e+c,l=d-o;return{version:i,codec:a,multihashCode:s,digestSize:c,multihashSize:l,size:d}}static parse(n,e){let[r,i]=Qd(n,e),a=t.decode(i);return a._baseCache.set(r,n),a}},Qd=(t,n)=>{switch(t[0]){case"Q":{let e=n||qe;return[qe.prefix,e.decode(`${qe.prefix}${t}`)]}case qe.prefix:{let e=n||qe;return[qe.prefix,e.decode(t)]}case Zt.prefix:{let e=n||Zt;return[Zt.prefix,e.decode(t)]}default:{if(n==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],n.decode(t)]}}},eu=(t,n,e)=>{let{prefix:r}=e;if(r!==qe.prefix)throw Error(`Cannot string encode V0 in ${e.name} encoding`);let i=n.get(r);if(i==null){let a=e.encode(t).slice(1);return n.set(r,a),a}else return i},tu=(t,n,e)=>{let{prefix:r}=e,i=n.get(r);if(i==null){let a=e.encode(t);return n.set(r,a),a}else return i},In=112,nu=18,js=(t,n,e)=>{let r=Mt(t),i=r+Mt(n),a=new Uint8Array(i+e.byteLength);return It(t,a,0),It(n,a,r),a.set(e,i),a},Ks=Symbol.for("@ipld/js-cid/CID"),fr={writable:!1,configurable:!1,enumerable:!0},pr={writable:!1,enumerable:!1,configurable:!1},ru="0.0.0-dev",iu=(t,n)=>{if(t.test(ru))console.warn(n);else throw new Error(n)},au=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`;var Bi=N(N(N(N(N(N(N(N(N(N({},vi),Di),wi),Ci),xi),Ei),Ai),Si),ki),Ii),em=N(N({},Pi),Ri);function Ws(t,n,e,r){return{name:t,prefix:n,encoder:{name:t,prefix:n,encode:e},decoder:{decode:r}}}var Hs=Ws("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Vi=Ws("ascii","a",t=>{let n="a";for(let e=0;e<t.length;e++)n+=String.fromCharCode(t[e]);return n},t=>{t=t.substring(1);let n=An(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}),ou=N({utf8:Hs,"utf-8":Hs,hex:Bi.base16,latin1:Vi,ascii:Vi,binary:Vi},Bi),_r=ou;function Mn(t,n="utf8"){let e=_r[n];if(!e)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?kt(globalThis.Buffer.from(t,"utf-8")):e.decoder.decode(`${e.prefix}${t}`)}function gr(t,n="utf8"){let e=_r[n];if(!e)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):e.encoder.encode(t).substring(1)}var vr={};De(vr,{aInRange:()=>Ae,abool:()=>Ke,abytes:()=>tn,bitGet:()=>hu,bitLen:()=>Ui,bitMask:()=>Tn,bitSet:()=>fu,bytesToHex:()=>nt,bytesToNumberBE:()=>rt,bytesToNumberLE:()=>pt,concatBytes:()=>it,createHmacDrbg:()=>Yi,ensureBytes:()=>ne,equalBytes:()=>du,hexToBytes:()=>Rt,hexToNumber:()=>Fi,inRange:()=>On,isBytes:()=>ft,memoized:()=>Vt,notImplemented:()=>mu,numberToBytesBE:()=>mt,numberToBytesLE:()=>Bt,numberToHexUnpadded:()=>Pt,numberToVarBytesBE:()=>lu,utf8ToBytes:()=>uu,validateObject:()=>$e});var yr=BigInt(0),br=BigInt(1),su=BigInt(2);function ft(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function tn(t){if(!ft(t))throw new Error("Uint8Array expected")}function Ke(t,n){if(typeof n!="boolean")throw new Error(t+" boolean expected, got "+n)}var cu=Array.from({length:256},(t,n)=>n.toString(16).padStart(2,"0"));function nt(t){tn(t);let n="";for(let e=0;e<t.length;e++)n+=cu[t[e]];return n}function Pt(t){let n=t.toString(16);return n.length&1?"0"+n:n}function Fi(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?yr:BigInt("0x"+t)}var tt={_0:48,_9:57,A:65,F:70,a:97,f:102};function zs(t){if(t>=tt._0&&t<=tt._9)return t-tt._0;if(t>=tt.A&&t<=tt.F)return t-(tt.A-10);if(t>=tt.a&&t<=tt.f)return t-(tt.a-10)}function Rt(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let n=t.length,e=n/2;if(n%2)throw new Error("hex string expected, got unpadded hex of length "+n);let r=new Uint8Array(e);for(let i=0,a=0;i<e;i++,a+=2){let o=zs(t.charCodeAt(a)),s=zs(t.charCodeAt(a+1));if(o===void 0||s===void 0){let c=t[a]+t[a+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+a)}r[i]=o*16+s}return r}function rt(t){return Fi(nt(t))}function pt(t){return tn(t),Fi(nt(Uint8Array.from(t).reverse()))}function mt(t,n){return Rt(t.toString(16).padStart(n*2,"0"))}function Bt(t,n){return mt(t,n).reverse()}function lu(t){return Rt(Pt(t))}function ne(t,n,e){let r;if(typeof n=="string")try{r=Rt(n)}catch(a){throw new Error(t+" must be hex string or Uint8Array, cause: "+a)}else if(ft(n))r=Uint8Array.from(n);else throw new Error(t+" must be hex string or Uint8Array");let i=r.length;if(typeof e=="number"&&i!==e)throw new Error(t+" of length "+e+" expected, got "+i);return r}function it(...t){let n=0;for(let r=0;r<t.length;r++){let i=t[r];tn(i),n+=i.length}let e=new Uint8Array(n);for(let r=0,i=0;r<t.length;r++){let a=t[r];e.set(a,i),i+=a.length}return e}function du(t,n){if(t.length!==n.length)return!1;let e=0;for(let r=0;r<t.length;r++)e|=t[r]^n[r];return e===0}function uu(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}var Ni=t=>typeof t=="bigint"&&yr<=t;function On(t,n,e){return Ni(t)&&Ni(n)&&Ni(e)&&n<=t&&t<e}function Ae(t,n,e,r){if(!On(n,e,r))throw new Error("expected valid "+t+": "+e+" <= n < "+r+", got "+n)}function Ui(t){let n;for(n=0;t>yr;t>>=br,n+=1);return n}function hu(t,n){return t>>BigInt(n)&br}function fu(t,n,e){return t|(e?br:yr)<<BigInt(n)}var Tn=t=>(su<<BigInt(t-1))-br,Li=t=>new Uint8Array(t),qs=t=>Uint8Array.from(t);function Yi(t,n,e){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");if(typeof e!="function")throw new Error("hmacFn must be a function");let r=Li(t),i=Li(t),a=0,o=()=>{r.fill(1),i.fill(0),a=0},s=(...g)=>e(i,r,...g),c=(g=Li())=>{i=s(qs([0]),g),r=s(),g.length!==0&&(i=s(qs([1]),g),r=s())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let g=0,m=[];for(;g<n;){r=s();let y=r.slice();m.push(y),g+=r.length}return it(...m)};return(g,m)=>{o(),c(g);let y;for(;!(y=m(d()));)c();return o(),y}}var pu={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||ft(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,n)=>n.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function $e(t,n,e={}){let r=(i,a,o)=>{let s=pu[a];if(typeof s!="function")throw new Error("invalid validator function");let c=t[i];if(!(o&&c===void 0)&&!s(c,t))throw new Error("param "+String(i)+" is invalid. Expected "+a+", got "+c)};for(let[i,a]of Object.entries(n))r(i,a,!1);for(let[i,a]of Object.entries(e))r(i,a,!0);return t}var mu=()=>{throw new Error("not implemented")};function Vt(t){let n=new WeakMap;return(e,...r)=>{let i=n.get(e);if(i!==void 0)return i;let a=t(e,...r);return n.set(e,a),a}}var ae=BigInt(0),ee=BigInt(1),Nt=BigInt(2),_u=BigInt(3),ji=BigInt(4),$s=BigInt(5),Js=BigInt(8),gu=BigInt(9),yu=BigInt(16);function G(t,n){let e=t%n;return e>=ae?e:n+e}function bu(t,n,e){if(n<ae)throw new Error("invalid exponent, negatives unsupported");if(e<=ae)throw new Error("invalid modulus");if(e===ee)return ae;let r=ee;for(;n>ae;)n&ee&&(r=r*t%e),t=t*t%e,n>>=ee;return r}function te(t,n,e){let r=t;for(;n-- >ae;)r*=r,r%=e;return r}function Dr(t,n){if(t===ae)throw new Error("invert: expected non-zero number");if(n<=ae)throw new Error("invert: expected positive modulus, got "+n);let e=G(t,n),r=n,i=ae,a=ee,o=ee,s=ae;for(;e!==ae;){let d=r/e,l=r%e,g=i-o*d,m=a-s*d;r=e,e=l,i=o,a=s,o=g,s=m}if(r!==ee)throw new Error("invert: does not exist");return G(i,n)}function vu(t){let n=(t-ee)/Nt,e,r,i;for(e=t-ee,r=0;e%Nt===ae;e/=Nt,r++);for(i=Nt;i<t&&bu(i,n,t)!==t-ee;i++)if(i>1e3)throw new Error("Cannot find square root: likely non-prime P");if(r===1){let o=(t+ee)/ji;return function(c,d){let l=c.pow(d,o);if(!c.eql(c.sqr(l),d))throw new Error("Cannot find square root");return l}}let a=(e+ee)/Nt;return function(s,c){if(s.pow(c,n)===s.neg(s.ONE))throw new Error("Cannot find square root");let d=r,l=s.pow(s.mul(s.ONE,i),e),g=s.pow(c,a),m=s.pow(c,e);for(;!s.eql(m,s.ONE);){if(s.eql(m,s.ZERO))return s.ZERO;let y=1;for(let v=s.sqr(m);y<d&&!s.eql(v,s.ONE);y++)v=s.sqr(v);let E=s.pow(l,ee<<BigInt(d-y-1));l=s.sqr(E),g=s.mul(g,E),m=s.mul(m,l),d=y}return g}}function Du(t){if(t%ji===_u){let n=(t+ee)/ji;return function(r,i){let a=r.pow(i,n);if(!r.eql(r.sqr(a),i))throw new Error("Cannot find square root");return a}}if(t%Js===$s){let n=(t-$s)/Js;return function(r,i){let a=r.mul(i,Nt),o=r.pow(a,n),s=r.mul(i,o),c=r.mul(r.mul(s,Nt),o),d=r.mul(s,r.sub(c,r.ONE));if(!r.eql(r.sqr(d),i))throw new Error("Cannot find square root");return d}}return t%yu,vu(t)}var Xs=(t,n)=>(G(t,n)&ee)===ee,wu=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ki(t){let n={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},e=wu.reduce((r,i)=>(r[i]="function",r),n);return $e(t,e)}function Cu(t,n,e){if(e<ae)throw new Error("invalid exponent, negatives unsupported");if(e===ae)return t.ONE;if(e===ee)return n;let r=t.ONE,i=n;for(;e>ae;)e&ee&&(r=t.mul(r,i)),i=t.sqr(i),e>>=ee;return r}function xu(t,n){let e=new Array(n.length),r=n.reduce((a,o,s)=>t.is0(o)?a:(e[s]=a,t.mul(a,o)),t.ONE),i=t.inv(r);return n.reduceRight((a,o,s)=>t.is0(o)?a:(e[s]=t.mul(a,e[s]),t.mul(a,o)),i),e}function Hi(t,n){let e=n!==void 0?n:t.toString(2).length,r=Math.ceil(e/8);return{nBitLength:e,nByteLength:r}}function Je(t,n,e=!1,r={}){if(t<=ae)throw new Error("invalid field: expected ORDER > 0, got "+t);let{nBitLength:i,nByteLength:a}=Hi(t,n);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let o,s=Object.freeze({ORDER:t,isLE:e,BITS:i,BYTES:a,MASK:Tn(i),ZERO:ae,ONE:ee,create:c=>G(c,t),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return ae<=c&&c<t},is0:c=>c===ae,isOdd:c=>(c&ee)===ee,neg:c=>G(-c,t),eql:(c,d)=>c===d,sqr:c=>G(c*c,t),add:(c,d)=>G(c+d,t),sub:(c,d)=>G(c-d,t),mul:(c,d)=>G(c*d,t),pow:(c,d)=>Cu(s,c,d),div:(c,d)=>G(c*Dr(d,t),t),sqrN:c=>c*c,addN:(c,d)=>c+d,subN:(c,d)=>c-d,mulN:(c,d)=>c*d,inv:c=>Dr(c,t),sqrt:r.sqrt||(c=>(o||(o=Du(t)),o(s,c))),invertBatch:c=>xu(s,c),cmov:(c,d,l)=>l?d:c,toBytes:c=>e?Bt(c,a):mt(c,a),fromBytes:c=>{if(c.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+c.length);return e?pt(c):rt(c)}});return Object.freeze(s)}function Gs(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let n=t.toString(2).length;return Math.ceil(n/8)}function Wi(t){let n=Gs(t);return n+Math.ceil(n/2)}function Zs(t,n,e=!1){let r=t.length,i=Gs(n),a=Wi(n);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);let o=e?pt(t):rt(t),s=G(o,n-ee)+ee;return e?Bt(s,i):mt(s,i)}var Qs=BigInt(0),wr=BigInt(1);function zi(t,n){let e=n.negate();return t?e:n}function ec(t,n){if(!Number.isSafeInteger(t)||t<=0||t>n)throw new Error("invalid window size, expected [1.."+n+"], got W="+t)}function qi(t,n){ec(t,n);let e=Math.ceil(n/t)+1,r=2**(t-1);return{windows:e,windowSize:r}}function Eu(t,n){if(!Array.isArray(t))throw new Error("array expected");t.forEach((e,r)=>{if(!(e instanceof n))throw new Error("invalid point at index "+r)})}function Au(t,n){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((e,r)=>{if(!n.isValid(e))throw new Error("invalid scalar at index "+r)})}var $i=new WeakMap,tc=new WeakMap;function Ji(t){return tc.get(t)||1}function Cr(t,n){return{constTimeNegate:zi,hasPrecomputes(e){return Ji(e)!==1},unsafeLadder(e,r,i=t.ZERO){let a=e;for(;r>Qs;)r&wr&&(i=i.add(a)),a=a.double(),r>>=wr;return i},precomputeWindow(e,r){let{windows:i,windowSize:a}=qi(r,n),o=[],s=e,c=s;for(let d=0;d<i;d++){c=s,o.push(c);for(let l=1;l<a;l++)c=c.add(s),o.push(c);s=c.double()}return o},wNAF(e,r,i){let{windows:a,windowSize:o}=qi(e,n),s=t.ZERO,c=t.BASE,d=BigInt(2**e-1),l=2**e,g=BigInt(e);for(let m=0;m<a;m++){let y=m*o,E=Number(i&d);i>>=g,E>o&&(E-=l,i+=wr);let v=y,f=y+Math.abs(E)-1,w=m%2!==0,I=E<0;E===0?c=c.add(zi(w,r[v])):s=s.add(zi(I,r[f]))}return{p:s,f:c}},wNAFUnsafe(e,r,i,a=t.ZERO){let{windows:o,windowSize:s}=qi(e,n),c=BigInt(2**e-1),d=2**e,l=BigInt(e);for(let g=0;g<o;g++){let m=g*s;if(i===Qs)break;let y=Number(i&c);if(i>>=l,y>s&&(y-=d,i+=wr),y===0)continue;let E=r[m+Math.abs(y)-1];y<0&&(E=E.negate()),a=a.add(E)}return a},getPrecomputes(e,r,i){let a=$i.get(r);return a||(a=this.precomputeWindow(r,e),e!==1&&$i.set(r,i(a))),a},wNAFCached(e,r,i){let a=Ji(e);return this.wNAF(a,this.getPrecomputes(a,e,i),r)},wNAFCachedUnsafe(e,r,i,a){let o=Ji(e);return o===1?this.unsafeLadder(e,r,a):this.wNAFUnsafe(o,this.getPrecomputes(o,e,i),r,a)},setWindowSize(e,r){ec(r,n),tc.set(e,r),$i.delete(e)}}}function xr(t,n,e,r){if(Eu(e,t),Au(r,n),e.length!==r.length)throw new Error("arrays of points and scalars must have equal length");let i=t.ZERO,a=Ui(BigInt(e.length)),o=a>12?a-3:a>4?a-2:a?2:1,s=(1<<o)-1,c=new Array(s+1).fill(i),d=Math.floor((n.BITS-1)/o)*o,l=i;for(let g=d;g>=0;g-=o){c.fill(i);for(let y=0;y<r.length;y++){let E=r[y],v=Number(E>>BigInt(g)&BigInt(s));c[v]=c[v].add(e[y])}let m=i;for(let y=c.length-1,E=i;y>0;y--)E=E.add(c[y]),m=m.add(E);if(l=l.add(m),g!==0)for(let y=0;y<o;y++)l=l.double()}return l}function Pn(t){return Ki(t.Fp),$e(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze(pe(N(N({},Hi(t.n,t.nBitLength)),t),{p:t.Fp.ORDER}))}var He=BigInt(0),Se=BigInt(1),Er=BigInt(2),Su=BigInt(8),ku={zip215:!0};function Iu(t){let n=Pn(t);return $e(t,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze(N({},n))}function nc(t){let n=Iu(t),{Fp:e,n:r,prehash:i,hash:a,randomBytes:o,nByteLength:s,h:c}=n,d=Er<<BigInt(s*8)-Se,l=e.create,g=Je(n.n,n.nBitLength),m=n.uvRatio||((_,p)=>{try{return{isValid:!0,value:e.sqrt(_*e.inv(p))}}catch{return{isValid:!1,value:He}}}),y=n.adjustScalarBytes||(_=>_),E=n.domain||((_,p,C)=>{if(Ke("phflag",C),p.length||C)throw new Error("Contexts/pre-hash are not supported");return _});function v(_,p){Ae("coordinate "+_,p,He,d)}function f(_){if(!(_ instanceof b))throw new Error("ExtendedPoint expected")}let w=Vt((_,p)=>{let{ex:C,ey:k,ez:L}=_,F=_.is0();p==null&&(p=F?Su:e.inv(L));let j=l(C*p),H=l(k*p),Y=l(L*p);if(F)return{x:He,y:Se};if(Y!==Se)throw new Error("invZ was invalid");return{x:j,y:H}}),I=Vt(_=>{let{a:p,d:C}=n;if(_.is0())throw new Error("bad point: ZERO");let{ex:k,ey:L,ez:F,et:j}=_,H=l(k*k),Y=l(L*L),J=l(F*F),Q=l(J*J),oe=l(H*p),se=l(J*l(oe+Y)),le=l(Q+l(C*l(H*Y)));if(se!==le)throw new Error("bad point: equation left != right (1)");let de=l(k*L),ve=l(F*j);if(de!==ve)throw new Error("bad point: equation left != right (2)");return!0});class b{constructor(p,C,k,L){this.ex=p,this.ey=C,this.ez=k,this.et=L,v("x",p),v("y",C),v("z",k),v("t",L),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(p){if(p instanceof b)throw new Error("extended point not allowed");let{x:C,y:k}=p||{};return v("x",C),v("y",k),new b(C,k,Se,l(C*k))}static normalizeZ(p){let C=e.invertBatch(p.map(k=>k.ez));return p.map((k,L)=>k.toAffine(C[L])).map(b.fromAffine)}static msm(p,C){return xr(b,g,p,C)}_setWindowSize(p){P.setWindowSize(this,p)}assertValidity(){I(this)}equals(p){f(p);let{ex:C,ey:k,ez:L}=this,{ex:F,ey:j,ez:H}=p,Y=l(C*H),J=l(F*L),Q=l(k*H),oe=l(j*L);return Y===J&&Q===oe}is0(){return this.equals(b.ZERO)}negate(){return new b(l(-this.ex),this.ey,this.ez,l(-this.et))}double(){let{a:p}=n,{ex:C,ey:k,ez:L}=this,F=l(C*C),j=l(k*k),H=l(Er*l(L*L)),Y=l(p*F),J=C+k,Q=l(l(J*J)-F-j),oe=Y+j,se=oe-H,le=Y-j,de=l(Q*se),ve=l(oe*le),fe=l(Q*le),We=l(se*oe);return new b(de,ve,We,fe)}add(p){f(p);let{a:C,d:k}=n,{ex:L,ey:F,ez:j,et:H}=this,{ex:Y,ey:J,ez:Q,et:oe}=p;if(C===BigInt(-1)){let va=l((F-L)*(J+Y)),Da=l((F+L)*(J-Y)),Ur=l(Da-va);if(Ur===He)return this.double();let wa=l(j*Er*oe),Ca=l(H*Er*Q),xa=Ca+wa,Ea=Da+va,Aa=Ca-wa,il=l(xa*Ur),al=l(Ea*Aa),ol=l(xa*Aa),sl=l(Ur*Ea);return new b(il,al,sl,ol)}let se=l(L*Y),le=l(F*J),de=l(H*k*oe),ve=l(j*Q),fe=l((L+F)*(Y+J)-se-le),We=ve-de,Xe=ve+de,an=l(le-C*se),el=l(fe*We),tl=l(Xe*an),nl=l(fe*an),rl=l(We*Xe);return new b(el,tl,rl,nl)}subtract(p){return this.add(p.negate())}wNAF(p){return P.wNAFCached(this,p,b.normalizeZ)}multiply(p){let C=p;Ae("scalar",C,Se,r);let{p:k,f:L}=this.wNAF(C);return b.normalizeZ([k,L])[0]}multiplyUnsafe(p,C=b.ZERO){let k=p;return Ae("scalar",k,He,r),k===He?R:this.is0()||k===Se?this:P.wNAFCachedUnsafe(this,k,b.normalizeZ,C)}isSmallOrder(){return this.multiplyUnsafe(c).is0()}isTorsionFree(){return P.unsafeLadder(this,r).is0()}toAffine(p){return w(this,p)}clearCofactor(){let{h:p}=n;return p===Se?this:this.multiplyUnsafe(p)}static fromHex(p,C=!1){let{d:k,a:L}=n,F=e.BYTES;p=ne("pointHex",p,F),Ke("zip215",C);let j=p.slice(),H=p[F-1];j[F-1]=H&-129;let Y=pt(j),J=C?d:e.ORDER;Ae("pointHex.y",Y,He,J);let Q=l(Y*Y),oe=l(Q-Se),se=l(k*Q-L),{isValid:le,value:de}=m(oe,se);if(!le)throw new Error("Point.fromHex: invalid y coordinate");let ve=(de&Se)===Se,fe=(H&128)!==0;if(!C&&de===He&&fe)throw new Error("Point.fromHex: x=0 and x_0=1");return fe!==ve&&(de=l(-de)),b.fromAffine({x:de,y:Y})}static fromPrivateKey(p){return B(p).point}toRawBytes(){let{x:p,y:C}=this.toAffine(),k=Bt(C,e.BYTES);return k[k.length-1]|=p&Se?128:0,k}toHex(){return nt(this.toRawBytes())}}b.BASE=new b(n.Gx,n.Gy,Se,l(n.Gx*n.Gy)),b.ZERO=new b(He,Se,Se,He);let{BASE:T,ZERO:R}=b,P=Cr(b,s*8);function M(_){return G(_,r)}function V(_){return M(pt(_))}function B(_){let p=e.BYTES;_=ne("private key",_,p);let C=ne("hashed private key",a(_),2*p),k=y(C.slice(0,p)),L=C.slice(p,2*p),F=V(k),j=T.multiply(F),H=j.toRawBytes();return{head:k,prefix:L,scalar:F,point:j,pointBytes:H}}function ie(_){return B(_).pointBytes}function X(_=new Uint8Array,...p){let C=it(...p);return V(a(E(C,ne("context",_),!!i)))}function q(_,p,C={}){_=ne("message",_),i&&(_=i(_));let{prefix:k,scalar:L,pointBytes:F}=B(p),j=X(C.context,k,_),H=T.multiply(j).toRawBytes(),Y=X(C.context,H,F,_),J=M(j+Y*L);Ae("signature.s",J,He,r);let Q=it(H,Bt(J,e.BYTES));return ne("result",Q,e.BYTES*2)}let he=ku;function S(_,p,C,k=he){let{context:L,zip215:F}=k,j=e.BYTES;_=ne("signature",_,2*j),p=ne("message",p),C=ne("publicKey",C,j),F!==void 0&&Ke("zip215",F),i&&(p=i(p));let H=pt(_.slice(j,2*j)),Y,J,Q;try{Y=b.fromHex(C,F),J=b.fromHex(_.slice(0,j),F),Q=T.multiplyUnsafe(H)}catch{return!1}if(!F&&Y.isSmallOrder())return!1;let oe=X(L,J.toRawBytes(),Y.toRawBytes(),p);return J.add(Y.multiplyUnsafe(oe)).subtract(Q).clearCofactor().equals(b.ZERO)}return T._setWindowSize(8),{CURVE:n,getPublicKey:ie,sign:q,verify:S,ExtendedPoint:b,utils:{getExtendedPublicKey:B,randomPrivateKey:()=>o(e.BYTES),precompute(_=8,p=b.BASE){return p._setWindowSize(_),p.multiply(BigInt(3)),p}}}}var Xi=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),rc=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),jm=BigInt(0),Mu=BigInt(1),ic=BigInt(2),Km=BigInt(3),Ou=BigInt(5),Tu=BigInt(8);function Pu(t){let n=BigInt(10),e=BigInt(20),r=BigInt(40),i=BigInt(80),a=Xi,s=t*t%a*t%a,c=te(s,ic,a)*s%a,d=te(c,Mu,a)*t%a,l=te(d,Ou,a)*d%a,g=te(l,n,a)*l%a,m=te(g,e,a)*g%a,y=te(m,r,a)*m%a,E=te(y,i,a)*y%a,v=te(E,i,a)*y%a,f=te(v,n,a)*l%a;return{pow_p_5_8:te(f,ic,a)*t%a,b2:s}}function Ru(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function Bu(t,n){let e=Xi,r=G(n*n*n,e),i=G(r*r*n,e),a=Pu(t*i).pow_p_5_8,o=G(t*r*a,e),s=G(n*o*o,e),c=o,d=G(o*rc,e),l=s===t,g=s===G(-t,e),m=s===G(-t*rc,e);return l&&(o=c),(g||m)&&(o=d),Xs(o,e)&&(o=G(-o,e)),{isValid:l||g,value:o}}var Vu=Je(Xi,void 0,!0),Nu={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:Vu,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:Tu,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:Io,randomBytes:er,adjustScalarBytes:Ru,uvRatio:Bu},Gi=nc(Nu);var ha=Sa(ll(),1);var Lu=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_t=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),gt=new Uint32Array(64),Zi=class extends tr{constructor(){super(64,32,8,!1),this.A=_t[0]|0,this.B=_t[1]|0,this.C=_t[2]|0,this.D=_t[3]|0,this.E=_t[4]|0,this.F=_t[5]|0,this.G=_t[6]|0,this.H=_t[7]|0}get(){let{A:n,B:e,C:r,D:i,E:a,F:o,G:s,H:c}=this;return[n,e,r,i,a,o,s,c]}set(n,e,r,i,a,o,s,c){this.A=n|0,this.B=e|0,this.C=r|0,this.D=i|0,this.E=a|0,this.F=o|0,this.G=s|0,this.H=c|0}process(n,e){for(let g=0;g<16;g++,e+=4)gt[g]=n.getUint32(e,!1);for(let g=16;g<64;g++){let m=gt[g-15],y=gt[g-2],E=je(m,7)^je(m,18)^m>>>3,v=je(y,17)^je(y,19)^y>>>10;gt[g]=v+gt[g-7]+E+gt[g-16]|0}let{A:r,B:i,C:a,D:o,E:s,F:c,G:d,H:l}=this;for(let g=0;g<64;g++){let m=je(s,6)^je(s,11)^je(s,25),y=l+m+wo(s,c,d)+Lu[g]+gt[g]|0,v=(je(r,2)^je(r,13)^je(r,22))+Co(r,i,a)|0;l=d,d=c,c=s,s=o+y|0,o=a,a=i,i=r,r=y+v|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,o=o+this.D|0,s=s+this.E|0,c=c+this.F|0,d=d+this.G|0,l=l+this.H|0,this.set(r,i,a,o,s,c,d,l)}roundClean(){gt.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var nn=zt(()=>new Zi);var Ar=class extends Qn{constructor(n,e){super(),this.finished=!1,this.destroyed=!1,yo(n);let r=Zn(e);if(this.iHash=n.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,a=new Uint8Array(i);a.set(r.length>i?n.create().update(r).digest():r);for(let o=0;o<a.length;o++)a[o]^=54;this.iHash.update(a),this.oHash=n.create();for(let o=0;o<a.length;o++)a[o]^=106;this.oHash.update(a),a.fill(0)}update(n){return Wt(this),this.iHash.update(n),this}digestInto(n){Wt(this),Gn(n,this.outputLen),this.finished=!0,this.iHash.digestInto(n),this.oHash.update(n),this.oHash.digestInto(n),this.destroy()}digest(){let n=new Uint8Array(this.oHash.outputLen);return this.digestInto(n),n}_cloneInto(n){n||(n=Object.create(Object.getPrototypeOf(this),{}));let{oHash:e,iHash:r,finished:i,destroyed:a,blockLen:o,outputLen:s}=this;return n=n,n.finished=i,n.destroyed=a,n.blockLen=o,n.outputLen=s,n.oHash=e._cloneInto(n.oHash),n.iHash=r._cloneInto(n.iHash),n}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Qi=(t,n,e)=>new Ar(t,n).update(e).digest();Qi.create=(t,n)=>new Ar(t,n);function ac(t){t.lowS!==void 0&&Ke("lowS",t.lowS),t.prehash!==void 0&&Ke("prehash",t.prehash)}function Fu(t){let n=Pn(t);$e(n,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:e,Fp:r,a:i}=n;if(e){if(!r.eql(i,r.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof e!="object"||typeof e.beta!="bigint"||typeof e.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze(N({},n))}var{bytesToNumberBE:Uu,hexToBytes:Yu}=vr,ea=class extends Error{constructor(n=""){super(n)}},at={Err:ea,_tlv:{encode:(t,n)=>{let{Err:e}=at;if(t<0||t>256)throw new e("tlv.encode: wrong tag");if(n.length&1)throw new e("tlv.encode: unpadded data");let r=n.length/2,i=Pt(r);if(i.length/2&128)throw new e("tlv.encode: long form length too big");let a=r>127?Pt(i.length/2|128):"";return Pt(t)+a+i+n},decode(t,n){let{Err:e}=at,r=0;if(t<0||t>256)throw new e("tlv.encode: wrong tag");if(n.length<2||n[r++]!==t)throw new e("tlv.decode: wrong tlv");let i=n[r++],a=!!(i&128),o=0;if(!a)o=i;else{let c=i&127;if(!c)throw new e("tlv.decode(long): indefinite length not supported");if(c>4)throw new e("tlv.decode(long): byte length is too big");let d=n.subarray(r,r+c);if(d.length!==c)throw new e("tlv.decode: length bytes not complete");if(d[0]===0)throw new e("tlv.decode(long): zero leftmost byte");for(let l of d)o=o<<8|l;if(r+=c,o<128)throw new e("tlv.decode(long): not minimal encoding")}let s=n.subarray(r,r+o);if(s.length!==o)throw new e("tlv.decode: wrong value length");return{v:s,l:n.subarray(r+o)}}},_int:{encode(t){let{Err:n}=at;if(t<ot)throw new n("integer: negative integers are not allowed");let e=Pt(t);if(Number.parseInt(e[0],16)&8&&(e="00"+e),e.length&1)throw new n("unexpected DER parsing assertion: unpadded hex");return e},decode(t){let{Err:n}=at;if(t[0]&128)throw new n("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new n("invalid signature integer: unnecessary leading zero");return Uu(t)}},toSig(t){let{Err:n,_int:e,_tlv:r}=at,i=typeof t=="string"?Yu(t):t;tn(i);let{v:a,l:o}=r.decode(48,i);if(o.length)throw new n("invalid signature: left bytes after parsing");let{v:s,l:c}=r.decode(2,a),{v:d,l}=r.decode(2,c);if(l.length)throw new n("invalid signature: left bytes after parsing");return{r:e.decode(s),s:e.decode(d)}},hexFromSig(t){let{_tlv:n,_int:e}=at,r=n.encode(2,e.encode(t.r)),i=n.encode(2,e.encode(t.s)),a=r+i;return n.encode(48,a)}},ot=BigInt(0),ce=BigInt(1),t_=BigInt(2),oc=BigInt(3),n_=BigInt(4);function ju(t){let n=Fu(t),{Fp:e}=n,r=Je(n.n,n.nBitLength),i=n.toBytes||((v,f,w)=>{let I=f.toAffine();return it(Uint8Array.from([4]),e.toBytes(I.x),e.toBytes(I.y))}),a=n.fromBytes||(v=>{let f=v.subarray(1),w=e.fromBytes(f.subarray(0,e.BYTES)),I=e.fromBytes(f.subarray(e.BYTES,2*e.BYTES));return{x:w,y:I}});function o(v){let{a:f,b:w}=n,I=e.sqr(v),b=e.mul(I,v);return e.add(e.add(b,e.mul(v,f)),w)}if(!e.eql(e.sqr(n.Gy),o(n.Gx)))throw new Error("bad generator point: equation left != right");function s(v){return On(v,ce,n.n)}function c(v){let{allowedPrivateKeyLengths:f,nByteLength:w,wrapPrivateKey:I,n:b}=n;if(f&&typeof v!="bigint"){if(ft(v)&&(v=nt(v)),typeof v!="string"||!f.includes(v.length))throw new Error("invalid private key");v=v.padStart(w*2,"0")}let T;try{T=typeof v=="bigint"?v:rt(ne("private key",v,w))}catch{throw new Error("invalid private key, expected hex or "+w+" bytes, got "+typeof v)}return I&&(T=G(T,b)),Ae("private key",T,ce,b),T}function d(v){if(!(v instanceof m))throw new Error("ProjectivePoint expected")}let l=Vt((v,f)=>{let{px:w,py:I,pz:b}=v;if(e.eql(b,e.ONE))return{x:w,y:I};let T=v.is0();f==null&&(f=T?e.ONE:e.inv(b));let R=e.mul(w,f),P=e.mul(I,f),M=e.mul(b,f);if(T)return{x:e.ZERO,y:e.ZERO};if(!e.eql(M,e.ONE))throw new Error("invZ was invalid");return{x:R,y:P}}),g=Vt(v=>{if(v.is0()){if(n.allowInfinityPoint&&!e.is0(v.py))return;throw new Error("bad point: ZERO")}let{x:f,y:w}=v.toAffine();if(!e.isValid(f)||!e.isValid(w))throw new Error("bad point: x or y not FE");let I=e.sqr(w),b=o(f);if(!e.eql(I,b))throw new Error("bad point: equation left != right");if(!v.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class m{constructor(f,w,I){if(this.px=f,this.py=w,this.pz=I,f==null||!e.isValid(f))throw new Error("x required");if(w==null||!e.isValid(w))throw new Error("y required");if(I==null||!e.isValid(I))throw new Error("z required");Object.freeze(this)}static fromAffine(f){let{x:w,y:I}=f||{};if(!f||!e.isValid(w)||!e.isValid(I))throw new Error("invalid affine point");if(f instanceof m)throw new Error("projective point not allowed");let b=T=>e.eql(T,e.ZERO);return b(w)&&b(I)?m.ZERO:new m(w,I,e.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(f){let w=e.invertBatch(f.map(I=>I.pz));return f.map((I,b)=>I.toAffine(w[b])).map(m.fromAffine)}static fromHex(f){let w=m.fromAffine(a(ne("pointHex",f)));return w.assertValidity(),w}static fromPrivateKey(f){return m.BASE.multiply(c(f))}static msm(f,w){return xr(m,r,f,w)}_setWindowSize(f){E.setWindowSize(this,f)}assertValidity(){g(this)}hasEvenY(){let{y:f}=this.toAffine();if(e.isOdd)return!e.isOdd(f);throw new Error("Field doesn't support isOdd")}equals(f){d(f);let{px:w,py:I,pz:b}=this,{px:T,py:R,pz:P}=f,M=e.eql(e.mul(w,P),e.mul(T,b)),V=e.eql(e.mul(I,P),e.mul(R,b));return M&&V}negate(){return new m(this.px,e.neg(this.py),this.pz)}double(){let{a:f,b:w}=n,I=e.mul(w,oc),{px:b,py:T,pz:R}=this,P=e.ZERO,M=e.ZERO,V=e.ZERO,B=e.mul(b,b),ie=e.mul(T,T),X=e.mul(R,R),q=e.mul(b,T);return q=e.add(q,q),V=e.mul(b,R),V=e.add(V,V),P=e.mul(f,V),M=e.mul(I,X),M=e.add(P,M),P=e.sub(ie,M),M=e.add(ie,M),M=e.mul(P,M),P=e.mul(q,P),V=e.mul(I,V),X=e.mul(f,X),q=e.sub(B,X),q=e.mul(f,q),q=e.add(q,V),V=e.add(B,B),B=e.add(V,B),B=e.add(B,X),B=e.mul(B,q),M=e.add(M,B),X=e.mul(T,R),X=e.add(X,X),B=e.mul(X,q),P=e.sub(P,B),V=e.mul(X,ie),V=e.add(V,V),V=e.add(V,V),new m(P,M,V)}add(f){d(f);let{px:w,py:I,pz:b}=this,{px:T,py:R,pz:P}=f,M=e.ZERO,V=e.ZERO,B=e.ZERO,ie=n.a,X=e.mul(n.b,oc),q=e.mul(w,T),he=e.mul(I,R),S=e.mul(b,P),O=e.add(w,I),_=e.add(T,R);O=e.mul(O,_),_=e.add(q,he),O=e.sub(O,_),_=e.add(w,b);let p=e.add(T,P);return _=e.mul(_,p),p=e.add(q,S),_=e.sub(_,p),p=e.add(I,b),M=e.add(R,P),p=e.mul(p,M),M=e.add(he,S),p=e.sub(p,M),B=e.mul(ie,_),M=e.mul(X,S),B=e.add(M,B),M=e.sub(he,B),B=e.add(he,B),V=e.mul(M,B),he=e.add(q,q),he=e.add(he,q),S=e.mul(ie,S),_=e.mul(X,_),he=e.add(he,S),S=e.sub(q,S),S=e.mul(ie,S),_=e.add(_,S),q=e.mul(he,_),V=e.add(V,q),q=e.mul(p,_),M=e.mul(O,M),M=e.sub(M,q),q=e.mul(O,he),B=e.mul(p,B),B=e.add(B,q),new m(M,V,B)}subtract(f){return this.add(f.negate())}is0(){return this.equals(m.ZERO)}wNAF(f){return E.wNAFCached(this,f,m.normalizeZ)}multiplyUnsafe(f){let{endo:w,n:I}=n;Ae("scalar",f,ot,I);let b=m.ZERO;if(f===ot)return b;if(this.is0()||f===ce)return this;if(!w||E.hasPrecomputes(this))return E.wNAFCachedUnsafe(this,f,m.normalizeZ);let{k1neg:T,k1:R,k2neg:P,k2:M}=w.splitScalar(f),V=b,B=b,ie=this;for(;R>ot||M>ot;)R&ce&&(V=V.add(ie)),M&ce&&(B=B.add(ie)),ie=ie.double(),R>>=ce,M>>=ce;return T&&(V=V.negate()),P&&(B=B.negate()),B=new m(e.mul(B.px,w.beta),B.py,B.pz),V.add(B)}multiply(f){let{endo:w,n:I}=n;Ae("scalar",f,ce,I);let b,T;if(w){let{k1neg:R,k1:P,k2neg:M,k2:V}=w.splitScalar(f),{p:B,f:ie}=this.wNAF(P),{p:X,f:q}=this.wNAF(V);B=E.constTimeNegate(R,B),X=E.constTimeNegate(M,X),X=new m(e.mul(X.px,w.beta),X.py,X.pz),b=B.add(X),T=ie.add(q)}else{let{p:R,f:P}=this.wNAF(f);b=R,T=P}return m.normalizeZ([b,T])[0]}multiplyAndAddUnsafe(f,w,I){let b=m.BASE,T=(P,M)=>M===ot||M===ce||!P.equals(b)?P.multiplyUnsafe(M):P.multiply(M),R=T(this,w).add(T(f,I));return R.is0()?void 0:R}toAffine(f){return l(this,f)}isTorsionFree(){let{h:f,isTorsionFree:w}=n;if(f===ce)return!0;if(w)return w(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:f,clearCofactor:w}=n;return f===ce?this:w?w(m,this):this.multiplyUnsafe(n.h)}toRawBytes(f=!0){return Ke("isCompressed",f),this.assertValidity(),i(m,this,f)}toHex(f=!0){return Ke("isCompressed",f),nt(this.toRawBytes(f))}}m.BASE=new m(n.Gx,n.Gy,e.ONE),m.ZERO=new m(e.ZERO,e.ONE,e.ZERO);let y=n.nBitLength,E=Cr(m,n.endo?Math.ceil(y/2):y);return{CURVE:n,ProjectivePoint:m,normPrivateKeyToScalar:c,weierstrassEquation:o,isWithinCurveOrder:s}}function Ku(t){let n=Pn(t);return $e(n,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze(N({lowS:!0},n))}function sc(t){let n=Ku(t),{Fp:e,n:r}=n,i=e.BYTES+1,a=2*e.BYTES+1;function o(S){return G(S,r)}function s(S){return Dr(S,r)}let{ProjectivePoint:c,normPrivateKeyToScalar:d,weierstrassEquation:l,isWithinCurveOrder:g}=ju(pe(N({},n),{toBytes(S,O,_){let p=O.toAffine(),C=e.toBytes(p.x),k=it;return Ke("isCompressed",_),_?k(Uint8Array.from([O.hasEvenY()?2:3]),C):k(Uint8Array.from([4]),C,e.toBytes(p.y))},fromBytes(S){let O=S.length,_=S[0],p=S.subarray(1);if(O===i&&(_===2||_===3)){let C=rt(p);if(!On(C,ce,e.ORDER))throw new Error("Point is not on curve");let k=l(C),L;try{L=e.sqrt(k)}catch(H){let Y=H instanceof Error?": "+H.message:"";throw new Error("Point is not on curve"+Y)}let F=(L&ce)===ce;return(_&1)===1!==F&&(L=e.neg(L)),{x:C,y:L}}else if(O===a&&_===4){let C=e.fromBytes(p.subarray(0,e.BYTES)),k=e.fromBytes(p.subarray(e.BYTES,2*e.BYTES));return{x:C,y:k}}else{let C=i,k=a;throw new Error("invalid Point, expected length of "+C+", or uncompressed "+k+", got "+O)}}})),m=S=>nt(mt(S,n.nByteLength));function y(S){let O=r>>ce;return S>O}function E(S){return y(S)?o(-S):S}let v=(S,O,_)=>rt(S.slice(O,_));class f{constructor(O,_,p){this.r=O,this.s=_,this.recovery=p,this.assertValidity()}static fromCompact(O){let _=n.nByteLength;return O=ne("compactSignature",O,_*2),new f(v(O,0,_),v(O,_,2*_))}static fromDER(O){let{r:_,s:p}=at.toSig(ne("DER",O));return new f(_,p)}assertValidity(){Ae("r",this.r,ce,r),Ae("s",this.s,ce,r)}addRecoveryBit(O){return new f(this.r,this.s,O)}recoverPublicKey(O){let{r:_,s:p,recovery:C}=this,k=P(ne("msgHash",O));if(C==null||![0,1,2,3].includes(C))throw new Error("recovery id invalid");let L=C===2||C===3?_+n.n:_;if(L>=e.ORDER)throw new Error("recovery id 2 or 3 invalid");let F=(C&1)===0?"02":"03",j=c.fromHex(F+m(L)),H=s(L),Y=o(-k*H),J=o(p*H),Q=c.BASE.multiplyAndAddUnsafe(j,Y,J);if(!Q)throw new Error("point at infinify");return Q.assertValidity(),Q}hasHighS(){return y(this.s)}normalizeS(){return this.hasHighS()?new f(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return Rt(this.toDERHex())}toDERHex(){return at.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Rt(this.toCompactHex())}toCompactHex(){return m(this.r)+m(this.s)}}let w={isValidPrivateKey(S){try{return d(S),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{let S=Wi(n.n);return Zs(n.randomBytes(S),n.n)},precompute(S=8,O=c.BASE){return O._setWindowSize(S),O.multiply(BigInt(3)),O}};function I(S,O=!0){return c.fromPrivateKey(S).toRawBytes(O)}function b(S){let O=ft(S),_=typeof S=="string",p=(O||_)&&S.length;return O?p===i||p===a:_?p===2*i||p===2*a:S instanceof c}function T(S,O,_=!0){if(b(S))throw new Error("first arg must be private key");if(!b(O))throw new Error("second arg must be public key");return c.fromHex(O).multiply(d(S)).toRawBytes(_)}let R=n.bits2int||function(S){if(S.length>8192)throw new Error("input is too large");let O=rt(S),_=S.length*8-n.nBitLength;return _>0?O>>BigInt(_):O},P=n.bits2int_modN||function(S){return o(R(S))},M=Tn(n.nBitLength);function V(S){return Ae("num < 2^"+n.nBitLength,S,ot,M),mt(S,n.nByteLength)}function B(S,O,_=ie){if(["recovered","canonical"].some(se=>se in _))throw new Error("sign() legacy options not supported");let{hash:p,randomBytes:C}=n,{lowS:k,prehash:L,extraEntropy:F}=_;k==null&&(k=!0),S=ne("msgHash",S),ac(_),L&&(S=ne("prehashed msgHash",p(S)));let j=P(S),H=d(O),Y=[V(H),V(j)];if(F!=null&&F!==!1){let se=F===!0?C(e.BYTES):F;Y.push(ne("extraEntropy",se))}let J=it(...Y),Q=j;function oe(se){let le=R(se);if(!g(le))return;let de=s(le),ve=c.BASE.multiply(le).toAffine(),fe=o(ve.x);if(fe===ot)return;let We=o(de*o(Q+fe*H));if(We===ot)return;let Xe=(ve.x===fe?0:2)|Number(ve.y&ce),an=We;return k&&y(We)&&(an=E(We),Xe^=1),new f(fe,an,Xe)}return{seed:J,k2sig:oe}}let ie={lowS:n.lowS,prehash:!1},X={lowS:n.lowS,prehash:!1};function q(S,O,_=ie){let{seed:p,k2sig:C}=B(S,O,_),k=n;return Yi(k.hash.outputLen,k.nByteLength,k.hmac)(p,C)}c.BASE._setWindowSize(8);function he(S,O,_,p=X){let C=S;O=ne("msgHash",O),_=ne("publicKey",_);let{lowS:k,prehash:L,format:F}=p;if(ac(p),"strict"in p)throw new Error("options.strict was renamed to lowS");if(F!==void 0&&F!=="compact"&&F!=="der")throw new Error("format must be compact or der");let j=typeof C=="string"||ft(C),H=!j&&!F&&typeof C=="object"&&C!==null&&typeof C.r=="bigint"&&typeof C.s=="bigint";if(!j&&!H)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let Y,J;try{if(H&&(Y=new f(C.r,C.s)),j){try{F!=="compact"&&(Y=f.fromDER(C))}catch(Xe){if(!(Xe instanceof at.Err))throw Xe}!Y&&F!=="der"&&(Y=f.fromCompact(C))}J=c.fromHex(_)}catch{return!1}if(!Y||k&&Y.hasHighS())return!1;L&&(O=n.hash(O));let{r:Q,s:oe}=Y,se=P(O),le=s(oe),de=o(se*le),ve=o(Q*le),fe=c.BASE.multiplyAndAddUnsafe(J,de,ve)?.toAffine();return fe?o(fe.x)===Q:!1}return{CURVE:n,getPublicKey:I,getSharedSecret:T,sign:q,verify:he,ProjectivePoint:c,Signature:f,utils:w}}function Hu(t){return{hash:t,hmac:(n,...e)=>Qi(t,n,Zr(...e)),randomBytes:er}}function Sr(t,n){let e=r=>sc(N(N({},t),Hu(r)));return pe(N({},e(n)),{create:e})}var dc=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),cc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Wu=BigInt(1),ta=BigInt(2),lc=(t,n)=>(t+n/ta)/n;function zu(t){let n=dc,e=BigInt(3),r=BigInt(6),i=BigInt(11),a=BigInt(22),o=BigInt(23),s=BigInt(44),c=BigInt(88),d=t*t*t%n,l=d*d*t%n,g=te(l,e,n)*l%n,m=te(g,e,n)*l%n,y=te(m,ta,n)*d%n,E=te(y,i,n)*y%n,v=te(E,a,n)*E%n,f=te(v,s,n)*v%n,w=te(f,c,n)*f%n,I=te(w,s,n)*v%n,b=te(I,e,n)*l%n,T=te(b,o,n)*E%n,R=te(T,r,n)*d%n,P=te(R,ta,n);if(!na.eql(na.sqr(P),t))throw new Error("Cannot find square root");return P}var na=Je(dc,void 0,void 0,{sqrt:zu}),yt=Sr({a:BigInt(0),b:BigInt(7),Fp:na,n:cc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let n=cc,e=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Wu*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=e,o=BigInt("0x100000000000000000000000000000000"),s=lc(a*t,n),c=lc(-r*t,n),d=G(t-s*e-c*i,n),l=G(-s*r-c*a,n),g=d>o,m=l>o;if(g&&(d=n-d),m&&(l=n-l),d>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:g,k1:d,k2neg:m,k2:l}}}},nn),f_=BigInt(0);var p_=yt.ProjectivePoint;var uc=Je(BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff")),qu=uc.create(BigInt("-3")),$u=BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),kr=Sr({a:qu,b:$u,Fp:uc,n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5"),h:BigInt(1),lowS:!1},nn);var Ju=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),fc=new Uint8Array(new Array(16).fill(0).map((t,n)=>n)),Xu=fc.map(t=>(9*t+5)%16),ia=[fc],aa=[Xu];for(let t=0;t<4;t++)for(let n of[ia,aa])n.push(n[t].map(e=>Ju[e]));var pc=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(t=>new Uint8Array(t)),Gu=ia.map((t,n)=>t.map(e=>pc[n][e])),Zu=aa.map((t,n)=>t.map(e=>pc[n][e])),Qu=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),eh=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function hc(t,n,e,r){return t===0?n^e^r:t===1?n&e|~n&r:t===2?(n|~e)^r:t===3?n&r|e&~r:n^(e|~r)}var Ir=new Uint32Array(16),ra=class extends tr{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:n,h1:e,h2:r,h3:i,h4:a}=this;return[n,e,r,i,a]}set(n,e,r,i,a){this.h0=n|0,this.h1=e|0,this.h2=r|0,this.h3=i|0,this.h4=a|0}process(n,e){for(let y=0;y<16;y++,e+=4)Ir[y]=n.getUint32(e,!0);let r=this.h0|0,i=r,a=this.h1|0,o=a,s=this.h2|0,c=s,d=this.h3|0,l=d,g=this.h4|0,m=g;for(let y=0;y<5;y++){let E=4-y,v=Qu[y],f=eh[y],w=ia[y],I=aa[y],b=Gu[y],T=Zu[y];for(let R=0;R<16;R++){let P=Dn(r+hc(y,a,s,d)+Ir[w[R]]+v,b[R])+g|0;r=g,g=d,d=Dn(s,10)|0,s=a,a=P}for(let R=0;R<16;R++){let P=Dn(i+hc(E,o,c,l)+Ir[I[R]]+f,T[R])+m|0;i=m,m=l,l=Dn(c,10)|0,c=o,o=P}}this.set(this.h1+s+l|0,this.h2+d+m|0,this.h3+g+i|0,this.h4+r+o|0,this.h0+a+c|0)}roundClean(){Ir.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}},oa=zt(()=>new ra);var gc=[],yc=[],bc=[],th=BigInt(0),Rn=BigInt(1),nh=BigInt(2),rh=BigInt(7),ih=BigInt(256),ah=BigInt(113);for(let t=0,n=Rn,e=1,r=0;t<24;t++){[e,r]=[r,(2*e+3*r)%5],gc.push(2*(5*r+e)),yc.push((t+1)*(t+2)/2%64);let i=th;for(let a=0;a<7;a++)n=(n<<Rn^(n>>rh)*ah)%ih,n&nh&&(i^=Rn<<(Rn<<BigInt(a))-Rn);bc.push(i)}var[oh,sh]=xo(bc,!0),mc=(t,n,e)=>e>32?So(t,n,e):Eo(t,n,e),_c=(t,n,e)=>e>32?ko(t,n,e):Ao(t,n,e);function ch(t,n=24){let e=new Uint32Array(10);for(let r=24-n;r<24;r++){for(let o=0;o<10;o++)e[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){let s=(o+8)%10,c=(o+2)%10,d=e[c],l=e[c+1],g=mc(d,l,1)^e[s],m=_c(d,l,1)^e[s+1];for(let y=0;y<50;y+=10)t[o+y]^=g,t[o+y+1]^=m}let i=t[2],a=t[3];for(let o=0;o<24;o++){let s=yc[o],c=mc(i,a,s),d=_c(i,a,s),l=gc[o];i=t[l],a=t[l+1],t[l]=c,t[l+1]=d}for(let o=0;o<50;o+=10){for(let s=0;s<10;s++)e[s]=t[o+s];for(let s=0;s<10;s++)t[o+s]^=~e[(s+2)%10]&e[(s+4)%10]}t[0]^=oh[r],t[1]^=sh[r]}e.fill(0)}var Mr=class t extends Qn{constructor(n,e,r,i=!1,a=24){if(super(),this.blockLen=n,this.suffix=e,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,Jr(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=vo(this.state)}keccak(){Xr||Gr(this.state32),ch(this.state32,this.rounds),Xr||Gr(this.state32),this.posOut=0,this.pos=0}update(n){Wt(this);let{blockLen:e,state:r}=this;n=Zn(n);let i=n.length;for(let a=0;a<i;){let o=Math.min(e-this.pos,i-a);for(let s=0;s<o;s++)r[this.pos++]^=n[a++];this.pos===e&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:n,suffix:e,pos:r,blockLen:i}=this;n[r]^=e,(e&128)!==0&&r===i-1&&this.keccak(),n[i-1]^=128,this.keccak()}writeInto(n){Wt(this,!1),Gn(n),this.finish();let e=this.state,{blockLen:r}=this;for(let i=0,a=n.length;i<a;){this.posOut>=r&&this.keccak();let o=Math.min(r-this.posOut,a-i);n.set(e.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return n}xofInto(n){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(n)}xof(n){return Jr(n),this.xofInto(new Uint8Array(n))}digestInto(n){if(bo(n,this),this.finished)throw new Error("digest() was already called");return this.writeInto(n),this.destroy(),n}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(n){let{blockLen:e,suffix:r,outputLen:i,rounds:a,enableXOF:o}=this;return n||(n=new t(e,r,i,o,a)),n.state32.set(this.state32),n.pos=this.pos,n.posOut=this.posOut,n.finished=this.finished,n.rounds=a,n.suffix=r,n.outputLen=i,n.enableXOF=o,n.destroyed=this.destroyed,n}},bt=(t,n,e)=>zt(()=>new Mr(n,t,e)),A_=bt(6,144,224/8),S_=bt(6,136,256/8),k_=bt(6,104,384/8),I_=bt(6,72,512/8),M_=bt(1,144,224/8),vc=bt(1,136,256/8),O_=bt(1,104,384/8),T_=bt(1,72,512/8),Dc=(t,n,e)=>Do((r={})=>new Mr(n,t,r.dkLen===void 0?e:r.dkLen,!0)),P_=Dc(31,168,128/8),R_=Dc(31,136,256/8);var Fc=Sa(Cc(),1);function Sc(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function kc(t,n){return Array.isArray(n)?n.length===0?!0:t?n.every(e=>typeof e=="string"):n.every(e=>Number.isSafeInteger(e)):!1}function lh(t){if(typeof t!="function")throw new Error("function expected");return!0}function Vn(t,n){if(typeof n!="string")throw new Error(`${t}: string expected`);return!0}function Ic(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function sa(t){if(!Array.isArray(t))throw new Error("array expected")}function Mc(t,n){if(!kc(!0,n))throw new Error(`${t}: array of strings expected`)}function Oc(t,n){if(!kc(!1,n))throw new Error(`${t}: array of numbers expected`)}function dh(...t){let n=a=>a,e=(a,o)=>s=>a(o(s)),r=t.map(a=>a.encode).reduceRight(e,n),i=t.map(a=>a.decode).reduce(e,n);return{encode:r,decode:i}}function uh(t){let n=typeof t=="string"?t.split(""):t,e=n.length;Mc("alphabet",n);let r=new Map(n.map((i,a)=>[i,a]));return{encode:i=>(sa(i),i.map(a=>{if(!Number.isSafeInteger(a)||a<0||a>=e)throw new Error(`alphabet.encode: digit index outside alphabet "${a}". Allowed: ${t}`);return n[a]})),decode:i=>(sa(i),i.map(a=>{Vn("alphabet.decode",a);let o=r.get(a);if(o===void 0)throw new Error(`Unknown letter: "${a}". Allowed: ${t}`);return o}))}}function hh(t=""){return Vn("join",t),{encode:n=>(Mc("join.decode",n),n.join(t)),decode:n=>(Vn("join.decode",n),n.split(t))}}var Tc=(t,n)=>n===0?t:Tc(n,t%n),Tr=(t,n)=>t+(n-Tc(t,n)),Or=(()=>{let t=[];for(let n=0;n<40;n++)t.push(2**n);return t})();function ca(t,n,e,r){if(sa(t),n<=0||n>32)throw new Error(`convertRadix2: wrong from=${n}`);if(e<=0||e>32)throw new Error(`convertRadix2: wrong to=${e}`);if(Tr(n,e)>32)throw new Error(`convertRadix2: carry overflow from=${n} to=${e} carryBits=${Tr(n,e)}`);let i=0,a=0,o=Or[n],s=Or[e]-1,c=[];for(let d of t){if(Ic(d),d>=o)throw new Error(`convertRadix2: invalid data word=${d} from=${n}`);if(i=i<<n|d,a+n>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${n}`);for(a+=n;a>=e;a-=e)c.push((i>>a-e&s)>>>0);let l=Or[a];if(l===void 0)throw new Error("invalid carry");i&=l-1}if(i=i<<e-a&s,!r&&a>=n)throw new Error("Excess padding");if(!r&&i>0)throw new Error(`Non-zero padding: ${i}`);return r&&a>0&&c.push(i>>>0),c}function fh(t,n=!1){if(Ic(t),t<=0||t>32)throw new Error("radix2: bits should be in (0..32]");if(Tr(8,t)>32||Tr(t,8)>32)throw new Error("radix2: carry overflow");return{encode:e=>{if(!Sc(e))throw new Error("radix2.encode input should be Uint8Array");return ca(Array.from(e),8,t,!n)},decode:e=>(Oc("radix2.decode",e),Uint8Array.from(ca(e,t,8,n)))}}function xc(t){return lh(t),function(...n){try{return t.apply(null,n)}catch{}}}var la=dh(uh("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),hh("")),Ec=[996825010,642813549,513874426,1027748829,705979059];function Bn(t){let n=t>>25,e=(t&33554431)<<5;for(let r=0;r<Ec.length;r++)(n>>r&1)===1&&(e^=Ec[r]);return e}function Ac(t,n,e=1){let r=t.length,i=1;for(let a=0;a<r;a++){let o=t.charCodeAt(a);if(o<33||o>126)throw new Error(`Invalid prefix (${t})`);i=Bn(i)^o>>5}i=Bn(i);for(let a=0;a<r;a++)i=Bn(i)^t.charCodeAt(a)&31;for(let a of n)i=Bn(i)^a;for(let a=0;a<6;a++)i=Bn(i);return i^=e,la.encode(ca([i%Or[30]],30,5,!1))}function ph(t){let n=t==="bech32"?1:734539939,e=fh(5),r=e.decode,i=e.encode,a=xc(r);function o(g,m,y=90){Vn("bech32.encode prefix",g),Sc(m)&&(m=Array.from(m)),Oc("bech32.encode",m);let E=g.length;if(E===0)throw new TypeError(`Invalid prefix length ${E}`);let v=E+7+m.length;if(y!==!1&&v>y)throw new TypeError(`Length ${v} exceeds limit ${y}`);let f=g.toLowerCase(),w=Ac(f,m,n);return`${f}1${la.encode(m)}${w}`}function s(g,m=90){Vn("bech32.decode input",g);let y=g.length;if(y<8||m!==!1&&y>m)throw new TypeError(`invalid string length: ${y} (${g}). Expected (8..${m})`);let E=g.toLowerCase();if(g!==E&&g!==g.toUpperCase())throw new Error("String must be lowercase or uppercase");let v=E.lastIndexOf("1");if(v===0||v===-1)throw new Error('Letter "1" must be present between prefix and data only');let f=E.slice(0,v),w=E.slice(v+1);if(w.length<6)throw new Error("Data must be at least 6 characters long");let I=la.decode(w).slice(0,-6),b=Ac(f,I,n);if(!w.endsWith(b))throw new Error(`Invalid checksum in ${g}: expected "${b}"`);return{prefix:f,words:I}}let c=xc(s);function d(g){let{prefix:m,words:y}=s(g,!1);return{prefix:m,words:y,bytes:r(y)}}function l(g,m){return o(g,i(m))}return{encode:o,decode:s,encodeFromBytes:l,decodeToBytes:d,decodeUnsafe:c,fromWords:r,fromWordsUnsafe:a,toWords:i}}var da=ph("bech32");var Fe={toString:gr,fromString:Mn,concat:mi};function fa(t){return Fe.toString(t,"base64url")}function Ne(t){let n=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return Fe.fromString(n,"base64url")}function Uc(t){return Fe.fromString(t,"base58btc")}function mh(t){return Fe.toString(t,"base58btc")}var Pr={Secp256k1SignatureVerificationKey2018:"Secp256k1",Secp256k1VerificationKey2018:"Secp256k1",EcdsaSecp256k1VerificationKey2019:"Secp256k1",EcdsaPublicKeySecp256k1:"Secp256k1",EcdsaSecp256k1RecoveryMethod2020:"Secp256k1",EcdsaSecp256r1VerificationKey2019:"P-256",Ed25519VerificationKey2018:"Ed25519",Ed25519VerificationKey2020:"Ed25519",ED25519SignatureVerification:"Ed25519",X25519KeyAgreementKey2019:"X25519",X25519KeyAgreementKey2020:"X25519",ConditionalProof2022:void 0,JsonWebKey2020:void 0,Multikey:void 0},_h={"ed25519-pub":237,"x25519-pub":236,"secp256k1-pub":231,"bls12_381-g1-pub":234,"bls12_381-g2-pub":235,"p256-pub":4608},gh={"bls12_381-g1-pub":"Bls12381G1","bls12_381-g2-pub":"Bls12381G2","ed25519-pub":"Ed25519","p256-pub":"P-256","secp256k1-pub":"Secp256k1","x25519-pub":"X25519"};function Lr(t){if(t.publicKeyBase58)return{keyBytes:Uc(t.publicKeyBase58),keyType:Pr[t.type]};if(t.publicKeyBase64)return{keyBytes:Ne(t.publicKeyBase64),keyType:Pr[t.type]};if(t.publicKeyHex)return{keyBytes:Br(t.publicKeyHex),keyType:Pr[t.type]};if(t.publicKeyJwk&&t.publicKeyJwk.crv==="secp256k1"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return{keyBytes:yt.ProjectivePoint.fromAffine({x:Rr(Ne(t.publicKeyJwk.x)),y:Rr(Ne(t.publicKeyJwk.y))}).toRawBytes(!1),keyType:"Secp256k1"};if(t.publicKeyJwk&&t.publicKeyJwk.crv==="P-256"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return{keyBytes:kr.ProjectivePoint.fromAffine({x:Rr(Ne(t.publicKeyJwk.x)),y:Rr(Ne(t.publicKeyJwk.y))}).toRawBytes(!1),keyType:"P-256"};if(t.publicKeyJwk&&t.publicKeyJwk.kty==="OKP"&&["Ed25519","X25519"].includes(t.publicKeyJwk.crv??"")&&t.publicKeyJwk.x)return{keyBytes:Ne(t.publicKeyJwk.x),keyType:t.publicKeyJwk.crv};if(t.publicKeyMultibase){let{keyBytes:n,keyType:e}=yh(t.publicKeyMultibase);return{keyBytes:n,keyType:e??Pr[t.type]}}return{keyBytes:new Uint8Array}}function yh(t){let n=(0,ha.decode)(t);if([32,33,48,64,65,96].includes(n.length))return{keyBytes:n};try{let[e,r]=Ot.decode(n),i=Object.entries(_h).filter(([,a])=>a===e)?.[0][0]??"";return{keyBytes:n.slice(r),keyType:gh[i]}}catch{return{keyBytes:n}}}function Br(t,n){let e=t.startsWith("0x")?t.substring(2):t;if(e.length%2!==0&&(e=`0${e}`),n){let r=Math.max(e.length,n*2);e=e.padStart(r,"00")}return Fe.fromString(e.toLowerCase(),"base16")}function Pc(t){return fa(Fe.fromString(t))}function Yc(t){return Fe.toString(Ne(t))}function vt(t){return Fe.toString(t,"base16")}function Rr(t){return BigInt("0x"+Fe.toString(t,"base16"))}function jc(t){return Fe.fromString(t,"utf-8")}function pa({r:t,s:n,recoveryParam:e},r){let i=new Uint8Array(r?65:64);if(i.set(Fe.fromString(t,"base16"),0),i.set(Fe.fromString(n,"base16"),32),r){if(typeof e>"u")throw new Error("Signer did not return a recoveryParam");i[64]=e}return fa(i)}function bh(t){let n=Ne(t);if(n.length<64||n.length>65)throw new TypeError(`Wrong size for signature. Expected 64 or 65 bytes, but got ${n.length}`);let e=vt(n.slice(0,32)),r=vt(n.slice(32,64)),i=n.length===65?n[64]:void 0;return{r:e,s:r,recoveryParam:i}}function Rc(t,n=64){return t.length===n?t:"0".repeat(n-t.length)+t}function Dt(t){let n=typeof t=="string"?Mn(t):t;return nn(n)}var vh=vc;function Kc(t){let n=Mn(t.slice(2),"base16");return`0x${gr(vh(n).slice(-20),"base16")}`}function Hc(t,n=!1){let e=t;if(e.length!==32)throw new Error(`bad_key: Invalid private key format. Expecting 32 bytes, but got ${e.length}`);return function(r){try{let i=yt.sign(Dt(r),e);return Promise.resolve(pa({r:Rc(i.r.toString(16)),s:Rc(i.s.toString(16)),recoveryParam:i.recovery},n))}catch(i){return Promise.reject(i)}}}function Wc(t){let n=t;if(![32,64].includes(n.length))throw new Error(`bad_key: Invalid private key format. Expecting 32 or 64 bytes, but got ${n.length}`);return function(e){try{let r=typeof e=="string"?jc(e):e,i=Gi.sign(r,n.slice(0,32));return Promise.resolve(fa(i))}catch(r){return Promise.reject(r)}}}function ma(t){return typeof t=="object"&&"r"in t&&"s"in t}function Dh(){return function(n,e){try{return Promise.resolve(e(n)).then(function(r){return ma(r)?pa(r):r})}catch(r){return Promise.reject(r)}}}function Bc(t){return function(e,r){try{return Promise.resolve(r(e)).then(function(i){if(ma(i))return pa(i,t);if(t&&typeof bh(i).recoveryParam>"u")throw new Error("not_supported: ES256K-R not supported when signer doesn't provide a recovery param");return i})}catch(i){return Promise.reject(i)}}}function Vc(){return function(n,e){try{return Promise.resolve(e(n)).then(function(r){if(ma(r))throw new Error("invalid_config: expected a signer function that returns a string instead of signature object");return r})}catch(r){return Promise.reject(r)}}}var wh={ES256:Dh(),ES256K:Bc(),"ES256K-R":Bc(!0),Ed25519:Vc(),EdDSA:Vc()};function Ch(t){let n=wh[t];if(!n)throw new Error(`not_supported: Unsupported algorithm ${t}`);return n}function xh(t,n){let e=vt(Uc(n).slice(0,1)),r=Br(t),i=oa(Dt(r)),a=e+vt(i),o=Dt(Br(a)),s=Dt(o),c=vt(s).substring(0,8),d=a+c;return mh(Br(d))}function Eh(t,n){let e=yt.ProjectivePoint.fromHex(t).toRawBytes(),r=oa(Dt(e)),i=da.toWords(r);return da.encode(n,i).replace(n,"")}function Ah(t,n){if(n){let e=n.split(":");switch(e[0]){case"bip122":e[e.length-1]=xh(t,e[e.length-1]);break;case"cosmos":e[e.length-1]=Eh(t,e[1]);break;case"eip155":e[e.length-1]=Kc(t);break;default:return!1}return e.join(":").toLowerCase()===n.toLowerCase()}return!1}function Sh(t,n=!1){let e=Ne(t);if(e.length!==(n?65:64))throw new Error("wrong signature length");let r=vt(e.slice(0,32)),i=vt(e.slice(32,64)),a={r,s:i};return n&&(a.recoveryParam=e[64]),a}function ua(t,n=!1){let e=Ne(t);if(e.length!==(n?65:64))throw new Error("wrong signature length");return{compact:e.slice(0,64),recovery:e[64]}}function kh(t,n,e){let r=Dt(t),i=kr.Signature.fromCompact(ua(n).compact),o=e.filter(s=>!s.ethereumAddress&&!s.blockchainAccountId).find(s=>{try{let{keyBytes:c}=Lr(s);return kr.verify(i,r,c)}catch{return!1}});if(!o)throw new Error("invalid_signature: Signature invalid for JWT");return o}function Ih(t,n,e){let r=Dt(t),i=yt.Signature.fromCompact(Ne(n)).normalizeS(),a=e.filter(c=>!c.ethereumAddress&&!c.blockchainAccountId),o=e.filter(c=>c.ethereumAddress||c.blockchainAccountId),s=a.find(c=>{try{let{keyBytes:d}=Lr(c);return yt.verify(i,r,d)}catch{return!1}});if(!s&&o.length>0&&(s=zc(t,n,o)),!s)throw new Error("invalid_signature: Signature invalid for JWT");return s}function zc(t,n,e){let r=[];if(n.length>86)r.push(ua(n,!0));else{let o=ua(n,!1);r.push(pe(N({},o),{recovery:0})),r.push(pe(N({},o),{recovery:1}))}let i=Dt(t),a=o=>{let c=yt.Signature.fromCompact(o.compact).addRecoveryBit(o.recovery||0).recoverPublicKey(i),d=Kc(c.toHex(!1)).toLowerCase(),l=c.toHex(!1),g=c.toHex(!0);return e.find(m=>{let{keyBytes:y}=Lr(m),E=vt(y);return E===l||E===g||m.ethereumAddress?.toLowerCase()===d||m.blockchainAccountId?.split("@eip155")?.[0].toLowerCase()===d||Ah(l,m.blockchainAccountId)})};for(let o of r){let s=a(o);if(s)return s}throw new Error("invalid_signature: Signature invalid for JWT")}function Nc(t,n,e){let r=jc(t),i=Ne(n),a=e.find(o=>{let{keyBytes:s,keyType:c}=Lr(o);return c==="Ed25519"?Gi.verify(i,r,s):!1});if(!a)throw new Error("invalid_signature: Signature invalid for JWT");return a}var Mh={ES256:kh,ES256K:Ih,"ES256K-R":zc,Ed25519:Nc,EdDSA:Nc};function Oh(t){let n=Mh[t];if(!n)throw new Error(`not_supported: Unsupported algorithm ${t}`);return n}Oh.toSignatureObject=Sh;var Vr={INVALID_JWT:"invalid_jwt",INVALID_AUDIENCE:"invalid_config",INVALID_SIGNATURE:"invalid_signature",NO_SUITABLE_KEYS:"no_suitable_keys",NOT_SUPPORTED:"not_supported",RESOLVER_ERROR:"resolver_error"};var $_=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Le(t,n,e){if(!t.s){if(e instanceof Nr)if(e.s)n&1&&(n=e.s),e=e.v;else{e.o=Le.bind(null,t,n);return}if(e&&e.then){e.then(Le.bind(null,t,n),Le.bind(null,t,2));return}t.s=n,t.v=e;let r=t.o;r&&r(t)}}var Nr=function(){function t(){}return t.prototype.then=function(n,e){let r=new t,i=this.s;if(i){let a=i&1?n:e;if(a){try{Le(r,1,a(this.v))}catch(o){Le(r,2,o)}return r}else return this}return this.o=function(a){try{let o=a.v;a.s&1?Le(r,1,n?n(o):o):e?Le(r,1,e(o)):Le(r,2,o)}catch(o){Le(r,2,o)}},r},t}();function Th(t){return t instanceof Nr&&t.s&1}function Ph(t,n,e){var r=-1,i,a;function o(s){try{for(;++r<t.length&&(!e||!e());)if(s=n(r),s&&s.then)if(Th(s))s=s.v;else{s.then(o,a||(a=Le.bind(null,i=new Nr,2)));return}i?Le(i,1,s):i=s}catch(c){Le(i||(i=new Nr),2,c)}}return o(),i}var qc=function(t,{expiresIn:n,canonicalize:e},r){try{if(r.length===0)throw new Error("invalid_argument: must provide one or more issuers");let i=t,a="",o=Ph(r,function(s){let c=r[s],d={typ:"JWT",alg:c.alg};return s!==0&&(d.cty="JWT"),Promise.resolve(_a(i,pe(N({},c),{canonicalize:e,expiresIn:n}),d)).then(function(l){a=l,i={jwt:a}})});return Promise.resolve(o&&o.then?o.then(function(){return a}):a)}catch(i){return Promise.reject(i)}},_a=function(t,{issuer:n,signer:e,alg:r,expiresIn:i,canonicalize:a},o={}){try{if(!e)throw new Error("missing_signer: No Signer functionality has been configured");if(!n)throw new Error("missing_issuer: No issuing DID has been configured");o.typ||(o.typ="JWT"),o.alg||(o.alg=r);let s={iat:Math.floor(Date.now()/1e3),exp:void 0};if(i)if(typeof i=="number")s.exp=(t.nbf||s.iat)+Math.floor(i);else throw new Error("invalid_argument: JWT expiresIn is not a number");let c=pe(N(N({},s),t),{iss:n});return Rh(c,e,o,{canonicalize:a})}catch(s){return Promise.reject(s)}},Rh=function(t,n,e={},r={}){try{e.alg||(e.alg=Bh);let i=typeof t=="string"?t:Lc(t,r.canonicalize),a=[Lc(e,r.canonicalize),i].join("."),o=Ch(e.alg);return Promise.resolve(o(a,n)).then(function(s){return[a,s].join(".")})}catch(i){return Promise.reject(i)}};var Bh="ES256K";function Lc(t,n=!1){return Pc(n?(0,Fc.default)(t):JSON.stringify(t))}function Vh(t){let n=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(n)return{header:JSON.parse(Yc(n[1])),payload:n[2],signature:n[3],data:`${n[1]}.${n[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function Fr(t,n=!0){if(!t)throw new Error("invalid_argument: no JWT passed into decodeJWT");try{let e=Vh(t),r=Object.assign(e,{payload:JSON.parse(Yc(e.payload))}),i=r.payload.iss;if(r.header.cty==="JWT"&&n){let a=Fr(r.payload.jwt);if(a.payload.iss!==i)throw new Error(`${Vr.INVALID_JWT}: multiple issuers`);return a}return r}catch(e){throw new Error(`invalid_argument: ${Vr.INVALID_JWT}: ${e}`)}}var J_=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";var $c="ES256K";var Jc="https://www.w3.org/2018/credentials/v1",Xc="VerifiableCredential";var Lh=["evidence","termsOfUse","refreshService","credentialSchema","credentialStatus"];function Lt(t){return Array.isArray(t)?t:[t]}function ga(t){return Array.isArray(t)?t.map(n=>ga(n)):t instanceof Date?new Date(t.getTime()):t&&typeof t=="object"?Object.getOwnPropertyNames(t).reduce((n,e)=>(Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e)),n[e]=ga(t[e]),n),Object.create(Object.getPrototypeOf(t))):t}function Gc(t){return t!=null}function Fh(t,n=!0){if(Array.isArray(t.credentialSubject))throw Error("credentialSubject of type array not supported");let e=ga(N({vc:N({},t.vc)},t));e.vc=e.vc;let r=N(N({},t.credentialSubject),t.vc?.credentialSubject);t.sub||(e.sub=t.credentialSubject?.id,n&&delete r.id);let i=[...Lt(t.context),...Lt(t["@context"]),...Lt(t.vc?.["@context"])].filter(Gc);e.vc["@context"]=[...new Set(i)],n&&(delete e.context,delete e["@context"]);let a=[...Lt(t.type),...Lt(t.vc?.type)].filter(Gc);if(e.vc.type=[...new Set(a)],n&&delete e.type,t.id&&Object.getOwnPropertyNames(t).indexOf("jti")===-1&&(e.jti=t.id,n&&delete e.id),t.issuanceDate&&Object.getOwnPropertyNames(t).indexOf("nbf")===-1){let o=Date.parse(t.issuanceDate);isNaN(o)||(e.nbf=Math.floor(o/1e3),n&&delete e.issuanceDate)}if(t.expirationDate&&Object.getOwnPropertyNames(t).indexOf("exp")===-1){let o=Date.parse(t.expirationDate);isNaN(o)||(e.exp=Math.floor(o/1e3),n&&delete e.expirationDate)}t.issuer&&Object.getOwnPropertyNames(t).indexOf("iss")===-1&&(typeof t.issuer=="object"?(e.iss=t.issuer?.id,n&&(delete e.issuer.id,Object.keys(e.issuer).length===0&&delete e.issuer)):typeof t.issuer=="string"&&(e.iss=t.iss||""+t.issuer,n&&delete e.issuer)),e.vc.credentialSubject=r,n&&delete e.credentialSubject;for(let o of Lh)t[o]&&(e.vc[o]||(e.vc[o]=t[o]),n&&delete e[o]);return e}var rn={SCHEMA_ERROR:"schema_error",FORMAT_ERROR:"format_error",AUTH_ERROR:"auth_error"},e0=N(N({},rn),Vr);function Uh(t){return t&&!isNaN(t)&&Object.prototype.toString.call(t)==="[object Date]"}function ya(t){if(typeof t=="number"){if(!(Number.isInteger(t)&&t<1e11))throw new TypeError(`${rn.SCHEMA_ERROR}: "${t}" is not a unix timestamp in seconds`)}else if(typeof t=="string")ya(Math.floor(new Date(t).valueOf()/1e3));else if(!Uh(t))throw new TypeError(`${rn.SCHEMA_ERROR}: "${t}" is not a valid time`)}function Yh(t){let n=Lt(t);if(n.length<1||n.indexOf(Jc)===-1)throw new TypeError(`${rn.SCHEMA_ERROR}: @context is missing default context "${Jc}"`)}function jh(t){let n=Lt(t);if(n.length<1||n.indexOf(Xc)===-1)throw new TypeError(`${rn.SCHEMA_ERROR}: type is missing default "${Xc}"`)}function Kh(t){if(Object.keys(t).length===0)throw new TypeError(`${rn.SCHEMA_ERROR}: credentialSubject must not be empty`)}var Zc=function(t,n,e={}){try{let r=N({iat:void 0},Fh(t,e.removeOriginalFields));if(Hh(r),Array.isArray(n)){let i=n[0].did,a=[];for(let o of n){if(o.did!==i)throw new Error("All issuers must be the same did to comply with the Verifiable Conditions spec");a.push({issuer:o.did||r.iss||"",signer:o.signer,alg:o.alg||e.header?.alg||$c})}return Promise.resolve(qc(r,N({},e),a))}else return Promise.resolve(_a(r,pe(N({},e),{issuer:n.did||r.iss||"",signer:n.signer}),pe(N({},e.header),{alg:n.alg||e.header?.alg||$c})))}catch(r){return Promise.reject(r)}};function Hh(t){Yh(t.vc["@context"]),jh(t.vc.type),Kh(t.vc.credentialSubject),t.nbf&&ya(t.nbf),t.exp&&ya(t.exp)}var ba=(t,n)=>n.id;function Wh(t,n){t&1&&(u(0,"div",5)(1,"mat-icon"),x(2,"warning"),h(),u(3,"h2"),x(4,"No Signing Identities Available"),h(),u(5,"p"),x(6,"You need an identity with a private key to issue credentials."),h(),u(7,"button",7),x(8," Manage Identities "),h()())}function zh(t,n){t&1&&(u(0,"span"),x(1,"1"),h())}function qh(t,n){t&1&&(u(0,"mat-icon"),x(1,"check"),h())}function $h(t,n){t&1&&(u(0,"span"),x(1,"2"),h())}function Jh(t,n){t&1&&(u(0,"mat-icon"),x(1,"check"),h())}function Xh(t,n){if(t&1&&(u(0,"mat-option",21),x(1),h()),t&2){let e=n.$implicit;$("value",e.id),A(),xt(" ",e.name," - ",e.description," ")}}function Gh(t,n){if(t&1&&(u(0,"mat-option",21),x(1),h()),t&2){let e=n.$implicit;$("value",e.id),A(),xt(" ",e.name," (",e.id,") ")}}function Zh(t,n){if(t&1){let e=Ue();u(0,"div",14)(1,"h2"),x(2,"Credential Information"),h(),u(3,"p",15),x(4," Define the basic details of the credential you want to issue "),h(),u(5,"mat-form-field",16)(6,"mat-label"),x(7,"Credential Name"),h(),u(8,"input",17),Oe("ngModelChange",function(i){W(e);let a=U(2);return Me(a.credentialName,i)||(a.credentialName=i),z(i)}),h(),u(9,"mat-icon",18),x(10,"badge"),h()(),u(11,"mat-form-field",16)(12,"mat-label"),x(13,"Description"),h(),u(14,"textarea",19),Oe("ngModelChange",function(i){W(e);let a=U(2);return Me(a.credentialDescription,i)||(a.credentialDescription=i),z(i)}),h(),u(15,"mat-icon",18),x(16,"description"),h()(),u(17,"mat-form-field",16)(18,"mat-label"),x(19,"Credential Type"),h(),u(20,"mat-select",20),Oe("ngModelChange",function(i){W(e);let a=U(2);return Me(a.selectedType,i)||(a.selectedType=i),z(i)}),Ze(21,Xh,2,3,"mat-option",21,ba),h(),u(23,"mat-icon",18),x(24,"category"),h()(),u(25,"mat-form-field",16)(26,"mat-label"),x(27,"Issuer"),h(),u(28,"mat-select",20),Oe("ngModelChange",function(i){W(e);let a=U(2);return Me(a.selectedIssuer,i)||(a.selectedIssuer=i),z(i)}),Ze(29,Gh,2,3,"mat-option",21,ba),h(),u(31,"mat-icon",18),x(32,"verified_user"),h(),u(33,"mat-hint"),x(34,"Only identities with private keys can be used to issue credentials"),h()(),u(35,"div",22)(36,"button",23),Z("click",function(){W(e);let i=U(2);return z(i.nextStep())}),x(37," Next "),u(38,"mat-icon"),x(39,"arrow_forward"),h()()()()}if(t&2){let e=U(2);A(8),Ie("ngModel",e.credentialName),A(6),Ie("ngModel",e.credentialDescription),A(6),Ie("ngModel",e.selectedType),A(),Qe(e.credentialTypes),A(7),Ie("ngModel",e.selectedIssuer),A(),Qe(e.identitiesWithPrivateKey)}}function Qh(t,n){if(t&1){let e=Ue();u(0,"mat-option",33),Z("click",function(){let i=W(e).$implicit,a=U(3);return z(a.selectIdentityAsSubject(i))}),x(1),h()}if(t&2){let e=n.$implicit;$("value",e.id),A(),xt(" ",e.name," (",e.id,") ")}}function ef(t,n){if(t&1){let e=Ue();u(0,"div",29)(1,"mat-form-field",34)(2,"mat-label"),x(3,"Attribute"),h(),u(4,"input",35),Oe("ngModelChange",function(i){let a=W(e).$implicit;return Me(a.name,i)||(a.name=i),z(i)}),h(),u(5,"mat-icon",18),x(6,"label"),h()(),u(7,"mat-form-field",34)(8,"mat-label"),x(9,"Value"),h(),u(10,"input",36),Oe("ngModelChange",function(i){let a=W(e).$implicit;return Me(a.value,i)||(a.value=i),z(i)}),h(),u(11,"mat-icon",18),x(12,"edit"),h()(),u(13,"button",37),Z("click",function(){let i=W(e).$index,a=U(3);return z(a.removeClaimField(i))}),u(14,"mat-icon"),x(15,"remove_circle"),h()()()}if(t&2){let e=n.$implicit,r=U(3);A(4),Ie("ngModel",e.name),A(6),Ie("ngModel",e.value),A(3),$("disabled",r.claimFields.length===1)}}function tf(t,n){if(t&1){let e=Ue();u(0,"div",14)(1,"h2"),x(2,"Credential Subject & Claims"),h(),u(3,"p",15),x(4," Define the subject and claims of this credential "),h(),u(5,"mat-form-field",16)(6,"mat-label"),x(7,"Subject DID"),h(),u(8,"input",24),Oe("ngModelChange",function(i){W(e);let a=U(2);return Me(a.subjectId,i)||(a.subjectId=i),z(i)}),Z("input",function(i){W(e);let a=U(2);return z(a.filterSubjectOptions(i))}),h(),u(9,"mat-icon",18),x(10,"person"),h(),u(11,"mat-autocomplete",null,0),Ze(13,Qh,2,3,"mat-option",21,ba),h(),u(15,"mat-hint"),x(16,"The DID of the entity this credential is about"),h()(),u(17,"mat-form-field",16)(18,"mat-label"),x(19,"Expiration Date (Optional)"),h(),u(20,"input",25),Oe("ngModelChange",function(i){W(e);let a=U(2);return Me(a.expirationDate,i)||(a.expirationDate=i),z(i)}),h(),ge(21,"mat-datepicker-toggle",26)(22,"mat-datepicker",null,1),h(),u(24,"h3"),x(25,"Credential Claims"),h(),u(26,"p",27),x(27," Add attribute-value pairs that describe the claims being made about the subject "),h(),u(28,"div",28),Ze(29,ef,16,3,"div",29,Ya),h(),u(31,"div",30)(32,"button",31),Z("click",function(){W(e);let i=U(2);return z(i.addClaimField())}),u(33,"mat-icon"),x(34,"add"),h(),x(35," Add Claim "),h()(),u(36,"div",22)(37,"button",32),Z("click",function(){W(e);let i=U(2);return z(i.previousStep())}),u(38,"mat-icon"),x(39,"arrow_back"),h(),x(40," Back "),h(),u(41,"button",31),Z("click",function(){W(e);let i=U(2);return z(i.nextStep())}),x(42," Next "),u(43,"mat-icon"),x(44,"arrow_forward"),h()()()()}if(t&2){let e=zr(12),r=zr(23),i=U(2);A(8),Ie("ngModel",i.subjectId),$("matAutocomplete",e),A(5),Qe(i.filteredSubjectOptions),A(7),$("matDatepicker",r),Ie("ngModel",i.expirationDate),A(),$("for",r),A(8),Qe(i.claimFields)}}function nf(t,n){if(t&1&&(u(0,"div",39)(1,"div",40),x(2,"Expires:"),h(),u(3,"div",41),x(4),Ka(5,"date"),h()()),t&2){let e=U(3);A(4),ke(Ha(5,1,e.expirationDate,"medium"))}}function rf(t,n){if(t&1){let e=Ue();u(0,"div",14)(1,"h2"),x(2,"Review & Issue Credential"),h(),u(3,"p",15),x(4," Review the credential details before issuing "),h(),u(5,"div",38)(6,"div",39)(7,"div",40),x(8,"Name:"),h(),u(9,"div",41),x(10),h()(),u(11,"div",39)(12,"div",40),x(13,"Type:"),h(),u(14,"div",41),x(15),h()(),u(16,"div",39)(17,"div",40),x(18,"Issuer:"),h(),u(19,"div",41),x(20),h()(),u(21,"div",39)(22,"div",40),x(23,"Subject:"),h(),u(24,"div",41),x(25),h()(),me(26,nf,6,4,"div",39),h(),ge(27,"mat-divider"),u(28,"h3"),x(29,"Credential JSON"),h(),u(30,"div",42)(31,"pre",43),x(32),h()(),u(33,"div",22)(34,"button",32),Z("click",function(){W(e);let i=U(2);return z(i.previousStep())}),u(35,"mat-icon"),x(36,"arrow_back"),h(),x(37," Back "),h(),u(38,"button",44),Z("click",function(){W(e);let i=U(2);return z(i.issueCredential())}),u(39,"mat-icon"),x(40,"verified"),h(),x(41," Issue Credential "),h()()()}if(t&2){let e=U(2);A(10),ke(e.credentialName),A(5),ke(e.selectedType),A(5),ke(e.getIssuerName(e.selectedIssuer)),A(5),ke(e.subjectId),A(),xe(e.expirationDate?26:-1),A(6),ke(e.previewJson)}}function af(t,n){if(t&1&&(u(0,"div",6)(1,"div",8)(2,"div",9)(3,"div",10),me(4,zh,2,0,"span")(5,qh,2,0,"mat-icon"),h(),u(6,"div",11),x(7,"Basic Info"),h()(),ge(8,"div",12),u(9,"div",9)(10,"div",10),me(11,$h,2,0,"span")(12,Jh,2,0,"mat-icon"),h(),u(13,"div",11),x(14,"Credential Claims"),h()(),ge(15,"div",12),u(16,"div",9)(17,"div",10)(18,"span"),x(19,"3"),h()(),u(20,"div",11),x(21,"Review & Issue"),h()()(),u(22,"div",13),me(23,Zh,40,4,"div",14)(24,tf,45,5,"div",14)(25,rf,42,6,"div",14),h()()),t&2){let e=U();A(2),ue("active",e.formStep===0)("completed",e.formStep>0),A(2),xe(e.formStep<=0?4:5),A(4),ue("active",e.formStep>=1)("completed",e.formStep>1),A(),ue("active",e.formStep===1)("completed",e.formStep>1),A(2),xe(e.formStep<=1?11:12),A(4),ue("active",e.formStep>=2)("completed",e.formStep>2),A(),ue("active",e.formStep===2),A(7),xe(e.formStep===0?23:-1),A(),xe(e.formStep===1?24:-1),A(),xe(e.formStep===2?25:-1)}}var Qc=class t{constructor(n,e,r,i){this.identityService=n;this.credentialService=e;this.router=r;this.snackBar=i}identities=[];identitiesWithPrivateKey=[];filteredSubjectOptions=[];credentialTypes=Es;formStep=0;credentialName="";credentialDescription="";selectedType="VerifiableCredential";selectedIssuer="";subjectId="";expirationDate=void 0;claimFields=[{name:"",value:""}];previewJson="";ngOnInit(){this.loadIdentities()}loadIdentities(){this.identityService.getAllIdentities().subscribe(n=>{this.identities=n,this.identitiesWithPrivateKey=n.filter(e=>e.privateKey),this.identitiesWithPrivateKey.length>0&&(this.selectedIssuer=this.identitiesWithPrivateKey[0].id),this.filteredSubjectOptions=[...this.identities]})}addClaimField(){this.claimFields.push({name:"",value:""})}removeClaimField(n){this.claimFields.length>1&&this.claimFields.splice(n,1)}nextStep(){this.formStep===0&&this.validateStep1()?(this.formStep=1,this.updatePreview()):this.formStep===1&&this.validateStep2()&&(this.formStep=2,this.updatePreview())}previousStep(){this.formStep=Math.max(0,this.formStep-1)}validateStep1(){return this.credentialName?this.selectedType?this.selectedIssuer?!0:(this.showError("Please select an issuer identity"),!1):(this.showError("Please select a credential type"),!1):(this.showError("Please enter a name for the credential"),!1)}validateStep2(){return!this.subjectId||!this.subjectId.startsWith("did:")?(this.showError("Please enter a valid subject DID"),!1):this.claimFields.filter(e=>!e.name||!e.value).length>0?(this.showError("Please fill in all claim fields or remove empty ones"),!1):!0}updatePreview(){let n={id:this.subjectId};this.claimFields.forEach(i=>{i.name&&i.value&&(n[i.name]=i.value)});let e=new Date,r={"@context":["https://www.w3.org/2018/credentials/v1"],id:`urn:uuid:${_o()}`,type:["VerifiableCredential",this.selectedType],issuer:this.selectedIssuer,issuanceDate:e.toISOString(),expirationDate:this.expirationDate?this.expirationDate.toISOString():void 0,credentialSubject:n};this.previewJson=JSON.stringify(r,null,2)}getIssuerName(n){return this.identities.find(r=>r.id===n)?.name||"Unknown"}issueCredential(){try{let n=JSON.parse(this.previewJson),e=this.identitiesWithPrivateKey.find(c=>c.id===this.selectedIssuer);if(!e||!e.privateKey){this.showError("Issuer private key not found");return}let r,i,a="ES256K";if(e.method==="stellar")r=go.decodeEd25519SecretSeed(e.privateKey),i=Wc(r),a="EdDSA";else throw new Error("Unsupported DID method.");let o={did:this.selectedIssuer,signer:i,alg:a},s={sub:this.subjectId,nbf:Math.floor(Date.now()/1e3),vc:{"@context":n["@context"],type:n.type,credentialSubject:n.credentialSubject}};this.expirationDate&&(s.exp=Math.floor(this.expirationDate.getTime()/1e3)),Zc(s,o).then(c=>{let d=Fr(c),l=this.credentialService.addCredential({id:n.id,type:this.selectedType,issuer:this.selectedIssuer,issuanceDate:new Date,expirationDate:this.expirationDate,subject:this.subjectId,credentialSubject:n.credentialSubject,rawCredential:n,name:this.credentialName,description:this.credentialDescription,jwt:c,decodedJwt:d});this.showSuccess("Credential issued successfully"),this.router.navigate(["/credential",l.id])}).catch(c=>{this.showError(`Failed to sign credential: ${c.message}`),console.error("Signing error:",c)})}catch(n){this.showError("Failed to issue credential"),console.error("Issue credential error:",n)}}showSuccess(n){this.snackBar.open(n,"Close",{duration:3e3,panelClass:"success-snackbar"})}showError(n){this.snackBar.open(n,"Close",{duration:5e3,panelClass:"error-snackbar"})}filterSubjectOptions(n){let e=n.target.value.toLowerCase();if(!e){this.filteredSubjectOptions=[...this.identities];return}this.filteredSubjectOptions=this.identities.filter(r=>r.id.toLowerCase().includes(e)||r.name?.toLowerCase().includes(e))}selectIdentityAsSubject(n){this.subjectId=n.id}displaySubjectFn(n){if(!n)return"";let e=this.identities.find(r=>r.id===n);return e?`${e.name} (${e.id})`:n}static \u0275fac=function(e){return new(e||t)(hn(Mo),hn(Oo),hn($a),hn(Xo))};static \u0275cmp=Ce({type:t,selectors:[["app-issue-credential"]],decls:9,vars:2,consts:[["subjectAuto","matAutocomplete"],["picker",""],[1,"page-container"],[1,"page-header"],[1,"title-section"],[1,"no-identities"],[1,"stepper-container"],["mat-raised-button","","color","primary","routerLink","/identities"],[1,"stepper-header"],[1,"step"],[1,"step-icon"],[1,"step-label"],[1,"step-connector"],[1,"step-content","neon-card"],[1,"step-form"],[1,"step-description"],["appearance","outline",1,"full-width"],["matInput","","placeholder","e.g., Identity Verification",3,"ngModelChange","ngModel"],["matSuffix",""],["matInput","","rows","3","placeholder","Describe the purpose of this credential",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value"],[1,"form-actions"],["mat-stroked-button","",3,"click"],["matInput","","placeholder","did:method:identifier",3,"ngModelChange","input","ngModel","matAutocomplete"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],[1,"claims-description"],[1,"claims-container"],[1,"claim-row"],[1,"add-claim"],["mat-stroked-button","","color","primary",3,"click"],["mat-button","",3,"click"],[3,"click","value"],["appearance","outline","subscriptSizing","dynamic","hideRequiredMarker",""],["matInput","","placeholder","e.g., name",3,"ngModelChange","ngModel"],["matInput","","placeholder","e.g., John Doe",3,"ngModelChange","ngModel"],["mat-icon-button","","color","warn",3,"click","disabled"],[1,"credential-summary"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],[1,"json-container"],[1,"json-content"],["mat-flat-button","","color","primary",3,"click"]],template:function(e,r){e&1&&(u(0,"div",2)(1,"div",3)(2,"div",4)(3,"h1"),x(4,"Issue Credential"),h(),u(5,"p"),x(6,"Create and sign a new verifiable credential"),h()()(),me(7,Wh,9,0,"div",5)(8,af,26,23,"div",6),h()),e&2&&(A(7),xe(r.identitiesWithPrivateKey.length===0?7:-1),A(),xe(r.identitiesWithPrivateKey.length>0?8:-1))},dependencies:[qa,za,Uo,Bo,Lo,Fo,Yo,Ja,Xn,bn,vn,fo,zo,Wo,jo,Ko,Ho,Jo,$o,ns,ts,Jn,vs,bs,hr,hi,ao,mo,po,rs,Go,Zo,es,Qo,xs,ws,pi],styles:[".title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:5px;color:var(--primary-color)}.title-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.no-identities[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 0;text-align:center}.no-identities[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:5rem;height:5rem;width:5rem;margin-bottom:20px;color:var(--warning-color)}.no-identities[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px;color:var(--warning-color)}.no-identities[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-secondary)}.stepper-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.stepper-header[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:30px;padding:15px;border-radius:8px;background-color:#0000000d}.step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative;transition:all .3s ease}.step-icon[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:var(--background-light);border:2px solid var(--text-secondary);display:flex;justify-content:center;align-items:center;margin-bottom:8px;color:var(--text-secondary);transition:all .3s ease;font-weight:500;box-shadow:0 2px 4px #0000001a}.step-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--text-secondary);transition:all .3s ease;white-space:nowrap;font-weight:400}.step.active[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{background-color:var(--mat-sys-primary);border-color:var(--mat-sys-primary);color:#fff;box-shadow:0 4px 8px #0003;transform:scale(1.1)}.step.active[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:var(--mat-sys-primary);font-weight:500}.step.completed[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{background-color:#4caf50;border-color:#4caf50;color:#fff;box-shadow:0 2px 6px #4caf504d}.step.completed[_ngcontent-%COMP%]   .step-label[_ngcontent-%COMP%]{color:#4caf50;font-weight:500}.step-connector[_ngcontent-%COMP%]{flex:1;height:3px;background:linear-gradient(to right,var(--text-secondary) 50%,var(--text-secondary) 50%);margin:0 10px;position:relative;top:-12px;transition:all .3s ease;border-radius:3px}.step.completed[_ngcontent-%COMP%] + .step-connector[_ngcontent-%COMP%]{background:linear-gradient(to right,#4caf50,#4caf50)}.step.active[_ngcontent-%COMP%] + .step-connector[_ngcontent-%COMP%]{background:linear-gradient(to right,#4caf50,var(--text-secondary))}.step-content[_ngcontent-%COMP%]{padding:30px;border-radius:8px;box-shadow:0 4px 12px #0000001a}.step-form[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.step-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;color:var(--mat-sys-primary);font-weight:500}.step-description[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:25px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:20px}.claims-description[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:15px}.claims-container[_ngcontent-%COMP%]{margin-bottom:15px}.claim-row[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;margin-bottom:10px;transition:all .2s ease}.claim-row[_ngcontent-%COMP%]:hover{background-color:#00000005;border-radius:4px}.claim-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.add-claim[_ngcontent-%COMP%]{margin-bottom:30px}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:30px}.credential-summary[_ngcontent-%COMP%]{margin-bottom:25px;background-color:#00000005;padding:15px;border-radius:8px}.summary-item[_ngcontent-%COMP%]{display:flex;margin-bottom:10px}.summary-label[_ngcontent-%COMP%]{width:80px;font-weight:500;color:var(--text-secondary)}.summary-value[_ngcontent-%COMP%]{flex:1;font-weight:400}mat-divider[_ngcontent-%COMP%]{margin:25px 0}.json-container[_ngcontent-%COMP%]{background-color:#0000000d;border-radius:8px;padding:15px;margin-bottom:20px;border:1px solid rgba(0,0,0,.1)}.json-content[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:.9rem;margin:0;white-space:pre-wrap;color:var(--text-color);max-height:300px;overflow-y:auto}@media (max-width: 768px){.stepper-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.step[_ngcontent-%COMP%]{width:100%;flex-direction:row;margin-bottom:10px}.step-icon[_ngcontent-%COMP%]{margin-right:10px;margin-bottom:0}.step-connector[_ngcontent-%COMP%]{display:none}.claim-row[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{Qc as IssueCredentialComponent};

import{a as rt,b as at,c as k}from"./chunk-PK5MDJEA.js";import{a as lt,b as mt,c as P}from"./chunk-XJ75JCZP.js";import{A as pt,p as N,q as dt,r as j,u as L,v as st,x as B,y as W,z as ct}from"./chunk-U65S6ADB.js";import{h as O,m as T,o as K,q as F}from"./chunk-LTNCO3OH.js";import{b as w}from"./chunk-WO2BSFFA.js";import{a as X,b as Z,c as $,d as tt,e as et,f as it,g as nt,h as ot}from"./chunk-WRX7OGXN.js";import{d as U}from"./chunk-F4ALP3Y4.js";import{Db as i,Eb as _,Fb as H,Hb as c,Ia as d,Ib as p,Jb as u,Lb as G,Ma as g,Ob as Y,Qb as q,Ta as I,Xa as M,cb as V,hb as y,jc as Q,kb as A,lb as z,lc as v,ma as h,mb as e,na as C,nb as t,qb as S,sb as s,tb as f,td as x,wd as b,yd as E,zd as D}from"./chunk-PQBPDIQK.js";var R=class m{constructor(o,r,n){this.dialogRef=o;this.identityService=r;this.snackBar=n}didString="";stellarKey="";jsonContent="";privateKey="";privateKeyName="";importDID(){if(!this.didString){this.showError("Please enter a valid DID");return}this.identityService.importFromDIDString(this.didString)?(this.showSuccess("DID imported successfully"),this.dialogRef.close(!0)):this.showError("Failed to import DID. Please check the format.")}importStellar(){if(!this.stellarKey){this.showError("Please enter a valid Stellar public key");return}this.identityService.importFromStellarKey(this.stellarKey)?(this.showSuccess("Stellar key imported successfully"),this.dialogRef.close(!0)):this.showError("Failed to import Stellar key. Please check the format.")}importJSON(){if(!this.jsonContent){this.showError("Please enter valid JSON content");return}try{let o=JSON.parse(this.jsonContent);this.identityService.importFromJsonFile(o)?(this.showSuccess("DID document imported successfully"),this.dialogRef.close(!0)):this.showError("Failed to import DID document. Invalid format.")}catch{this.showError("Invalid JSON format")}}importPrivateKey(){if(!this.privateKey||!this.privateKeyName){this.showError("Please provide both a name and private key");return}this.identityService.addIdentity({method:"key",publicKey:"generated-from-private-key",privateKey:this.privateKey,name:this.privateKeyName,description:"Identity with imported private key"})?(this.showSuccess("Private key imported successfully"),this.dialogRef.close(!0)):this.showError("Failed to import private key")}onFileSelected(o,r){let n=o.target.files?.[0];if(!n)return;let l=new FileReader;l.onload=a=>{let J=a.target?.result;r==="json"?this.jsonContent=J:r==="privateKey"&&(this.privateKey=J)},l.readAsText(n)}closeDialog(){this.dialogRef.close(!1)}showSuccess(o){this.snackBar.open(o,"Close",{duration:3e3,panelClass:"success-snackbar"})}showError(o){this.snackBar.open(o,"Close",{duration:5e3,panelClass:"error-snackbar"})}static \u0275fac=function(r){return new(r||m)(g(rt),g(w),g(ct))};static \u0275cmp=I({type:m,selectors:[["app-import-identity-dialog"]],decls:86,vars:5,consts:[[1,"import-dialog-container"],[1,"dialog-title","neon-text"],["dynamicHeight","","animationDuration","300ms"],["label","DID String"],[1,"tab-content"],[1,"tab-description"],["appearance","outline",1,"full-width"],["matInput","","placeholder","did:method:identifier",3,"ngModelChange","ngModel"],["matSuffix",""],[1,"action-buttons"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click"],["label","Stellar Key"],["matInput","","placeholder","G...",3,"ngModelChange","ngModel"],["label","JSON File"],[1,"file-input-wrapper"],["mat-stroked-button","","color","primary",1,"upload-btn"],["type","file","accept",".json",3,"change"],["matInput","","rows","8","placeholder","Paste JSON content here...",3,"ngModelChange","ngModel"],["label","Private Key"],["matInput","","placeholder","Signing Key Name",3,"ngModelChange","ngModel"],["type","file",3,"change"],["matInput","","rows","4","placeholder","Paste private key here...",3,"ngModelChange","ngModel"]],template:function(r,n){r&1&&(e(0,"div",0)(1,"h2",1),i(2,"Import Identity"),t(),e(3,"mat-tab-group",2)(4,"mat-tab",3)(5,"div",4)(6,"p",5),i(7,"Enter a DID string to import (e.g., did:key:z6Mk...)"),t(),e(8,"mat-form-field",6)(9,"mat-label"),i(10,"DID String"),t(),e(11,"input",7),u("ngModelChange",function(a){return p(n.didString,a)||(n.didString=a),a}),t(),e(12,"mat-icon",8),i(13,"contact_page"),t()(),e(14,"div",9)(15,"button",10),s("click",function(){return n.closeDialog()}),i(16,"Cancel"),t(),e(17,"button",11),s("click",function(){return n.importDID()}),e(18,"mat-icon"),i(19,"add"),t(),i(20," Import DID "),t()()()(),e(21,"mat-tab",12)(22,"div",4)(23,"p",5),i(24,"Enter a Stellar public key to import"),t(),e(25,"mat-form-field",6)(26,"mat-label"),i(27,"Stellar Public Key"),t(),e(28,"input",13),u("ngModelChange",function(a){return p(n.stellarKey,a)||(n.stellarKey=a),a}),t(),e(29,"mat-icon",8),i(30,"star"),t()(),e(31,"div",9)(32,"button",10),s("click",function(){return n.closeDialog()}),i(33,"Cancel"),t(),e(34,"button",11),s("click",function(){return n.importStellar()}),e(35,"mat-icon"),i(36,"add"),t(),i(37," Import Stellar Key "),t()()()(),e(38,"mat-tab",14)(39,"div",4)(40,"p",5),i(41,"Import a DID Document from JSON"),t(),e(42,"div",15)(43,"button",16)(44,"mat-icon"),i(45,"upload_file"),t(),i(46," Select JSON File "),t(),e(47,"input",17),s("change",function(a){return n.onFileSelected(a,"json")}),t()(),e(48,"mat-form-field",6)(49,"mat-label"),i(50,"JSON Content"),t(),e(51,"textarea",18),u("ngModelChange",function(a){return p(n.jsonContent,a)||(n.jsonContent=a),a}),t()(),e(52,"div",9)(53,"button",10),s("click",function(){return n.closeDialog()}),i(54,"Cancel"),t(),e(55,"button",11),s("click",function(){return n.importJSON()}),e(56,"mat-icon"),i(57,"add"),t(),i(58," Import JSON "),t()()()(),e(59,"mat-tab",19)(60,"div",4)(61,"p",5),i(62,"Import a private key for signing credentials"),t(),e(63,"mat-form-field",6)(64,"mat-label"),i(65,"Name"),t(),e(66,"input",20),u("ngModelChange",function(a){return p(n.privateKeyName,a)||(n.privateKeyName=a),a}),t()(),e(67,"div",15)(68,"button",16)(69,"mat-icon"),i(70,"upload_file"),t(),i(71," Select Private Key File "),t(),e(72,"input",21),s("change",function(a){return n.onFileSelected(a,"privateKey")}),t()(),e(73,"mat-form-field",6)(74,"mat-label"),i(75,"Private Key"),t(),e(76,"textarea",22),u("ngModelChange",function(a){return p(n.privateKey,a)||(n.privateKey=a),a}),t(),e(77,"mat-hint"),i(78,"This key will be stored securely and used for signing credentials"),t()(),e(79,"div",9)(80,"button",10),s("click",function(){return n.closeDialog()}),i(81,"Cancel"),t(),e(82,"button",11),s("click",function(){return n.importPrivateKey()}),e(83,"mat-icon"),i(84,"vpn_key"),t(),i(85," Import Private Key "),t()()()()()()),r&2&&(d(11),c("ngModel",n.didString),d(17),c("ngModel",n.stellarKey),d(23),c("ngModel",n.jsonContent),d(15),c("ngModel",n.privateKeyName),d(10),c("ngModel",n.privateKey))},dependencies:[v,F,O,T,K,k,st,L,N,dt,j,W,B,b,x,P,lt,mt,D,E,pt],styles:[".import-dialog-container[_ngcontent-%COMP%]{padding:16px;max-width:600px}.dialog-title[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.tab-content[_ngcontent-%COMP%]{padding:20px 0}.tab-description[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:20px}.full-width[_ngcontent-%COMP%]{width:100%}.action-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;margin-top:20px}.file-input-wrapper[_ngcontent-%COMP%]{position:relative;margin-bottom:20px;overflow:hidden}.file-input-wrapper[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;cursor:pointer}.upload-btn[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;justify-content:center;gap:8px;padding:10px;border:1px dashed var(--primary-color)}textarea[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus{box-shadow:0 0 8px #00c3ff99}"]})};var vt=m=>["/identity",m],xt=(m,o)=>o.id;function bt(m,o){if(m&1){let r=S();e(0,"div",10)(1,"mat-icon"),i(2,"person_off"),t(),e(3,"h2"),i(4,"No Identities Found"),t(),e(5,"p"),i(6,"You haven't imported any identities yet."),t(),e(7,"button",5),s("click",function(){h(r);let l=f();return C(l.openImportDialog())}),i(8," Import Your First Identity "),t()()}}function Et(m,o){if(m&1){let r=S();e(0,"div",10)(1,"mat-icon"),i(2,"search_off"),t(),e(3,"h2"),i(4,"No Results Found"),t(),e(5,"p"),i(6,"No identities match your search criteria."),t(),e(7,"button",12),s("click",function(){h(r);let l=f();return C(l.searchTerm="")}),i(8," Clear Search "),t()()}}function Dt(m,o){if(m&1&&(e(0,"p",15),i(1),t()),m&2){let r=f().$implicit;d(),_(r.description)}}function wt(m,o){m&1&&(e(0,"p",17)(1,"mat-icon"),i(2,"vpn_key"),t(),i(3," Private Key Available "),t())}function kt(m,o){if(m&1){let r=S();e(0,"mat-card",13)(1,"mat-card-header")(2,"div",14)(3,"mat-icon"),i(4),t()(),e(5,"mat-card-title"),i(6),t(),e(7,"mat-card-subtitle"),i(8),t()(),e(9,"mat-card-content"),M(10,Dt,2,1,"p",15),e(11,"p",16),i(12,"Method: "),e(13,"span",3),i(14),t()(),e(15,"p",16),i(16),Y(17,"date"),t(),M(18,wt,4,0,"p",17),t(),e(19,"mat-card-actions")(20,"button",18),i(21," DETAILS "),t(),e(22,"button",19),s("click",function(){let l=h(r).$implicit,a=f(2);return C(a.deleteIdentity(l.id))}),i(23," DELETE "),t()()()}if(m&2){let r=o.$implicit,n=f(2);d(4),_(n.getMethodLogo(r.method)),d(2),_(r.name),d(2),_(n.truncateId(r.id)),d(2),y(r.description?10:-1),d(4),_(r.method),d(2),H("Created: ",q(17,8,r.created,"medium"),""),d(2),y(r.privateKey?18:-1),d(2),V("routerLink",G(11,vt,r.id))}}function Pt(m,o){if(m&1&&(e(0,"div",11),A(1,kt,24,13,"mat-card",13,xt),t()),m&2){let r=f();d(),z(r.filteredIdentities)}}var ut=class m{constructor(o,r){this.identityService=o;this.dialog=r;this.loadIdentities()}identities=[];searchTerm="";loadIdentities(){this.identityService.getAllIdentities().subscribe(o=>{this.identities=o})}get filteredIdentities(){if(!this.searchTerm)return this.identities;let o=this.searchTerm.toLowerCase();return this.identities.filter(r=>r.id.toLowerCase().includes(o)||r.name?.toLowerCase().includes(o)||r.description?.toLowerCase().includes(o))}openImportDialog(){this.dialog.open(R,{width:"600px"}).afterClosed().subscribe(r=>{r&&this.loadIdentities()})}deleteIdentity(o){confirm("Are you sure you want to delete this identity?")&&this.identityService.deleteIdentity(o)}getMethodLogo(o){switch(o){case"key":return"vpn_key";case"web":return"language";case"stellar":return"star";case"is":return"public";default:return"person"}}truncateId(o){return o.length<=30?o:o.substring(0,15)+"..."+o.substring(o.length-10)}static \u0275fac=function(r){return new(r||m)(g(w),g(at))};static \u0275cmp=I({type:m,selectors:[["app-identities"]],decls:22,vars:4,consts:[[1,"page-container"],[1,"page-header"],[1,"title-section"],[1,"neon-text"],[1,"actions-section"],["mat-raised-button","","color","primary",3,"click"],[1,"search-container"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by name or DID",3,"ngModelChange","ngModel"],["matSuffix",""],[1,"empty-state"],[1,"identities-grid"],["mat-button","","color","primary",3,"click"],[1,"identity-card","neon-card"],["mat-card-avatar","",1,"identity-avatar"],[1,"identity-description"],[1,"identity-meta"],[1,"private-key-indicator"],["mat-button","","color","primary",3,"routerLink"],["mat-button","","color","warn",3,"click"]],template:function(r,n){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4,"Identities"),t(),e(5,"p"),i(6,"Manage your decentralized identifiers (DIDs)"),t()(),e(7,"div",4)(8,"button",5),s("click",function(){return n.openImportDialog()}),e(9,"mat-icon"),i(10,"add"),t(),i(11," Import Identity "),t()()(),e(12,"div",6)(13,"mat-form-field",7)(14,"mat-label"),i(15,"Search"),t(),e(16,"input",8),u("ngModelChange",function(a){return p(n.searchTerm,a)||(n.searchTerm=a),a}),t(),e(17,"mat-icon",9),i(18,"search"),t()()(),M(19,bt,9,0,"div",10)(20,Et,9,0,"div",10)(21,Pt,3,0,"div",11),t()),r&2&&(d(16),c("ngModel",n.searchTerm),d(3),y(n.identities.length===0?19:-1),d(),y(n.filteredIdentities.length===0&&n.searchTerm?20:-1),d(),y(n.filteredIdentities.length>0?21:-1))},dependencies:[v,Q,U,ot,X,et,nt,$,it,tt,Z,b,x,D,E,k,P,W,B,L,N,j,F,O,T,K],styles:[".page-header[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;margin-bottom:30px}.title-section[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin-bottom:5px}.title-section[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary);margin:0}.search-container[_ngcontent-%COMP%]{margin-bottom:20px}.search-field[_ngcontent-%COMP%]{width:100%}.identities-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.identity-card[_ngcontent-%COMP%]{margin-bottom:20px}.identity-avatar[_ngcontent-%COMP%]{background-color:#00c3ff33;display:flex;align-items:center;justify-content:center}.identity-avatar[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--primary-color)}.identity-description[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:15px;min-height:40px}.identity-meta[_ngcontent-%COMP%]{font-size:.9rem;margin:5px 0;color:var(--text-secondary)}.private-key-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;color:var(--success-color);margin-top:10px}.private-key-indicator[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:5px;font-size:1rem;height:1rem;width:1rem}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 0;text-align:center}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:5rem;height:5rem;width:5rem;margin-bottom:20px;color:var(--text-secondary)}.empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:10px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--text-secondary)}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.actions-section[_ngcontent-%COMP%]{margin-top:15px;width:100%}.identities-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{ut as IdentitiesComponent};
